const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LiveMap-BNRl0C6z.js","assets/vendor-Cw4NQglw.js","assets/ui-BQCqNqg0.js","assets/mapbox-ChopjHYq.js","assets/mapbox-n1pgiqlU.css","assets/vendor-DpsRipQV.css","assets/DriverMapView-Ba5f70C2.js"])))=>i.map(i=>d[i]);
import{Q as Eo,r as m,c as hr,j as t,V as Nr,R as br,A as gr,C as xr,X as dn,T as yr,D as kr,P as wo,a as vr,b as jo,d as Bo,e as Vo,u as he,f as Re,g as fe,S as Uo,h as So,L as Ne,i as Cr,k as Dr,l as Ar,m as Er,n as _o,o as wr,I as jr,p as To,q as Ro,s as Na,B as ps,M as vt,t as se,U as ws,v as ze,O as mn,w as Br,x as fn,y as Mo,z as Vr,E as Ur,F as Sr,G as Po,H as tt,J as Ps,K as Ct,N as ta,W as Lo,Y as _r,Z as Io,_ as qo,$ as $s,a0 as Tr,a1 as Rr,a2 as Mr,a3 as Oo,a4 as Pr,a5 as Fo,a6 as Dt,a7 as pn,a8 as hs,a9 as Is,aa as ba,ab as Ks,ac as Lr,ad as Ir,ae as Ln,af as js,ag as Bs,ah as aa,ai as $o,aj as qr,ak as zo,al as Or,am as Fr,an as $r,ao as zr,ap as Wr,aq as Wo,ar as Qo,as as Qr,at as Go,au as Ko,av as Yo,aw as At,ax as Zo,ay as Gr,az as Ho,aA as Kr,aB as Yr,aC as Xo,aD as Zr,aE as Jo,aF as Hr,aG as el,aH as Xr,aI as Jr,aJ as sl,aK as ei,aL as tl,aM as si,aN as al,aO as nl,aP as ct,aQ as ti,aR as ai,aS as rl,aT as In,aU as il,aV as Ns,aW as ol,aX as za,aY as ll,aZ as cl,a_ as ul,a$ as ni,b0 as dl,b1 as ml,b2 as ri,b3 as fl,b4 as ii,b5 as oi,b6 as pl,b7 as hl,b8 as Nl,b9 as bl,ba as gl,bb as li,bc as Ea,bd as wa,be as hn,bf as xl,bg as yl,bh as kl,bi as vl,bj as Cl,bk as Dl,bl as Al,bm as El,bn as wl,bo as Ue,bp as at,bq as jl}from"./vendor-Cw4NQglw.js";import"./mapbox-ChopjHYq.js";import"./ui-BQCqNqg0.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();async function Bl(s){if(!s.ok){const e=await s.text()||s.statusText;throw new Error(`${s.status}: ${e}`)}}const Vl=({on401:s})=>async({queryKey:e})=>{const a=await fetch(e.join("/"),{credentials:"include"});return await Bl(a),await a.json()},Ul=new Eo({defaultOptions:{queries:{queryFn:Vl({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!0,staleTime:3e4,retry:!1},mutations:{retry:!1}}}),Sl=1,_l=1e6;let ja=0;function Tl(){return ja=(ja+1)%Number.MAX_SAFE_INTEGER,ja.toString()}const Ba=new Map,qn=s=>{if(Ba.has(s))return;const e=setTimeout(()=>{Ba.delete(s),kt({type:"REMOVE_TOAST",toastId:s})},_l);Ba.set(s,e)},Rl=(s,e)=>{switch(e.type){case"ADD_TOAST":return{...s,toasts:[e.toast,...s.toasts].slice(0,Sl)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=e;return a?qn(a):s.toasts.forEach(n=>{qn(n.id)}),{...s,toasts:s.toasts.map(n=>n.id===a||a===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(a=>a.id!==e.toastId)}}},Jt=[];let ea={toasts:[]};function kt(s){ea=Rl(ea,s),Jt.forEach(e=>{e(ea)})}function Ml({...s}){const e=Tl(),a=r=>kt({type:"UPDATE_TOAST",toast:{...r,id:e}}),n=()=>kt({type:"DISMISS_TOAST",toastId:e});return kt({type:"ADD_TOAST",toast:{...s,id:e,open:!0,onOpenChange:r=>{r||n()}}}),{id:e,dismiss:n,update:a}}function be(){const[s,e]=m.useState(ea);return m.useEffect(()=>(Jt.push(e),()=>{const a=Jt.indexOf(e);a>-1&&Jt.splice(a,1)}),[s]),{...s,toast:Ml,dismiss:a=>kt({type:"DISMISS_TOAST",toastId:a})}}const On=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,Fn=hr,zt=(s,e)=>a=>{var n;if(e?.variants==null)return Fn(s,a?.class,a?.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(u=>{const c=a?.[u],d=i?.[u];if(c===null)return null;const b=On(c)||On(d);return r[u][b]}),l=a&&Object.entries(a).reduce((u,c)=>{let[d,b]=c;return b===void 0||(u[d]=b),u},{}),f=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,c)=>{let{class:d,className:b,...g}=c;return Object.entries(g).every(D=>{let[h,y]=D;return Array.isArray(y)?y.includes({...i,...l}[h]):{...i,...l}[h]===y})?[...u,d,b]:u},[]);return Fn(s,o,f,a?.class,a?.className)},Nn="-",Pl=s=>{const e=Il(s),{conflictingClassGroups:a,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:o=>{const l=o.split(Nn);return l[0]===""&&l.length!==1&&l.shift(),ci(l,e)||Ll(o)},getConflictingClassGroupIds:(o,l)=>{const f=a[o]||[];return l&&n[o]?[...f,...n[o]]:f}}},ci=(s,e)=>{if(s.length===0)return e.classGroupId;const a=s[0],n=e.nextPart.get(a),r=n?ci(s.slice(1),n):void 0;if(r)return r;if(e.validators.length===0)return;const i=s.join(Nn);return e.validators.find(({validator:o})=>o(i))?.classGroupId},$n=/^\[(.+)\]$/,Ll=s=>{if($n.test(s)){const e=$n.exec(s)[1],a=e?.substring(0,e.indexOf(":"));if(a)return"arbitrary.."+a}},Il=s=>{const{theme:e,prefix:a}=s,n={nextPart:new Map,validators:[]};return Ol(Object.entries(s.classGroups),a).forEach(([i,o])=>{Wa(o,n,i,e)}),n},Wa=(s,e,a,n)=>{s.forEach(r=>{if(typeof r=="string"){const i=r===""?e:zn(e,r);i.classGroupId=a;return}if(typeof r=="function"){if(ql(r)){Wa(r(n),e,a,n);return}e.validators.push({validator:r,classGroupId:a});return}Object.entries(r).forEach(([i,o])=>{Wa(o,zn(e,i),a,n)})})},zn=(s,e)=>{let a=s;return e.split(Nn).forEach(n=>{a.nextPart.has(n)||a.nextPart.set(n,{nextPart:new Map,validators:[]}),a=a.nextPart.get(n)}),a},ql=s=>s.isThemeGetter,Ol=(s,e)=>e?s.map(([a,n])=>{const r=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[a,r]}):s,Fl=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,a=new Map,n=new Map;const r=(i,o)=>{a.set(i,o),e++,e>s&&(e=0,n=a,a=new Map)};return{get(i){let o=a.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return r(i,o),o},set(i,o){a.has(i)?a.set(i,o):r(i,o)}}},ui="!",$l=s=>{const{separator:e,experimentalParseClassName:a}=s,n=e.length===1,r=e[0],i=e.length,o=l=>{const f=[];let u=0,c=0,d;for(let y=0;y<l.length;y++){let x=l[y];if(u===0){if(x===r&&(n||l.slice(y,y+i)===e)){f.push(l.slice(c,y)),c=y+i;continue}if(x==="/"){d=y;continue}}x==="["?u++:x==="]"&&u--}const b=f.length===0?l:l.substring(c),g=b.startsWith(ui),D=g?b.substring(1):b,h=d&&d>c?d-c:void 0;return{modifiers:f,hasImportantModifier:g,baseClassName:D,maybePostfixModifierPosition:h}};return a?l=>a({className:l,parseClassName:o}):o},zl=s=>{if(s.length<=1)return s;const e=[];let a=[];return s.forEach(n=>{n[0]==="["?(e.push(...a.sort(),n),a=[]):a.push(n)}),e.push(...a.sort()),e},Wl=s=>({cache:Fl(s.cacheSize),parseClassName:$l(s),...Pl(s)}),Ql=/\s+/,Gl=(s,e)=>{const{parseClassName:a,getClassGroupId:n,getConflictingClassGroupIds:r}=e,i=[],o=s.trim().split(Ql);let l="";for(let f=o.length-1;f>=0;f-=1){const u=o[f],{modifiers:c,hasImportantModifier:d,baseClassName:b,maybePostfixModifierPosition:g}=a(u);let D=!!g,h=n(D?b.substring(0,g):b);if(!h){if(!D){l=u+(l.length>0?" "+l:l);continue}if(h=n(b),!h){l=u+(l.length>0?" "+l:l);continue}D=!1}const y=zl(c).join(":"),x=d?y+ui:y,N=x+h;if(i.includes(N))continue;i.push(N);const R=r(h,D);for(let w=0;w<R.length;++w){const S=R[w];i.push(x+S)}l=u+(l.length>0?" "+l:l)}return l};function Kl(){let s=0,e,a,n="";for(;s<arguments.length;)(e=arguments[s++])&&(a=di(e))&&(n&&(n+=" "),n+=a);return n}const di=s=>{if(typeof s=="string")return s;let e,a="";for(let n=0;n<s.length;n++)s[n]&&(e=di(s[n]))&&(a&&(a+=" "),a+=e);return a};function Yl(s,...e){let a,n,r,i=o;function o(f){const u=e.reduce((c,d)=>d(c),s());return a=Wl(u),n=a.cache.get,r=a.cache.set,i=l,l(f)}function l(f){const u=n(f);if(u)return u;const c=Gl(f,a);return r(f,c),c}return function(){return i(Kl.apply(null,arguments))}}const ie=s=>{const e=a=>a[s]||[];return e.isThemeGetter=!0,e},mi=/^\[(?:([a-z-]+):)?(.+)\]$/i,Zl=/^\d+\/\d+$/,Hl=new Set(["px","full","screen"]),Xl=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Jl=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ec=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,sc=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tc=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,us=s=>nt(s)||Hl.has(s)||Zl.test(s),xs=s=>ft(s,"length",uc),nt=s=>!!s&&!Number.isNaN(Number(s)),Va=s=>ft(s,"number",nt),ht=s=>!!s&&Number.isInteger(Number(s)),ac=s=>s.endsWith("%")&&nt(s.slice(0,-1)),W=s=>mi.test(s),ys=s=>Xl.test(s),nc=new Set(["length","size","percentage"]),rc=s=>ft(s,nc,fi),ic=s=>ft(s,"position",fi),oc=new Set(["image","url"]),lc=s=>ft(s,oc,mc),cc=s=>ft(s,"",dc),Nt=()=>!0,ft=(s,e,a)=>{const n=mi.exec(s);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):a(n[2]):!1},uc=s=>Jl.test(s)&&!ec.test(s),fi=()=>!1,dc=s=>sc.test(s),mc=s=>tc.test(s),fc=()=>{const s=ie("colors"),e=ie("spacing"),a=ie("blur"),n=ie("brightness"),r=ie("borderColor"),i=ie("borderRadius"),o=ie("borderSpacing"),l=ie("borderWidth"),f=ie("contrast"),u=ie("grayscale"),c=ie("hueRotate"),d=ie("invert"),b=ie("gap"),g=ie("gradientColorStops"),D=ie("gradientColorStopPositions"),h=ie("inset"),y=ie("margin"),x=ie("opacity"),N=ie("padding"),R=ie("saturate"),w=ie("scale"),S=ie("sepia"),C=ie("skew"),Z=ie("space"),H=ie("translate"),k=()=>["auto","contain","none"],G=()=>["auto","hidden","clip","visible","scroll"],ae=()=>["auto",W,e],$=()=>[W,e],Ve=()=>["",us,xs],Ae=()=>["auto",nt,W],Ke=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ts=()=>["solid","dashed","dotted","double","none"],cs=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],gs=()=>["start","end","center","between","around","evenly","stretch"],Oe=()=>["","0",W],as=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ee=()=>[nt,W];return{cacheSize:500,separator:":",theme:{colors:[Nt],spacing:[us,xs],blur:["none","",ys,W],brightness:Ee(),borderColor:[s],borderRadius:["none","","full",ys,W],borderSpacing:$(),borderWidth:Ve(),contrast:Ee(),grayscale:Oe(),hueRotate:Ee(),invert:Oe(),gap:$(),gradientColorStops:[s],gradientColorStopPositions:[ac,xs],inset:ae(),margin:ae(),opacity:Ee(),padding:$(),saturate:Ee(),scale:Ee(),sepia:Oe(),skew:Ee(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",W]}],container:["container"],columns:[{columns:[ys]}],"break-after":[{"break-after":as()}],"break-before":[{"break-before":as()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ke(),W]}],overflow:[{overflow:G()}],"overflow-x":[{"overflow-x":G()}],"overflow-y":[{"overflow-y":G()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],start:[{start:[h]}],end:[{end:[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ht,W]}],basis:[{basis:ae()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",W]}],grow:[{grow:Oe()}],shrink:[{shrink:Oe()}],order:[{order:["first","last","none",ht,W]}],"grid-cols":[{"grid-cols":[Nt]}],"col-start-end":[{col:["auto",{span:["full",ht,W]},W]}],"col-start":[{"col-start":Ae()}],"col-end":[{"col-end":Ae()}],"grid-rows":[{"grid-rows":[Nt]}],"row-start-end":[{row:["auto",{span:[ht,W]},W]}],"row-start":[{"row-start":Ae()}],"row-end":[{"row-end":Ae()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",W]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",W]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...gs()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...gs(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...gs(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[Z]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Z]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",W,e]}],"min-w":[{"min-w":[W,e,"min","max","fit"]}],"max-w":[{"max-w":[W,e,"none","full","min","max","fit","prose",{screen:[ys]},ys]}],h:[{h:[W,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[W,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[W,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[W,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ys,xs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Va]}],"font-family":[{font:[Nt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",W]}],"line-clamp":[{"line-clamp":["none",nt,Va]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",us,W]}],"list-image":[{"list-image":["none",W]}],"list-style-type":[{list:["none","disc","decimal",W]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ts(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",us,xs]}],"underline-offset":[{"underline-offset":["auto",us,W]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",W]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",W]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ke(),ic]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",rc]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},lc]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[D]}],"gradient-via-pos":[{via:[D]}],"gradient-to-pos":[{to:[D]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...ts(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:ts()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...ts()]}],"outline-offset":[{"outline-offset":[us,W]}],"outline-w":[{outline:[us,xs]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:Ve()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[us,xs]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",ys,cc]}],"shadow-color":[{shadow:[Nt]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...cs(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":cs()}],filter:[{filter:["","none"]}],blur:[{blur:[a]}],brightness:[{brightness:[n]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",ys,W]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[R]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[a]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",W]}],duration:[{duration:Ee()}],ease:[{ease:["linear","in","out","in-out",W]}],delay:[{delay:Ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",W]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[ht,W]}],"translate-x":[{"translate-x":[H]}],"translate-y":[{"translate-y":[H]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",W]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",W]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",W]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[us,xs,Va]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},pc=Yl(fc);function ne(s){const e=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&e==="[object Date]"?new s.constructor(+s):typeof s=="number"||e==="[object Number]"||typeof s=="string"||e==="[object String]"?new Date(s):new Date(NaN)}function Vs(s,e){return s instanceof Date?new s.constructor(e):new Date(e)}const pi=6048e5,hc=864e5,Yt=43200,Wn=1440;let Nc={};function Wt(){return Nc}function Et(s,e){const a=Wt(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,r=ne(s),i=r.getDay(),o=(i<n?7:0)+i-n;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function na(s){return Et(s,{weekStartsOn:1})}function hi(s){const e=ne(s),a=e.getFullYear(),n=Vs(s,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const r=na(n),i=Vs(s,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);const o=na(i);return e.getTime()>=r.getTime()?a+1:e.getTime()>=o.getTime()?a:a-1}function Qn(s){const e=ne(s);return e.setHours(0,0,0,0),e}function ra(s){const e=ne(s),a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return a.setUTCFullYear(e.getFullYear()),+s-+a}function bc(s,e){const a=Qn(s),n=Qn(e),r=+a-ra(a),i=+n-ra(n);return Math.round((r-i)/hc)}function gc(s){const e=hi(s),a=Vs(s,0);return a.setFullYear(e,0,4),a.setHours(0,0,0,0),na(a)}function sa(s,e){const a=ne(s),n=ne(e),r=a.getTime()-n.getTime();return r<0?-1:r>0?1:r}function xc(s){return Vs(s,Date.now())}function yc(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function Ni(s){if(!yc(s)&&typeof s!="number")return!1;const e=ne(s);return!isNaN(Number(e))}function kc(s,e){const a=ne(s),n=ne(e),r=a.getFullYear()-n.getFullYear(),i=a.getMonth()-n.getMonth();return r*12+i}function vc(s){return e=>{const n=(s?Math[s]:Math.trunc)(e);return n===0?0:n}}function Cc(s,e){return+ne(s)-+ne(e)}function Dc(s){const e=ne(s);return e.setHours(23,59,59,999),e}function Ac(s){const e=ne(s),a=e.getMonth();return e.setFullYear(e.getFullYear(),a+1,0),e.setHours(23,59,59,999),e}function Ec(s){const e=ne(s);return+Dc(e)==+Ac(e)}function wc(s,e){const a=ne(s),n=ne(e),r=sa(a,n),i=Math.abs(kc(a,n));let o;if(i<1)o=0;else{a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-r*i);let l=sa(a,n)===-r;Ec(ne(s))&&i===1&&sa(s,n)===1&&(l=!1),o=r*(i-Number(l))}return o===0?0:o}function jc(s,e,a){const n=Cc(s,e)/1e3;return vc(a?.roundingMethod)(n)}function Bc(s){const e=ne(s),a=Vs(s,0);return a.setFullYear(e.getFullYear(),0,1),a.setHours(0,0,0,0),a}const Vc={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Uc=(s,e,a)=>{let n;const r=Vc[s];return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",e.toString()),a?.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function Ua(s){return(e={})=>{const a=e.width?String(e.width):s.defaultWidth;return s.formats[a]||s.formats[s.defaultWidth]}}const Sc={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},_c={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Tc={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Rc={date:Ua({formats:Sc,defaultWidth:"full"}),time:Ua({formats:_c,defaultWidth:"full"}),dateTime:Ua({formats:Tc,defaultWidth:"full"})},Mc={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Pc=(s,e,a,n)=>Mc[s];function bt(s){return(e,a)=>{const n=a?.context?String(a.context):"standalone";let r;if(n==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,l=a?.width?String(a.width):o;r=s.formattingValues[l]||s.formattingValues[o]}else{const o=s.defaultWidth,l=a?.width?String(a.width):s.defaultWidth;r=s.values[l]||s.values[o]}const i=s.argumentCallback?s.argumentCallback(e):e;return r[i]}}const Lc={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ic={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qc={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Oc={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Fc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$c={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zc=(s,e)=>{const a=Number(s),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Wc={ordinalNumber:zc,era:bt({values:Lc,defaultWidth:"wide"}),quarter:bt({values:Ic,defaultWidth:"wide",argumentCallback:s=>s-1}),month:bt({values:qc,defaultWidth:"wide"}),day:bt({values:Oc,defaultWidth:"wide"}),dayPeriod:bt({values:Fc,defaultWidth:"wide",formattingValues:$c,defaultFormattingWidth:"wide"})};function gt(s){return(e,a={})=>{const n=a.width,r=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],i=e.match(r);if(!i)return null;const o=i[0],l=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],f=Array.isArray(l)?Gc(l,d=>d.test(o)):Qc(l,d=>d.test(o));let u;u=s.valueCallback?s.valueCallback(f):f,u=a.valueCallback?a.valueCallback(u):u;const c=e.slice(o.length);return{value:u,rest:c}}}function Qc(s,e){for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)&&e(s[a]))return a}function Gc(s,e){for(let a=0;a<s.length;a++)if(e(s[a]))return a}function Kc(s){return(e,a={})=>{const n=e.match(s.matchPattern);if(!n)return null;const r=n[0],i=e.match(s.parsePattern);if(!i)return null;let o=s.valueCallback?s.valueCallback(i[0]):i[0];o=a.valueCallback?a.valueCallback(o):o;const l=e.slice(r.length);return{value:o,rest:l}}}const Yc=/^(\d+)(th|st|nd|rd)?/i,Zc=/\d+/i,Hc={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xc={any:[/^b/i,/^(a|c)/i]},Jc={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},eu={any:[/1/i,/2/i,/3/i,/4/i]},su={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tu={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},au={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nu={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ru={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},iu={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ou={ordinalNumber:Kc({matchPattern:Yc,parsePattern:Zc,valueCallback:s=>parseInt(s,10)}),era:gt({matchPatterns:Hc,defaultMatchWidth:"wide",parsePatterns:Xc,defaultParseWidth:"any"}),quarter:gt({matchPatterns:Jc,defaultMatchWidth:"wide",parsePatterns:eu,defaultParseWidth:"any",valueCallback:s=>s+1}),month:gt({matchPatterns:su,defaultMatchWidth:"wide",parsePatterns:tu,defaultParseWidth:"any"}),day:gt({matchPatterns:au,defaultMatchWidth:"wide",parsePatterns:nu,defaultParseWidth:"any"}),dayPeriod:gt({matchPatterns:ru,defaultMatchWidth:"any",parsePatterns:iu,defaultParseWidth:"any"})},bi={code:"en-US",formatDistance:Uc,formatLong:Rc,formatRelative:Pc,localize:Wc,match:ou,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lu(s){const e=ne(s);return bc(e,Bc(e))+1}function cu(s){const e=ne(s),a=+na(e)-+gc(e);return Math.round(a/pi)+1}function gi(s,e){const a=ne(s),n=a.getFullYear(),r=Wt(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=Vs(s,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Et(o,e),f=Vs(s,0);f.setFullYear(n,0,i),f.setHours(0,0,0,0);const u=Et(f,e);return a.getTime()>=l.getTime()?n+1:a.getTime()>=u.getTime()?n:n-1}function uu(s,e){const a=Wt(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,r=gi(s,e),i=Vs(s,0);return i.setFullYear(r,0,n),i.setHours(0,0,0,0),Et(i,e)}function du(s,e){const a=ne(s),n=+Et(a,e)-+uu(a,e);return Math.round(n/pi)+1}function J(s,e){const a=s<0?"-":"",n=Math.abs(s).toString().padStart(e,"0");return a+n}const ks={y(s,e){const a=s.getFullYear(),n=a>0?a:1-a;return J(e==="yy"?n%100:n,e.length)},M(s,e){const a=s.getMonth();return e==="M"?String(a+1):J(a+1,2)},d(s,e){return J(s.getDate(),e.length)},a(s,e){const a=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];default:return a==="am"?"a.m.":"p.m."}},h(s,e){return J(s.getHours()%12||12,e.length)},H(s,e){return J(s.getHours(),e.length)},m(s,e){return J(s.getMinutes(),e.length)},s(s,e){return J(s.getSeconds(),e.length)},S(s,e){const a=e.length,n=s.getMilliseconds(),r=Math.trunc(n*Math.pow(10,a-3));return J(r,e.length)}},Zs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Gn={G:function(s,e,a){const n=s.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(s,e,a){if(e==="yo"){const n=s.getFullYear(),r=n>0?n:1-n;return a.ordinalNumber(r,{unit:"year"})}return ks.y(s,e)},Y:function(s,e,a,n){const r=gi(s,n),i=r>0?r:1-r;if(e==="YY"){const o=i%100;return J(o,2)}return e==="Yo"?a.ordinalNumber(i,{unit:"year"}):J(i,e.length)},R:function(s,e){const a=hi(s);return J(a,e.length)},u:function(s,e){const a=s.getFullYear();return J(a,e.length)},Q:function(s,e,a){const n=Math.ceil((s.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return J(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(s,e,a){const n=Math.ceil((s.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return J(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(s,e,a){const n=s.getMonth();switch(e){case"M":case"MM":return ks.M(s,e);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(s,e,a){const n=s.getMonth();switch(e){case"L":return String(n+1);case"LL":return J(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(s,e,a,n){const r=du(s,n);return e==="wo"?a.ordinalNumber(r,{unit:"week"}):J(r,e.length)},I:function(s,e,a){const n=cu(s);return e==="Io"?a.ordinalNumber(n,{unit:"week"}):J(n,e.length)},d:function(s,e,a){return e==="do"?a.ordinalNumber(s.getDate(),{unit:"date"}):ks.d(s,e)},D:function(s,e,a){const n=lu(s);return e==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):J(n,e.length)},E:function(s,e,a){const n=s.getDay();switch(e){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(s,e,a,n){const r=s.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return J(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(s,e,a,n){const r=s.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return J(i,e.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(s,e,a){const n=s.getDay(),r=n===0?7:n;switch(e){case"i":return String(r);case"ii":return J(r,e.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(s,e,a){const r=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(s,e,a){const n=s.getHours();let r;switch(n===12?r=Zs.noon:n===0?r=Zs.midnight:r=n/12>=1?"pm":"am",e){case"b":case"bb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(s,e,a){const n=s.getHours();let r;switch(n>=17?r=Zs.evening:n>=12?r=Zs.afternoon:n>=4?r=Zs.morning:r=Zs.night,e){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(s,e,a){if(e==="ho"){let n=s.getHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return ks.h(s,e)},H:function(s,e,a){return e==="Ho"?a.ordinalNumber(s.getHours(),{unit:"hour"}):ks.H(s,e)},K:function(s,e,a){const n=s.getHours()%12;return e==="Ko"?a.ordinalNumber(n,{unit:"hour"}):J(n,e.length)},k:function(s,e,a){let n=s.getHours();return n===0&&(n=24),e==="ko"?a.ordinalNumber(n,{unit:"hour"}):J(n,e.length)},m:function(s,e,a){return e==="mo"?a.ordinalNumber(s.getMinutes(),{unit:"minute"}):ks.m(s,e)},s:function(s,e,a){return e==="so"?a.ordinalNumber(s.getSeconds(),{unit:"second"}):ks.s(s,e)},S:function(s,e){return ks.S(s,e)},X:function(s,e,a){const n=s.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Yn(n);case"XXXX":case"XX":return Ls(n);default:return Ls(n,":")}},x:function(s,e,a){const n=s.getTimezoneOffset();switch(e){case"x":return Yn(n);case"xxxx":case"xx":return Ls(n);default:return Ls(n,":")}},O:function(s,e,a){const n=s.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Kn(n,":");default:return"GMT"+Ls(n,":")}},z:function(s,e,a){const n=s.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Kn(n,":");default:return"GMT"+Ls(n,":")}},t:function(s,e,a){const n=Math.trunc(s.getTime()/1e3);return J(n,e.length)},T:function(s,e,a){const n=s.getTime();return J(n,e.length)}};function Kn(s,e=""){const a=s>0?"-":"+",n=Math.abs(s),r=Math.trunc(n/60),i=n%60;return i===0?a+String(r):a+String(r)+e+J(i,2)}function Yn(s,e){return s%60===0?(s>0?"-":"+")+J(Math.abs(s)/60,2):Ls(s,e)}function Ls(s,e=""){const a=s>0?"-":"+",n=Math.abs(s),r=J(Math.trunc(n/60),2),i=J(n%60,2);return a+r+e+i}const Zn=(s,e)=>{switch(s){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},xi=(s,e)=>{switch(s){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},mu=(s,e)=>{const a=s.match(/(P+)(p+)?/)||[],n=a[1],r=a[2];if(!r)return Zn(s,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Zn(n,e)).replace("{{time}}",xi(r,e))},fu={p:xi,P:mu},pu=/^D+$/,hu=/^Y+$/,Nu=["D","DD","YY","YYYY"];function bu(s){return pu.test(s)}function gu(s){return hu.test(s)}function xu(s,e,a){const n=yu(s,e,a);if(console.warn(n),Nu.includes(s))throw new RangeError(n)}function yu(s,e,a){const n=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${e}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ku=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vu=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cu=/^'([^]*?)'?$/,Du=/''/g,Au=/[a-zA-Z]/;function wt(s,e,a){const n=Wt(),r=n.locale??bi,i=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,l=ne(s);if(!Ni(l))throw new RangeError("Invalid time value");let f=e.match(vu).map(c=>{const d=c[0];if(d==="p"||d==="P"){const b=fu[d];return b(c,r.formatLong)}return c}).join("").match(ku).map(c=>{if(c==="''")return{isToken:!1,value:"'"};const d=c[0];if(d==="'")return{isToken:!1,value:Eu(c)};if(Gn[d])return{isToken:!0,value:c};if(d.match(Au))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:c}});r.localize.preprocessor&&(f=r.localize.preprocessor(l,f));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:r};return f.map(c=>{if(!c.isToken)return c.value;const d=c.value;(gu(d)||bu(d))&&xu(d,e,String(s));const b=Gn[d[0]];return b(l,d,r.localize,u)}).join("")}function Eu(s){const e=s.match(Cu);return e?e[1].replace(Du,"'"):s}function wu(s,e,a){const n=Wt(),r=a?.locale??n.locale??bi,i=2520,o=sa(s,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:o});let f,u;o>0?(f=ne(e),u=ne(s)):(f=ne(s),u=ne(e));const c=jc(u,f),d=(ra(u)-ra(f))/1e3,b=Math.round((c-d)/60);let g;if(b<2)return a?.includeSeconds?c<5?r.formatDistance("lessThanXSeconds",5,l):c<10?r.formatDistance("lessThanXSeconds",10,l):c<20?r.formatDistance("lessThanXSeconds",20,l):c<40?r.formatDistance("halfAMinute",0,l):c<60?r.formatDistance("lessThanXMinutes",1,l):r.formatDistance("xMinutes",1,l):b===0?r.formatDistance("lessThanXMinutes",1,l):r.formatDistance("xMinutes",b,l);if(b<45)return r.formatDistance("xMinutes",b,l);if(b<90)return r.formatDistance("aboutXHours",1,l);if(b<Wn){const D=Math.round(b/60);return r.formatDistance("aboutXHours",D,l)}else{if(b<i)return r.formatDistance("xDays",1,l);if(b<Yt){const D=Math.round(b/Wn);return r.formatDistance("xDays",D,l)}else if(b<Yt*2)return g=Math.round(b/Yt),r.formatDistance("aboutXMonths",g,l)}if(g=wc(u,f),g<12){const D=Math.round(b/Yt);return r.formatDistance("xMonths",D,l)}else{const D=g%12,h=Math.trunc(g/12);return D<3?r.formatDistance("aboutXYears",h,l):D<9?r.formatDistance("overXYears",h,l):r.formatDistance("almostXYears",h+1,l)}}function ju(s,e){return wu(s,xc(s),e)}function T(...s){return pc(hr(s))}async function Ie(s,e={}){const a=localStorage.getItem("token"),n={...e.headers};a&&(n.Authorization=`Bearer ${a}`),e.body&&typeof e.body=="string"&&(n["Content-Type"]="application/json");const r=await fetch(s,{...e,headers:n,credentials:"include"});if(r.status===401||r.status===403){localStorage.removeItem("token"),window.dispatchEvent(new CustomEvent("auth:expired"));const i=await r.json().catch(()=>({message:"Session expired"}));throw new Us(i.message||"Session expired. Please log in again.")}return r}class Us extends Error{constructor(e){super(e),this.name="AuthError"}}function ga(s,e="PP"){if(!s)return"Invalid Date";const a=new Date(s);if(!Ni(a))return console.error("Invalid date encountered:",s),"Invalid Date";try{return wt(a,e)}catch(n){return console.error("Date formatting error:",n),"Error"}}const Bu=wo,yi=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Nr,{ref:a,className:T("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toast.tsx",lineNumber:14,columnNumber:3},void 0));yi.displayName=Nr.displayName;const Vu=zt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ki=m.forwardRef(({className:s,variant:e,...a},n)=>t.jsxDEV(br,{ref:n,className:T(Vu({variant:e}),s),...a},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toast.tsx",lineNumber:47,columnNumber:5},void 0));ki.displayName=br.displayName;const Uu=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(gr,{ref:a,className:T("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toast.tsx",lineNumber:60,columnNumber:3},void 0));Uu.displayName=gr.displayName;const vi=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(xr,{ref:a,className:T("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...e,children:t.jsxDEV(dn,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toast.tsx",lineNumber:84,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toast.tsx",lineNumber:75,columnNumber:3},void 0));vi.displayName=xr.displayName;const Ci=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(yr,{ref:a,className:T("text-sm font-semibold",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toast.tsx",lineNumber:93,columnNumber:3},void 0));Ci.displayName=yr.displayName;const Di=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(kr,{ref:a,className:T("text-sm opacity-90",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toast.tsx",lineNumber:105,columnNumber:3},void 0));Di.displayName=kr.displayName;function Su(){const{toasts:s}=be();return t.jsxDEV(Bu,{children:[s.map(function({id:e,title:a,description:n,action:r,...i}){return t.jsxDEV(ki,{...i,children:[t.jsxDEV("div",{className:"grid gap-1",children:[a&&t.jsxDEV(Ci,{children:a},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toaster.tsx",lineNumber:20,columnNumber:25},this),n&&t.jsxDEV(Di,{children:n},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toaster.tsx",lineNumber:22,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toaster.tsx",lineNumber:19,columnNumber:13},this),r,t.jsxDEV(vi,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toaster.tsx",lineNumber:26,columnNumber:13},this)]},e,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toaster.tsx",lineNumber:18,columnNumber:11},this)}),t.jsxDEV(yi,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toaster.tsx",lineNumber:30,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/toaster.tsx",lineNumber:15,columnNumber:5},this)}const _u=jo,Tu=Bo,Ru=Vo,Ai=m.forwardRef(({className:s,sideOffset:e=4,...a},n)=>t.jsxDEV(vr,{ref:n,sideOffset:e,className:T("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...a},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/tooltip.tsx",lineNumber:18,columnNumber:3},void 0));Ai.displayName=vr.displayName;async function Mu(){const s=localStorage.getItem("token");if(!s)return null;const e=await fetch("/api/auth/user",{headers:{Authorization:`Bearer ${s}`}});return e.status===401||e.status===403?(localStorage.removeItem("token"),null):e.ok?e.json():(console.error(`Auth error: ${e.status}: ${e.statusText}`),null)}async function Pu(){localStorage.removeItem("token"),window.location.href="/"}function Ce(){const s=he(),e=typeof window<"u"&&!!localStorage.getItem("token"),{data:a,isLoading:n,isFetched:r}=Re({queryKey:["/api/auth/user"],queryFn:Mu,retry:!1,staleTime:1/0,gcTime:1/0,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,enabled:e,initialData:e?void 0:null}),i=e&&n&&!r;m.useEffect(()=>{const u=()=>{s.setQueryData(["/api/auth/user"],null)};return window.addEventListener("auth:expired",u),()=>window.removeEventListener("auth:expired",u)},[s]);const o=fe({mutationFn:Pu,onSuccess:()=>{s.setQueryData(["/api/auth/user"],null)}}),l=fe({mutationFn:async u=>{const c=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!c.ok){const d=await c.json();throw new Error(d.message||"Login failed")}return c.json()},onSuccess:u=>{localStorage.setItem("token",u.token),s.setQueryData(["/api/auth/user"],u.user)}}),f=fe({mutationFn:async u=>{const c=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!c.ok){const d=await c.json();throw new Error(d.message||"Registration failed")}return c.json()},onSuccess:u=>{u.token&&(localStorage.setItem("token",u.token),s.setQueryData(["/api/auth/user"],u.user))}});return{user:a,isLoading:i,isAuthenticated:!!a,logout:o.mutate,isLoggingOut:o.isPending,login:l.mutateAsync,isLoggingIn:l.isPending,register:f.mutateAsync,isRegistering:f.isPending}}const ee=m.forwardRef(({className:s,...e},a)=>t.jsxDEV("div",{ref:a,className:T("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/card.tsx",lineNumber:9,columnNumber:3},void 0));ee.displayName="Card";const Fe=m.forwardRef(({className:s,...e},a)=>t.jsxDEV("div",{ref:a,className:T("flex flex-col space-y-1.5 p-6",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/card.tsx",lineNumber:24,columnNumber:3},void 0));Fe.displayName="CardHeader";const Le=m.forwardRef(({className:s,...e},a)=>t.jsxDEV("div",{ref:a,className:T("text-2xl font-semibold leading-none tracking-tight",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/card.tsx",lineNumber:36,columnNumber:3},void 0));Le.displayName="CardTitle";const Ze=m.forwardRef(({className:s,...e},a)=>t.jsxDEV("div",{ref:a,className:T("text-sm text-muted-foreground",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/card.tsx",lineNumber:51,columnNumber:3},void 0));Ze.displayName="CardDescription";const me=m.forwardRef(({className:s,...e},a)=>t.jsxDEV("div",{ref:a,className:T("p-6 pt-0",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/card.tsx",lineNumber:63,columnNumber:3},void 0));me.displayName="CardContent";const Lu=m.forwardRef(({className:s,...e},a)=>t.jsxDEV("div",{ref:a,className:T("flex items-center p-6 pt-0",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/card.tsx",lineNumber:71,columnNumber:3},void 0));Lu.displayName="CardFooter";const bn=zt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),A=m.forwardRef(({className:s,variant:e,size:a,asChild:n=!1,...r},i)=>{const o=n?Uo:"button";return t.jsxDEV(o,{className:T(bn({variant:e,size:a,className:s})),ref:i,...r},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/button.tsx",lineNumber:52,columnNumber:7},void 0)});A.displayName="Button";function Iu(){return t.jsxDEV("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:t.jsxDEV(ee,{className:"w-full max-w-md mx-4 shadow-xl border-none",children:t.jsxDEV(me,{className:"pt-6 text-center space-y-6",children:[t.jsxDEV("div",{className:"flex justify-center mb-4",children:t.jsxDEV(So,{className:"h-16 w-16 text-red-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/not-found.tsx",lineNumber:12,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/not-found.tsx",lineNumber:11,columnNumber:11},this),t.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 font-display",children:"404 Page Not Found"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/not-found.tsx",lineNumber:14,columnNumber:11},this),t.jsxDEV("p",{className:"text-gray-500",children:"The route you are looking for doesn't exist. Maybe the bus has left without you?"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/not-found.tsx",lineNumber:15,columnNumber:11},this),t.jsxDEV("div",{className:"pt-4",children:t.jsxDEV(Ne,{href:"/",children:t.jsxDEV(A,{className:"btn-primary w-full",children:"Return Home"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/not-found.tsx",lineNumber:20,columnNumber:16},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/not-found.tsx",lineNumber:19,columnNumber:14},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/not-found.tsx",lineNumber:18,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/not-found.tsx",lineNumber:10,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/not-found.tsx",lineNumber:9,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/not-found.tsx",lineNumber:8,columnNumber:5},this)}const O=m.forwardRef(({className:s,type:e,...a},n)=>t.jsxDEV("input",{type:e,className:T("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...a},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/input.tsx",lineNumber:9,columnNumber:7},void 0));O.displayName="Input";const qu=zt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),L=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Cr,{ref:a,className:T(qu(),s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/label.tsx",lineNumber:16,columnNumber:3},void 0));L.displayName=Cr.displayName;const Ei=_o,gn=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Dr,{ref:a,className:T("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/tabs.tsx",lineNumber:12,columnNumber:3},void 0));gn.displayName=Dr.displayName;const Cs=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Ar,{ref:a,className:T("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/tabs.tsx",lineNumber:27,columnNumber:3},void 0));Cs.displayName=Ar.displayName;const Ds=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Er,{ref:a,className:T("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/tabs.tsx",lineNumber:42,columnNumber:3},void 0));Ds.displayName=Er.displayName;const xn=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(wr,{className:T("grid gap-2",s),...e,ref:a},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/radio-group.tsx",lineNumber:12,columnNumber:5},void 0));xn.displayName=wr.displayName;const jt=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(jr,{ref:a,className:T("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...e,children:t.jsxDEV(To,{className:"flex items-center justify-center",children:t.jsxDEV(Ro,{className:"h-2.5 w-2.5 fill-current text-current"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/radio-group.tsx",lineNumber:35,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/radio-group.tsx",lineNumber:34,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/radio-group.tsx",lineNumber:26,columnNumber:5},void 0));jt.displayName=jr.displayName;const Ou=zt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),wi=m.forwardRef(({className:s,variant:e,...a},n)=>t.jsxDEV("div",{ref:n,role:"alert",className:T(Ou({variant:e}),s),...a},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/alert.tsx",lineNumber:26,columnNumber:3},void 0));wi.displayName="Alert";const ji=m.forwardRef(({className:s,...e},a)=>t.jsxDEV("h5",{ref:a,className:T("mb-1 font-medium leading-none tracking-tight",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/alert.tsx",lineNumber:39,columnNumber:3},void 0));ji.displayName="AlertTitle";const Bi=m.forwardRef(({className:s,...e},a)=>t.jsxDEV("div",{ref:a,className:T("text-sm [&_p]:leading-relaxed",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/alert.tsx",lineNumber:51,columnNumber:3},void 0));Bi.displayName="AlertDescription";function Hn(){const[,s]=Na(),{login:e,register:a}=Ce(),{toast:n}=be(),[r,i]=m.useState(!1),[o,l]=m.useState(!1),[f,u]=m.useState(!1),[c,d]=m.useState(""),[b,g]=m.useState(!1),[D,h]=m.useState(""),[y,x]=m.useState({email:"",password:""}),[N,R]=m.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",role:"passenger",licenseNumber:"",make:"",model:"",year:"",plateNumber:"",color:"",capacity:""}),w=async k=>{k.preventDefault(),i(!0),u(!1);try{await e(y),n({title:"Welcome back!"}),s("/dashboard")}catch(G){G.message.includes("verify your email")?(u(!0),d(y.email)):n({title:"Login failed",description:G.message,variant:"destructive"})}finally{i(!1)}},S=async()=>{if(c){l(!0);try{const G=await(await fetch("/api/auth/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c})})).json();n({title:"Email sent!",description:G.message})}catch(k){n({title:"Failed to resend",description:k.message,variant:"destructive"})}finally{l(!1)}}},C=async k=>{if(k.preventDefault(),N.password!==N.confirmPassword){n({title:"Passwords match error",description:"Passwords do not match",variant:"destructive"});return}if(N.role==="driver"&&(!N.licenseNumber||!N.make||!N.model||!N.plateNumber||!N.capacity)){n({title:"Missing vehicle details",description:"All vehicle and driver details are required",variant:"destructive"});return}i(!0);try{(await a({firstName:N.firstName,lastName:N.lastName,email:N.email,phone:N.phone,password:N.password,role:N.role,driverDetails:N.role==="driver"?{licenseNumber:N.licenseNumber,vehicleParams:{make:N.make,model:N.model,year:N.year,plateNumber:N.plateNumber,color:N.color,capacity:parseInt(N.capacity)}}:void 0})).requiresVerification?(g(!0),h(N.email),n({title:"Check your email!",description:"We sent you a verification link"})):(n({title:"Welcome!",description:"Account created successfully"}),s("/dashboard"))}catch(G){n({title:"Registration failed",description:G.message,variant:"destructive"})}finally{i(!1)}},Z=async()=>{if(D){l(!0);try{const G=await(await fetch("/api/auth/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:D})})).json();n({title:"Email sent!",description:G.message})}catch(k){n({title:"Failed to resend",description:k.message,variant:"destructive"})}finally{l(!1)}}},H=k=>{R({...N,[k.target.name]:k.target.value})};return t.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 flex items-center justify-center p-4 py-8 transition-colors",children:t.jsxDEV(ee,{className:"w-full max-w-xl shadow-2xl rounded-2xl border-0 overflow-hidden bg-white dark:bg-slate-900 dark:shadow-slate-950/50",children:[t.jsxDEV("div",{className:"bg-blue-600 p-6 text-center text-white",children:[t.jsxDEV("div",{className:"mx-auto bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mb-4 backdrop-blur-sm",children:t.jsxDEV(ps,{className:"h-8 w-8 text-white"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:173,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:172,columnNumber:11},this),t.jsxDEV(Le,{className:"text-3xl font-bold font-display",children:"MakeWeGo"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:175,columnNumber:11},this),t.jsxDEV(Ze,{className:"text-blue-100 mt-2",children:"Your journey starts here"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:176,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:171,columnNumber:9},this),t.jsxDEV(me,{className:"p-8",children:t.jsxDEV(Ei,{defaultValue:"login",className:"w-full",children:[t.jsxDEV(gn,{className:"grid w-full grid-cols-2 mb-8 bg-slate-100 dark:bg-slate-800 p-1 rounded-xl h-14",children:[t.jsxDEV(Cs,{value:"login",className:"rounded-lg font-bold text-base data-[state=active]:bg-white dark:data-[state=active]:bg-slate-950 data-[state=active]:text-blue-600 data-[state=active]:shadow-sm transition-all h-full",children:"Login"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:184,columnNumber:15},this),t.jsxDEV(Cs,{value:"signup",className:"rounded-lg font-bold text-base data-[state=active]:bg-white dark:data-[state=active]:bg-slate-950 data-[state=active]:text-emerald-600 data-[state=active]:shadow-sm transition-all h-full",children:"Sign Up"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:185,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:183,columnNumber:13},this),t.jsxDEV(Ds,{value:"login",className:"space-y-6 mt-0",children:[f&&t.jsxDEV(wi,{className:"border-amber-200 bg-amber-50",children:[t.jsxDEV(vt,{className:"h-4 w-4 text-amber-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:191,columnNumber:19},this),t.jsxDEV(ji,{className:"text-amber-800",children:"Email verification required"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:192,columnNumber:19},this),t.jsxDEV(Bi,{className:"text-amber-700",children:[t.jsxDEV("p",{className:"mb-3",children:"Please verify your email address before logging in. Check your inbox for the verification link."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:194,columnNumber:21},this),t.jsxDEV(A,{variant:"outline",size:"sm",onClick:S,disabled:o,className:"border-amber-300 hover:bg-amber-100",children:[o&&t.jsxDEV(se,{className:"mr-2 h-3 w-3 animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:202,columnNumber:39},this),o?"Sending...":"Resend verification email"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:195,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:193,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:190,columnNumber:17},this),t.jsxDEV("form",{onSubmit:w,className:"space-y-6",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"login-email",children:"Email"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:211,columnNumber:19},this),t.jsxDEV(O,{id:"login-email",type:"email",placeholder:"Enter your email",value:y.email,onChange:k=>x({...y,email:k.target.value}),required:!0,className:"h-12 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:212,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:210,columnNumber:17},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"login-password",children:"Password"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:223,columnNumber:19},this),t.jsxDEV(O,{id:"login-password",type:"password",placeholder:"Enter your password",value:y.password,onChange:k=>x({...y,password:k.target.value}),required:!0,className:"h-12 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:224,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:222,columnNumber:17},this),t.jsxDEV(A,{type:"submit",className:"w-full h-12 text-lg font-bold bg-blue-600 hover:bg-blue-700 shadow-lg shadow-blue-100",disabled:r,children:[r?t.jsxDEV(se,{className:"mr-2 h-5 w-5 animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:235,columnNumber:32},this):null,r?"Logging in...":"Login"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:234,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:209,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:188,columnNumber:13},this),t.jsxDEV(Ds,{value:"signup",className:"space-y-6 mt-0 max-h-[60vh] overflow-y-auto px-1",children:b?t.jsxDEV("div",{className:"text-center py-8",children:[t.jsxDEV("div",{className:"mx-auto bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:t.jsxDEV(vt,{className:"h-8 w-8 text-green-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:245,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:244,columnNumber:19},this),t.jsxDEV("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 mb-2",children:"Check your email!"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:247,columnNumber:19},this),t.jsxDEV("p",{className:"text-slate-600 dark:text-slate-300 mb-2",children:"We sent a verification link to:"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:248,columnNumber:19},this),t.jsxDEV("p",{className:"font-semibold text-blue-600 mb-4",children:D},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:249,columnNumber:19},this),t.jsxDEV("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"Click the link in your email to verify your account. The link expires in 24 hours."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:250,columnNumber:19},this),t.jsxDEV("div",{className:"space-y-3",children:[t.jsxDEV(A,{variant:"outline",onClick:Z,disabled:o,className:"w-full",children:[o&&t.jsxDEV(se,{className:"mr-2 h-4 w-4 animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:260,columnNumber:39},this),o?"Sending...":"Resend verification email"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:254,columnNumber:21},this),t.jsxDEV("button",{type:"button",onClick:()=>g(!1),className:"text-sm text-blue-600 font-medium hover:underline",children:"Use a different email"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:263,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:253,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:243,columnNumber:17},this):t.jsxDEV("form",{onSubmit:C,className:"space-y-6",children:[t.jsxDEV("div",{className:"space-y-3",children:[t.jsxDEV(L,{className:"text-base font-semibold text-slate-700 dark:text-slate-200",children:"I am a:"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:276,columnNumber:21},this),t.jsxDEV(xn,{value:N.role,onValueChange:k=>R({...N,role:k}),className:"grid grid-cols-2 gap-4",children:[t.jsxDEV("div",{children:[t.jsxDEV(jt,{value:"passenger",id:"passenger",className:"peer sr-only"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:279,columnNumber:25},this),t.jsxDEV(L,{htmlFor:"passenger",className:"flex flex-col items-center justify-center rounded-xl border-2 border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-slate-200 dark:hover:border-slate-600 peer-data-[state=checked]:border-blue-600 peer-data-[state=checked]:bg-blue-50 dark:peer-data-[state=checked]:bg-blue-900/30 cursor-pointer transition-all",children:[t.jsxDEV(ws,{className:"mb-2 h-6 w-6 text-slate-600 dark:text-slate-300 peer-data-[state=checked]:text-blue-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:284,columnNumber:27},this),t.jsxDEV("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Passenger"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:285,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:280,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:278,columnNumber:23},this),t.jsxDEV("div",{children:[t.jsxDEV(jt,{value:"driver",id:"driver",className:"peer sr-only"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:290,columnNumber:25},this),t.jsxDEV(L,{htmlFor:"driver",className:"flex flex-col items-center justify-center rounded-xl border-2 border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-slate-200 dark:hover:border-slate-600 peer-data-[state=checked]:border-emerald-600 peer-data-[state=checked]:bg-emerald-50 dark:peer-data-[state=checked]:bg-emerald-900/30 cursor-pointer transition-all",children:[t.jsxDEV(ze,{className:"mb-2 h-6 w-6 text-slate-600 dark:text-slate-300 peer-data-[state=checked]:text-emerald-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:295,columnNumber:27},this),t.jsxDEV("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Driver"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:296,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:291,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:289,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:277,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:275,columnNumber:19},this),t.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"firstName",children:"First Name"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:305,columnNumber:23},this),t.jsxDEV(O,{id:"firstName",name:"firstName",placeholder:"John",value:N.firstName,onChange:H,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:306,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:304,columnNumber:21},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"lastName",children:"Last Name"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:309,columnNumber:23},this),t.jsxDEV(O,{id:"lastName",name:"lastName",placeholder:"Doe",value:N.lastName,onChange:H,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:310,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:308,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:303,columnNumber:19},this),t.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"signup-email",children:"Email Address"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:316,columnNumber:23},this),t.jsxDEV(O,{id:"signup-email",name:"email",type:"email",placeholder:"john@example.com",value:N.email,onChange:H,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:317,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:315,columnNumber:21},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"phone",children:"Phone Number"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:320,columnNumber:23},this),t.jsxDEV(O,{id:"phone",name:"phone",type:"tel",placeholder:"0241234567",value:N.phone,onChange:H,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:321,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:319,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:314,columnNumber:19},this),t.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"signup-password",children:"Password"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:327,columnNumber:23},this),t.jsxDEV(O,{id:"signup-password",name:"password",type:"password",value:N.password,onChange:H,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:328,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:326,columnNumber:21},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"confirmPassword",children:"Confirm Password"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:331,columnNumber:23},this),t.jsxDEV(O,{id:"confirmPassword",name:"confirmPassword",type:"password",value:N.confirmPassword,onChange:H,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:332,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:330,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:325,columnNumber:19},this),N.role==="driver"&&t.jsxDEV("div",{className:"space-y-6 pt-4 border-t border-slate-100 dark:border-slate-700 animate-in slide-in-from-top-4 fade-in duration-300",children:[t.jsxDEV("div",{className:"flex items-center gap-2",children:[t.jsxDEV(ze,{className:"text-emerald-600 h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:340,columnNumber:25},this),t.jsxDEV("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:"Vehicle & Driver Details"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:341,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:339,columnNumber:23},this),t.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"licenseNumber",children:"Driver License ID"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:346,columnNumber:27},this),t.jsxDEV(O,{id:"licenseNumber",name:"licenseNumber",placeholder:"DL-12345678",value:N.licenseNumber,onChange:H,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:347,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:345,columnNumber:25},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"plateNumber",children:"Plate Number"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:350,columnNumber:27},this),t.jsxDEV(O,{id:"plateNumber",name:"plateNumber",placeholder:"GT-123-24",value:N.plateNumber,onChange:H,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:351,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:349,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:344,columnNumber:23},this),t.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"make",children:"Car Make"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:357,columnNumber:27},this),t.jsxDEV(O,{id:"make",name:"make",placeholder:"Toyota",value:N.make,onChange:H,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:358,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:356,columnNumber:25},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"model",children:"Car Model"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:361,columnNumber:27},this),t.jsxDEV(O,{id:"model",name:"model",placeholder:"HiAce",value:N.model,onChange:H,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:362,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:360,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:355,columnNumber:23},this),t.jsxDEV("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"year",children:"Year"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:368,columnNumber:27},this),t.jsxDEV(O,{id:"year",name:"year",placeholder:"2020",value:N.year,onChange:H,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:369,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:367,columnNumber:25},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"color",children:"Color"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:372,columnNumber:27},this),t.jsxDEV(O,{id:"color",name:"color",placeholder:"White",value:N.color,onChange:H,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:373,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:371,columnNumber:25},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"capacity",children:"Capacity"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:376,columnNumber:27},this),t.jsxDEV(O,{id:"capacity",name:"capacity",type:"number",placeholder:"15",value:N.capacity,onChange:H,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:377,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:375,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:366,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:338,columnNumber:21},this),t.jsxDEV(A,{type:"submit",className:`w-full h-12 text-lg font-bold shadow-lg transition-all ${N.role==="driver"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-100":"bg-blue-600 hover:bg-blue-700 shadow-blue-100"}`,disabled:r,children:[r?t.jsxDEV(se,{className:"mr-2 h-5 w-5 animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:384,columnNumber:34},this):null,r?"Creating Account...":`Sign Up as ${N.role==="passenger"?"Passenger":"Driver"}`]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:383,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:273,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:241,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:182,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:181,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:170,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Login.tsx",lineNumber:169,columnNumber:5},this)}var Y;(function(s){s.assertEqual=r=>{};function e(r){}s.assertIs=e;function a(r){throw new Error}s.assertNever=a,s.arrayToEnum=r=>{const i={};for(const o of r)i[o]=o;return i},s.getValidEnumValues=r=>{const i=s.objectKeys(r).filter(l=>typeof r[r[l]]!="number"),o={};for(const l of i)o[l]=r[l];return s.objectValues(o)},s.objectValues=r=>s.objectKeys(r).map(function(i){return r[i]}),s.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const i=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&i.push(o);return i},s.find=(r,i)=>{for(const o of r)if(i(o))return o},s.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function n(r,i=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}s.joinValues=n,s.jsonStringifyReplacer=(r,i)=>typeof i=="bigint"?i.toString():i})(Y||(Y={}));var Qa;(function(s){s.mergeShapes=(e,a)=>({...e,...a})})(Qa||(Qa={}));const V=Y.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ms=s=>{switch(typeof s){case"undefined":return V.undefined;case"string":return V.string;case"number":return Number.isNaN(s)?V.nan:V.number;case"boolean":return V.boolean;case"function":return V.function;case"bigint":return V.bigint;case"symbol":return V.symbol;case"object":return Array.isArray(s)?V.array:s===null?V.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?V.promise:typeof Map<"u"&&s instanceof Map?V.map:typeof Set<"u"&&s instanceof Set?V.set:typeof Date<"u"&&s instanceof Date?V.date:V.object;default:return V.unknown}},v=Y.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Fu=s=>JSON.stringify(s,null,2).replace(/"([^"]+)":/g,"$1:");class qe extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}format(e){const a=e||function(i){return i.message},n={_errors:[]},r=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)n._errors.push(a(o));else{let l=n,f=0;for(;f<o.path.length;){const u=o.path[f];f===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(a(o))):l[u]=l[u]||{_errors:[]},l=l[u],f++}}};return r(this),n}static assert(e){if(!(e instanceof qe))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Y.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=a=>a.message){const a={},n=[];for(const r of this.issues)if(r.path.length>0){const i=r.path[0];a[i]=a[i]||[],a[i].push(e(r))}else n.push(e(r));return{formErrors:n,fieldErrors:a}}get formErrors(){return this.flatten()}}qe.create=s=>new qe(s);const ut=(s,e)=>{let a;switch(s.code){case v.invalid_type:s.received===V.undefined?a="Required":a=`Expected ${s.expected}, received ${s.received}`;break;case v.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(s.expected,Y.jsonStringifyReplacer)}`;break;case v.unrecognized_keys:a=`Unrecognized key(s) in object: ${Y.joinValues(s.keys,", ")}`;break;case v.invalid_union:a="Invalid input";break;case v.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${Y.joinValues(s.options)}`;break;case v.invalid_enum_value:a=`Invalid enum value. Expected ${Y.joinValues(s.options)}, received '${s.received}'`;break;case v.invalid_arguments:a="Invalid function arguments";break;case v.invalid_return_type:a="Invalid function return type";break;case v.invalid_date:a="Invalid date";break;case v.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(a=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?a=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?a=`Invalid input: must end with "${s.validation.endsWith}"`:Y.assertNever(s.validation):s.validation!=="regex"?a=`Invalid ${s.validation}`:a="Invalid";break;case v.too_small:s.type==="array"?a=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?a=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?a=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="bigint"?a=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?a=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:a="Invalid input";break;case v.too_big:s.type==="array"?a=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?a=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?a=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?a=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?a=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:a="Invalid input";break;case v.custom:a="Invalid input";break;case v.invalid_intersection_types:a="Intersection results could not be merged";break;case v.not_multiple_of:a=`Number must be a multiple of ${s.multipleOf}`;break;case v.not_finite:a="Number must be finite";break;default:a=e.defaultError,Y.assertNever(s)}return{message:a}};let Vi=ut;function $u(s){Vi=s}function ia(){return Vi}const oa=s=>{const{data:e,path:a,errorMaps:n,issueData:r}=s,i=[...a,...r.path||[]],o={...r,path:i};if(r.message!==void 0)return{...r,path:i,message:r.message};let l="";const f=n.filter(u=>!!u).slice().reverse();for(const u of f)l=u(o,{data:e,defaultError:l}).message;return{...r,path:i,message:l}},zu=[];function B(s,e){const a=ia(),n=oa({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,a,a===ut?void 0:ut].filter(r=>!!r)});s.common.issues.push(n)}class ve{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,a){const n=[];for(const r of a){if(r.status==="aborted")return I;r.status==="dirty"&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,a){const n=[];for(const r of a){const i=await r.key,o=await r.value;n.push({key:i,value:o})}return ve.mergeObjectSync(e,n)}static mergeObjectSync(e,a){const n={};for(const r of a){const{key:i,value:o}=r;if(i.status==="aborted"||o.status==="aborted")return I;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const I=Object.freeze({status:"aborted"}),et=s=>({status:"dirty",value:s}),Be=s=>({status:"valid",value:s}),Ga=s=>s.status==="aborted",Ka=s=>s.status==="dirty",zs=s=>s.status==="valid",Bt=s=>typeof Promise<"u"&&s instanceof Promise;var _;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e?.message})(_||(_={}));class os{constructor(e,a,n,r){this._cachedPath=[],this.parent=e,this.data=a,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Xn=(s,e)=>{if(zs(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new qe(s.common.issues);return this._error=a,this._error}}};function z(s){if(!s)return{};const{errorMap:e,invalid_type_error:a,required_error:n,description:r}=s;if(e&&(a||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,l)=>{const{message:f}=s;return o.code==="invalid_enum_value"?{message:f??l.defaultError}:typeof l.data>"u"?{message:f??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:f??a??l.defaultError}},description:r}}class Q{get description(){return this._def.description}_getType(e){return ms(e.data)}_getOrReturnCtx(e,a){return a||{common:e.parent.common,data:e.data,parsedType:ms(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ve,ctx:{common:e.parent.common,data:e.data,parsedType:ms(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const a=this._parse(e);if(Bt(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(e){const a=this._parse(e);return Promise.resolve(a)}parse(e,a){const n=this.safeParse(e,a);if(n.success)return n.data;throw n.error}safeParse(e,a){const n={common:{issues:[],async:a?.async??!1,contextualErrorMap:a?.errorMap},path:a?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ms(e)},r=this._parseSync({data:e,path:n.path,parent:n});return Xn(n,r)}"~validate"(e){const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ms(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:a});return zs(n)?{value:n.value}:{issues:a.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(n=>zs(n)?{value:n.value}:{issues:a.common.issues})}async parseAsync(e,a){const n=await this.safeParseAsync(e,a);if(n.success)return n.data;throw n.error}async safeParseAsync(e,a){const n={common:{issues:[],contextualErrorMap:a?.errorMap,async:!0},path:a?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ms(e)},r=this._parse({data:e,path:n.path,parent:n}),i=await(Bt(r)?r:Promise.resolve(r));return Xn(n,i)}refine(e,a){const n=r=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(r):a;return this._refinement((r,i)=>{const o=e(r),l=()=>i.addIssue({code:v.custom,...n(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(f=>f?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,a){return this._refinement((n,r)=>e(n)?!0:(r.addIssue(typeof a=="function"?a(n,r):a),!1))}_refinement(e){return new Je({schema:this,typeName:q.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return rs.create(this,this._def)}nullable(){return Rs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Xe.create(this)}promise(){return mt.create(this,this._def)}or(e){return _t.create([this,e],this._def)}and(e){return Tt.create(this,e,this._def)}transform(e){return new Je({...z(this._def),schema:this,typeName:q.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const a=typeof e=="function"?e:()=>e;return new It({...z(this._def),innerType:this,defaultValue:a,typeName:q.ZodDefault})}brand(){return new yn({typeName:q.ZodBranded,type:this,...z(this._def)})}catch(e){const a=typeof e=="function"?e:()=>e;return new qt({...z(this._def),innerType:this,catchValue:a,typeName:q.ZodCatch})}describe(e){const a=this.constructor;return new a({...this._def,description:e})}pipe(e){return Qt.create(this,e)}readonly(){return Ot.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Wu=/^c[^\s-]{8,}$/i,Qu=/^[0-9a-z]+$/,Gu=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ku=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Yu=/^[a-z0-9_-]{21}$/i,Zu=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Hu=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Xu=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ju="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Sa;const ed=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,sd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,td=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ad=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,nd=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,rd=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ui="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",id=new RegExp(`^${Ui}$`);function Si(s){let e="[0-5]\\d";s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`);const a=s.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${a}`}function od(s){return new RegExp(`^${Si(s)}$`)}function _i(s){let e=`${Ui}T${Si(s)}`;const a=[];return a.push(s.local?"Z?":"Z"),s.offset&&a.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${a.join("|")})`,new RegExp(`^${e}$`)}function ld(s,e){return!!((e==="v4"||!e)&&ed.test(s)||(e==="v6"||!e)&&td.test(s))}function cd(s,e){if(!Zu.test(s))return!1;try{const[a]=s.split(".");if(!a)return!1;const n=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),r=JSON.parse(atob(n));return!(typeof r!="object"||r===null||"typ"in r&&r?.typ!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function ud(s,e){return!!((e==="v4"||!e)&&sd.test(s)||(e==="v6"||!e)&&ad.test(s))}class He extends Q{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==V.string){const i=this._getOrReturnCtx(e);return B(i,{code:v.invalid_type,expected:V.string,received:i.parsedType}),I}const n=new ve;let r;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(r=this._getOrReturnCtx(e,r),B(r,{code:v.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(r=this._getOrReturnCtx(e,r),B(r,{code:v.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(r=this._getOrReturnCtx(e,r),o?B(r,{code:v.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&B(r,{code:v.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Xu.test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"email",code:v.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Sa||(Sa=new RegExp(Ju,"u")),Sa.test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"emoji",code:v.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Ku.test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"uuid",code:v.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")Yu.test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"nanoid",code:v.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")Wu.test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"cuid",code:v.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Qu.test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"cuid2",code:v.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")Gu.test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"ulid",code:v.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),B(r,{validation:"url",code:v.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"regex",code:v.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(r=this._getOrReturnCtx(e,r),B(r,{code:v.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(r=this._getOrReturnCtx(e,r),B(r,{code:v.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(r=this._getOrReturnCtx(e,r),B(r,{code:v.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?_i(i).test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{code:v.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?id.test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{code:v.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?od(i).test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{code:v.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?Hu.test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"duration",code:v.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?ld(e.data,i.version)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"ip",code:v.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?cd(e.data,i.alg)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"jwt",code:v.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?ud(e.data,i.version)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"cidr",code:v.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?nd.test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"base64",code:v.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?rd.test(e.data)||(r=this._getOrReturnCtx(e,r),B(r,{validation:"base64url",code:v.invalid_string,message:i.message}),n.dirty()):Y.assertNever(i);return{status:n.value,value:e.data}}_regex(e,a,n){return this.refinement(r=>e.test(r),{validation:a,code:v.invalid_string,..._.errToObj(n)})}_addCheck(e){return new He({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",..._.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",..._.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",..._.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,..._.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,..._.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",..._.errToObj(e)})}regex(e,a){return this._addCheck({kind:"regex",regex:e,..._.errToObj(a)})}includes(e,a){return this._addCheck({kind:"includes",value:e,position:a?.position,..._.errToObj(a?.message)})}startsWith(e,a){return this._addCheck({kind:"startsWith",value:e,..._.errToObj(a)})}endsWith(e,a){return this._addCheck({kind:"endsWith",value:e,..._.errToObj(a)})}min(e,a){return this._addCheck({kind:"min",value:e,..._.errToObj(a)})}max(e,a){return this._addCheck({kind:"max",value:e,..._.errToObj(a)})}length(e,a){return this._addCheck({kind:"length",value:e,..._.errToObj(a)})}nonempty(e){return this.min(1,_.errToObj(e))}trim(){return new He({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new He({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new He({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxLength(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}}He.create=s=>new He({checks:[],typeName:q.ZodString,coerce:s?.coerce??!1,...z(s)});function dd(s,e){const a=(s.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,r=a>n?a:n,i=Number.parseInt(s.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return i%o/10**r}class Ss extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==V.number){const i=this._getOrReturnCtx(e);return B(i,{code:v.invalid_type,expected:V.number,received:i.parsedType}),I}let n;const r=new ve;for(const i of this._def.checks)i.kind==="int"?Y.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),B(n,{code:v.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),B(n,{code:v.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),B(n,{code:v.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="multipleOf"?dd(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),B(n,{code:v.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),B(n,{code:v.not_finite,message:i.message}),r.dirty()):Y.assertNever(i);return{status:r.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,_.toString(a))}gt(e,a){return this.setLimit("min",e,!1,_.toString(a))}lte(e,a){return this.setLimit("max",e,!0,_.toString(a))}lt(e,a){return this.setLimit("max",e,!1,_.toString(a))}setLimit(e,a,n,r){return new Ss({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:n,message:_.toString(r)}]})}_addCheck(e){return new Ss({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(a)})}finite(e){return this._addCheck({kind:"finite",message:_.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_.toString(e)})}get minValue(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Y.isInteger(e.value))}get isFinite(){let e=null,a=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(a===null||n.value>a)&&(a=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(a)&&Number.isFinite(e)}}Ss.create=s=>new Ss({checks:[],typeName:q.ZodNumber,coerce:s?.coerce||!1,...z(s)});class _s extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==V.bigint)return this._getInvalidInput(e);let n;const r=new ve;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),B(n,{code:v.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),B(n,{code:v.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),B(n,{code:v.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):Y.assertNever(i);return{status:r.value,value:e.data}}_getInvalidInput(e){const a=this._getOrReturnCtx(e);return B(a,{code:v.invalid_type,expected:V.bigint,received:a.parsedType}),I}gte(e,a){return this.setLimit("min",e,!0,_.toString(a))}gt(e,a){return this.setLimit("min",e,!1,_.toString(a))}lte(e,a){return this.setLimit("max",e,!0,_.toString(a))}lt(e,a){return this.setLimit("max",e,!1,_.toString(a))}setLimit(e,a,n,r){return new _s({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:n,message:_.toString(r)}]})}_addCheck(e){return new _s({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(a)})}get minValue(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}}_s.create=s=>new _s({checks:[],typeName:q.ZodBigInt,coerce:s?.coerce??!1,...z(s)});class Vt extends Q{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==V.boolean){const n=this._getOrReturnCtx(e);return B(n,{code:v.invalid_type,expected:V.boolean,received:n.parsedType}),I}return Be(e.data)}}Vt.create=s=>new Vt({typeName:q.ZodBoolean,coerce:s?.coerce||!1,...z(s)});class Ws extends Q{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==V.date){const i=this._getOrReturnCtx(e);return B(i,{code:v.invalid_type,expected:V.date,received:i.parsedType}),I}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return B(i,{code:v.invalid_date}),I}const n=new ve;let r;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(r=this._getOrReturnCtx(e,r),B(r,{code:v.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(r=this._getOrReturnCtx(e,r),B(r,{code:v.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Y.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ws({...this._def,checks:[...this._def.checks,e]})}min(e,a){return this._addCheck({kind:"min",value:e.getTime(),message:_.toString(a)})}max(e,a){return this._addCheck({kind:"max",value:e.getTime(),message:_.toString(a)})}get minDate(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e!=null?new Date(e):null}}Ws.create=s=>new Ws({checks:[],coerce:s?.coerce||!1,typeName:q.ZodDate,...z(s)});class la extends Q{_parse(e){if(this._getType(e)!==V.symbol){const n=this._getOrReturnCtx(e);return B(n,{code:v.invalid_type,expected:V.symbol,received:n.parsedType}),I}return Be(e.data)}}la.create=s=>new la({typeName:q.ZodSymbol,...z(s)});class Ut extends Q{_parse(e){if(this._getType(e)!==V.undefined){const n=this._getOrReturnCtx(e);return B(n,{code:v.invalid_type,expected:V.undefined,received:n.parsedType}),I}return Be(e.data)}}Ut.create=s=>new Ut({typeName:q.ZodUndefined,...z(s)});class St extends Q{_parse(e){if(this._getType(e)!==V.null){const n=this._getOrReturnCtx(e);return B(n,{code:v.invalid_type,expected:V.null,received:n.parsedType}),I}return Be(e.data)}}St.create=s=>new St({typeName:q.ZodNull,...z(s)});class dt extends Q{constructor(){super(...arguments),this._any=!0}_parse(e){return Be(e.data)}}dt.create=s=>new dt({typeName:q.ZodAny,...z(s)});class qs extends Q{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Be(e.data)}}qs.create=s=>new qs({typeName:q.ZodUnknown,...z(s)});class bs extends Q{_parse(e){const a=this._getOrReturnCtx(e);return B(a,{code:v.invalid_type,expected:V.never,received:a.parsedType}),I}}bs.create=s=>new bs({typeName:q.ZodNever,...z(s)});class ca extends Q{_parse(e){if(this._getType(e)!==V.undefined){const n=this._getOrReturnCtx(e);return B(n,{code:v.invalid_type,expected:V.void,received:n.parsedType}),I}return Be(e.data)}}ca.create=s=>new ca({typeName:q.ZodVoid,...z(s)});class Xe extends Q{_parse(e){const{ctx:a,status:n}=this._processInputParams(e),r=this._def;if(a.parsedType!==V.array)return B(a,{code:v.invalid_type,expected:V.array,received:a.parsedType}),I;if(r.exactLength!==null){const o=a.data.length>r.exactLength.value,l=a.data.length<r.exactLength.value;(o||l)&&(B(a,{code:o?v.too_big:v.too_small,minimum:l?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(r.minLength!==null&&a.data.length<r.minLength.value&&(B(a,{code:v.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),r.maxLength!==null&&a.data.length>r.maxLength.value&&(B(a,{code:v.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),a.common.async)return Promise.all([...a.data].map((o,l)=>r.type._parseAsync(new os(a,o,a.path,l)))).then(o=>ve.mergeArray(n,o));const i=[...a.data].map((o,l)=>r.type._parseSync(new os(a,o,a.path,l)));return ve.mergeArray(n,i)}get element(){return this._def.type}min(e,a){return new Xe({...this._def,minLength:{value:e,message:_.toString(a)}})}max(e,a){return new Xe({...this._def,maxLength:{value:e,message:_.toString(a)}})}length(e,a){return new Xe({...this._def,exactLength:{value:e,message:_.toString(a)}})}nonempty(e){return this.min(1,e)}}Xe.create=(s,e)=>new Xe({type:s,minLength:null,maxLength:null,exactLength:null,typeName:q.ZodArray,...z(e)});function Hs(s){if(s instanceof le){const e={};for(const a in s.shape){const n=s.shape[a];e[a]=rs.create(Hs(n))}return new le({...s._def,shape:()=>e})}else return s instanceof Xe?new Xe({...s._def,type:Hs(s.element)}):s instanceof rs?rs.create(Hs(s.unwrap())):s instanceof Rs?Rs.create(Hs(s.unwrap())):s instanceof ls?ls.create(s.items.map(e=>Hs(e))):s}class le extends Q{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),a=Y.objectKeys(e);return this._cached={shape:e,keys:a},this._cached}_parse(e){if(this._getType(e)!==V.object){const u=this._getOrReturnCtx(e);return B(u,{code:v.invalid_type,expected:V.object,received:u.parsedType}),I}const{status:n,ctx:r}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof bs&&this._def.unknownKeys==="strip"))for(const u in r.data)o.includes(u)||l.push(u);const f=[];for(const u of o){const c=i[u],d=r.data[u];f.push({key:{status:"valid",value:u},value:c._parse(new os(r,d,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof bs){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of l)f.push({key:{status:"valid",value:c},value:{status:"valid",value:r.data[c]}});else if(u==="strict")l.length>0&&(B(r,{code:v.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of l){const d=r.data[c];f.push({key:{status:"valid",value:c},value:u._parse(new os(r,d,r.path,c)),alwaysSet:c in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of f){const d=await c.key,b=await c.value;u.push({key:d,value:b,alwaysSet:c.alwaysSet})}return u}).then(u=>ve.mergeObjectSync(n,u)):ve.mergeObjectSync(n,f)}get shape(){return this._def.shape()}strict(e){return _.errToObj,new le({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(a,n)=>{const r=this._def.errorMap?.(a,n).message??n.defaultError;return a.code==="unrecognized_keys"?{message:_.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new le({...this._def,unknownKeys:"strip"})}passthrough(){return new le({...this._def,unknownKeys:"passthrough"})}extend(e){return new le({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new le({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:q.ZodObject})}setKey(e,a){return this.augment({[e]:a})}catchall(e){return new le({...this._def,catchall:e})}pick(e){const a={};for(const n of Y.objectKeys(e))e[n]&&this.shape[n]&&(a[n]=this.shape[n]);return new le({...this._def,shape:()=>a})}omit(e){const a={};for(const n of Y.objectKeys(this.shape))e[n]||(a[n]=this.shape[n]);return new le({...this._def,shape:()=>a})}deepPartial(){return Hs(this)}partial(e){const a={};for(const n of Y.objectKeys(this.shape)){const r=this.shape[n];e&&!e[n]?a[n]=r:a[n]=r.optional()}return new le({...this._def,shape:()=>a})}required(e){const a={};for(const n of Y.objectKeys(this.shape))if(e&&!e[n])a[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof rs;)i=i._def.innerType;a[n]=i}return new le({...this._def,shape:()=>a})}keyof(){return Ti(Y.objectKeys(this.shape))}}le.create=(s,e)=>new le({shape:()=>s,unknownKeys:"strip",catchall:bs.create(),typeName:q.ZodObject,...z(e)});le.strictCreate=(s,e)=>new le({shape:()=>s,unknownKeys:"strict",catchall:bs.create(),typeName:q.ZodObject,...z(e)});le.lazycreate=(s,e)=>new le({shape:s,unknownKeys:"strip",catchall:bs.create(),typeName:q.ZodObject,...z(e)});class _t extends Q{_parse(e){const{ctx:a}=this._processInputParams(e),n=this._def.options;function r(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return a.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new qe(l.ctx.common.issues));return B(a,{code:v.invalid_union,unionErrors:o}),I}if(a.common.async)return Promise.all(n.map(async i=>{const o={...a,common:{...a.common,issues:[]},parent:null};return{result:await i._parseAsync({data:a.data,path:a.path,parent:o}),ctx:o}})).then(r);{let i;const o=[];for(const f of n){const u={...a,common:{...a.common,issues:[]},parent:null},c=f._parseSync({data:a.data,path:a.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!i&&(i={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return a.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(f=>new qe(f));return B(a,{code:v.invalid_union,unionErrors:l}),I}}get options(){return this._def.options}}_t.create=(s,e)=>new _t({options:s,typeName:q.ZodUnion,...z(e)});const ds=s=>s instanceof Mt?ds(s.schema):s instanceof Je?ds(s.innerType()):s instanceof Pt?[s.value]:s instanceof Ts?s.options:s instanceof Lt?Y.objectValues(s.enum):s instanceof It?ds(s._def.innerType):s instanceof Ut?[void 0]:s instanceof St?[null]:s instanceof rs?[void 0,...ds(s.unwrap())]:s instanceof Rs?[null,...ds(s.unwrap())]:s instanceof yn||s instanceof Ot?ds(s.unwrap()):s instanceof qt?ds(s._def.innerType):[];class xa extends Q{_parse(e){const{ctx:a}=this._processInputParams(e);if(a.parsedType!==V.object)return B(a,{code:v.invalid_type,expected:V.object,received:a.parsedType}),I;const n=this.discriminator,r=a.data[n],i=this.optionsMap.get(r);return i?a.common.async?i._parseAsync({data:a.data,path:a.path,parent:a}):i._parseSync({data:a.data,path:a.path,parent:a}):(B(a,{code:v.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),I)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,a,n){const r=new Map;for(const i of a){const o=ds(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(r.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);r.set(l,i)}}return new xa({typeName:q.ZodDiscriminatedUnion,discriminator:e,options:a,optionsMap:r,...z(n)})}}function Ya(s,e){const a=ms(s),n=ms(e);if(s===e)return{valid:!0,data:s};if(a===V.object&&n===V.object){const r=Y.objectKeys(e),i=Y.objectKeys(s).filter(l=>r.indexOf(l)!==-1),o={...s,...e};for(const l of i){const f=Ya(s[l],e[l]);if(!f.valid)return{valid:!1};o[l]=f.data}return{valid:!0,data:o}}else if(a===V.array&&n===V.array){if(s.length!==e.length)return{valid:!1};const r=[];for(let i=0;i<s.length;i++){const o=s[i],l=e[i],f=Ya(o,l);if(!f.valid)return{valid:!1};r.push(f.data)}return{valid:!0,data:r}}else return a===V.date&&n===V.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class Tt extends Q{_parse(e){const{status:a,ctx:n}=this._processInputParams(e),r=(i,o)=>{if(Ga(i)||Ga(o))return I;const l=Ya(i.value,o.value);return l.valid?((Ka(i)||Ka(o))&&a.dirty(),{status:a.value,value:l.data}):(B(n,{code:v.invalid_intersection_types}),I)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>r(i,o)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Tt.create=(s,e,a)=>new Tt({left:s,right:e,typeName:q.ZodIntersection,...z(a)});class ls extends Q{_parse(e){const{status:a,ctx:n}=this._processInputParams(e);if(n.parsedType!==V.array)return B(n,{code:v.invalid_type,expected:V.array,received:n.parsedType}),I;if(n.data.length<this._def.items.length)return B(n,{code:v.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),I;!this._def.rest&&n.data.length>this._def.items.length&&(B(n,{code:v.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());const i=[...n.data].map((o,l)=>{const f=this._def.items[l]||this._def.rest;return f?f._parse(new os(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>ve.mergeArray(a,o)):ve.mergeArray(a,i)}get items(){return this._def.items}rest(e){return new ls({...this._def,rest:e})}}ls.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ls({items:s,typeName:q.ZodTuple,rest:null,...z(e)})};class Rt extends Q{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:a,ctx:n}=this._processInputParams(e);if(n.parsedType!==V.object)return B(n,{code:v.invalid_type,expected:V.object,received:n.parsedType}),I;const r=[],i=this._def.keyType,o=this._def.valueType;for(const l in n.data)r.push({key:i._parse(new os(n,l,n.path,l)),value:o._parse(new os(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?ve.mergeObjectAsync(a,r):ve.mergeObjectSync(a,r)}get element(){return this._def.valueType}static create(e,a,n){return a instanceof Q?new Rt({keyType:e,valueType:a,typeName:q.ZodRecord,...z(n)}):new Rt({keyType:He.create(),valueType:e,typeName:q.ZodRecord,...z(a)})}}class ua extends Q{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:a,ctx:n}=this._processInputParams(e);if(n.parsedType!==V.map)return B(n,{code:v.invalid_type,expected:V.map,received:n.parsedType}),I;const r=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,f],u)=>({key:r._parse(new os(n,l,n.path,[u,"key"])),value:i._parse(new os(n,f,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const f of o){const u=await f.key,c=await f.value;if(u.status==="aborted"||c.status==="aborted")return I;(u.status==="dirty"||c.status==="dirty")&&a.dirty(),l.set(u.value,c.value)}return{status:a.value,value:l}})}else{const l=new Map;for(const f of o){const u=f.key,c=f.value;if(u.status==="aborted"||c.status==="aborted")return I;(u.status==="dirty"||c.status==="dirty")&&a.dirty(),l.set(u.value,c.value)}return{status:a.value,value:l}}}}ua.create=(s,e,a)=>new ua({valueType:e,keyType:s,typeName:q.ZodMap,...z(a)});class Qs extends Q{_parse(e){const{status:a,ctx:n}=this._processInputParams(e);if(n.parsedType!==V.set)return B(n,{code:v.invalid_type,expected:V.set,received:n.parsedType}),I;const r=this._def;r.minSize!==null&&n.data.size<r.minSize.value&&(B(n,{code:v.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),a.dirty()),r.maxSize!==null&&n.data.size>r.maxSize.value&&(B(n,{code:v.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),a.dirty());const i=this._def.valueType;function o(f){const u=new Set;for(const c of f){if(c.status==="aborted")return I;c.status==="dirty"&&a.dirty(),u.add(c.value)}return{status:a.value,value:u}}const l=[...n.data.values()].map((f,u)=>i._parse(new os(n,f,n.path,u)));return n.common.async?Promise.all(l).then(f=>o(f)):o(l)}min(e,a){return new Qs({...this._def,minSize:{value:e,message:_.toString(a)}})}max(e,a){return new Qs({...this._def,maxSize:{value:e,message:_.toString(a)}})}size(e,a){return this.min(e,a).max(e,a)}nonempty(e){return this.min(1,e)}}Qs.create=(s,e)=>new Qs({valueType:s,minSize:null,maxSize:null,typeName:q.ZodSet,...z(e)});class rt extends Q{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:a}=this._processInputParams(e);if(a.parsedType!==V.function)return B(a,{code:v.invalid_type,expected:V.function,received:a.parsedType}),I;function n(l,f){return oa({data:l,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,ia(),ut].filter(u=>!!u),issueData:{code:v.invalid_arguments,argumentsError:f}})}function r(l,f){return oa({data:l,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,ia(),ut].filter(u=>!!u),issueData:{code:v.invalid_return_type,returnTypeError:f}})}const i={errorMap:a.common.contextualErrorMap},o=a.data;if(this._def.returns instanceof mt){const l=this;return Be(async function(...f){const u=new qe([]),c=await l._def.args.parseAsync(f,i).catch(g=>{throw u.addIssue(n(f,g)),u}),d=await Reflect.apply(o,this,c);return await l._def.returns._def.type.parseAsync(d,i).catch(g=>{throw u.addIssue(r(d,g)),u})})}else{const l=this;return Be(function(...f){const u=l._def.args.safeParse(f,i);if(!u.success)throw new qe([n(f,u.error)]);const c=Reflect.apply(o,this,u.data),d=l._def.returns.safeParse(c,i);if(!d.success)throw new qe([r(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new rt({...this._def,args:ls.create(e).rest(qs.create())})}returns(e){return new rt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,a,n){return new rt({args:e||ls.create([]).rest(qs.create()),returns:a||qs.create(),typeName:q.ZodFunction,...z(n)})}}class Mt extends Q{get schema(){return this._def.getter()}_parse(e){const{ctx:a}=this._processInputParams(e);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}}Mt.create=(s,e)=>new Mt({getter:s,typeName:q.ZodLazy,...z(e)});class Pt extends Q{_parse(e){if(e.data!==this._def.value){const a=this._getOrReturnCtx(e);return B(a,{received:a.data,code:v.invalid_literal,expected:this._def.value}),I}return{status:"valid",value:e.data}}get value(){return this._def.value}}Pt.create=(s,e)=>new Pt({value:s,typeName:q.ZodLiteral,...z(e)});function Ti(s,e){return new Ts({values:s,typeName:q.ZodEnum,...z(e)})}class Ts extends Q{_parse(e){if(typeof e.data!="string"){const a=this._getOrReturnCtx(e),n=this._def.values;return B(a,{expected:Y.joinValues(n),received:a.parsedType,code:v.invalid_type}),I}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const a=this._getOrReturnCtx(e),n=this._def.values;return B(a,{received:a.data,code:v.invalid_enum_value,options:n}),I}return Be(e.data)}get options(){return this._def.values}get enum(){const e={};for(const a of this._def.values)e[a]=a;return e}get Values(){const e={};for(const a of this._def.values)e[a]=a;return e}get Enum(){const e={};for(const a of this._def.values)e[a]=a;return e}extract(e,a=this._def){return Ts.create(e,{...this._def,...a})}exclude(e,a=this._def){return Ts.create(this.options.filter(n=>!e.includes(n)),{...this._def,...a})}}Ts.create=Ti;class Lt extends Q{_parse(e){const a=Y.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==V.string&&n.parsedType!==V.number){const r=Y.objectValues(a);return B(n,{expected:Y.joinValues(r),received:n.parsedType,code:v.invalid_type}),I}if(this._cache||(this._cache=new Set(Y.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=Y.objectValues(a);return B(n,{received:n.data,code:v.invalid_enum_value,options:r}),I}return Be(e.data)}get enum(){return this._def.values}}Lt.create=(s,e)=>new Lt({values:s,typeName:q.ZodNativeEnum,...z(e)});class mt extends Q{unwrap(){return this._def.type}_parse(e){const{ctx:a}=this._processInputParams(e);if(a.parsedType!==V.promise&&a.common.async===!1)return B(a,{code:v.invalid_type,expected:V.promise,received:a.parsedType}),I;const n=a.parsedType===V.promise?a.data:Promise.resolve(a.data);return Be(n.then(r=>this._def.type.parseAsync(r,{path:a.path,errorMap:a.common.contextualErrorMap})))}}mt.create=(s,e)=>new mt({type:s,typeName:q.ZodPromise,...z(e)});class Je extends Q{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===q.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:a,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:o=>{B(n,o),o.fatal?a.abort():a.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),r.type==="preprocess"){const o=r.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(a.value==="aborted")return I;const f=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return f.status==="aborted"?I:f.status==="dirty"||a.value==="dirty"?et(f.value):f});{if(a.value==="aborted")return I;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?I:l.status==="dirty"||a.value==="dirty"?et(l.value):l}}if(r.type==="refinement"){const o=l=>{const f=r.refinement(l,i);if(n.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?I:(l.status==="dirty"&&a.dirty(),o(l.value),{status:a.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?I:(l.status==="dirty"&&a.dirty(),o(l.value).then(()=>({status:a.value,value:l.value}))))}if(r.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!zs(o))return I;const l=r.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>zs(o)?Promise.resolve(r.transform(o.value,i)).then(l=>({status:a.value,value:l})):I);Y.assertNever(r)}}Je.create=(s,e,a)=>new Je({schema:s,typeName:q.ZodEffects,effect:e,...z(a)});Je.createWithPreprocess=(s,e,a)=>new Je({schema:e,effect:{type:"preprocess",transform:s},typeName:q.ZodEffects,...z(a)});class rs extends Q{_parse(e){return this._getType(e)===V.undefined?Be(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rs.create=(s,e)=>new rs({innerType:s,typeName:q.ZodOptional,...z(e)});class Rs extends Q{_parse(e){return this._getType(e)===V.null?Be(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Rs.create=(s,e)=>new Rs({innerType:s,typeName:q.ZodNullable,...z(e)});class It extends Q{_parse(e){const{ctx:a}=this._processInputParams(e);let n=a.data;return a.parsedType===V.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}It.create=(s,e)=>new It({innerType:s,typeName:q.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...z(e)});class qt extends Q{_parse(e){const{ctx:a}=this._processInputParams(e),n={...a,common:{...a.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Bt(r)?r.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new qe(n.common.issues)},input:n.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new qe(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}qt.create=(s,e)=>new qt({innerType:s,typeName:q.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...z(e)});class da extends Q{_parse(e){if(this._getType(e)!==V.nan){const n=this._getOrReturnCtx(e);return B(n,{code:v.invalid_type,expected:V.nan,received:n.parsedType}),I}return{status:"valid",value:e.data}}}da.create=s=>new da({typeName:q.ZodNaN,...z(s)});const md=Symbol("zod_brand");class yn extends Q{_parse(e){const{ctx:a}=this._processInputParams(e),n=a.data;return this._def.type._parse({data:n,path:a.path,parent:a})}unwrap(){return this._def.type}}class Qt extends Q{_parse(e){const{status:a,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?I:i.status==="dirty"?(a.dirty(),et(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const r=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?I:r.status==="dirty"?(a.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:n.path,parent:n})}}static create(e,a){return new Qt({in:e,out:a,typeName:q.ZodPipeline})}}class Ot extends Q{_parse(e){const a=this._def.innerType._parse(e),n=r=>(zs(r)&&(r.value=Object.freeze(r.value)),r);return Bt(a)?a.then(r=>n(r)):n(a)}unwrap(){return this._def.innerType}}Ot.create=(s,e)=>new Ot({innerType:s,typeName:q.ZodReadonly,...z(e)});function Jn(s,e){const a=typeof s=="function"?s(e):typeof s=="string"?{message:s}:s;return typeof a=="string"?{message:a}:a}function Se(s,e={},a){return s?dt.create().superRefine((n,r)=>{const i=s(n);if(i instanceof Promise)return i.then(o=>{if(!o){const l=Jn(e,n),f=l.fatal??a??!0;r.addIssue({code:"custom",...l,fatal:f})}});if(!i){const o=Jn(e,n),l=o.fatal??a??!0;r.addIssue({code:"custom",...o,fatal:l})}}):dt.create()}const fd={object:le.lazycreate};var q;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(q||(q={}));const pd=(s,e={message:`Input not instance of ${s.name}`})=>Se(a=>a instanceof s,e),ns=He.create,kn=Ss.create,hd=da.create,Nd=_s.create,vn=Vt.create,bd=Ws.create,gd=la.create,xd=Ut.create,Ri=St.create,Ft=dt.create,yd=qs.create,kd=bs.create,vd=ca.create,st=Xe.create,it=le.create,Cd=le.strictCreate,Cn=_t.create,Dd=xa.create,Ad=Tt.create,Ed=ls.create,Mi=Rt.create,wd=ua.create,jd=Qs.create,Bd=rt.create,Vd=Mt.create,Ud=Pt.create,Sd=Ts.create,_d=Lt.create,Td=mt.create,er=Je.create,Rd=rs.create,Md=Rs.create,Pd=Je.createWithPreprocess,Ld=Qt.create,Id=()=>ns().optional(),qd=()=>kn().optional(),Od=()=>vn().optional(),Fd={string:(s=>He.create({...s,coerce:!0})),number:(s=>Ss.create({...s,coerce:!0})),boolean:(s=>Vt.create({...s,coerce:!0})),bigint:(s=>_s.create({...s,coerce:!0})),date:(s=>Ws.create({...s,coerce:!0}))},$d=I,zd=Object.freeze(Object.defineProperty({__proto__:null,BRAND:md,DIRTY:et,EMPTY_PATH:zu,INVALID:I,NEVER:$d,OK:Be,ParseStatus:ve,Schema:Q,ZodAny:dt,ZodArray:Xe,ZodBigInt:_s,ZodBoolean:Vt,ZodBranded:yn,ZodCatch:qt,ZodDate:Ws,ZodDefault:It,ZodDiscriminatedUnion:xa,ZodEffects:Je,ZodEnum:Ts,ZodError:qe,get ZodFirstPartyTypeKind(){return q},ZodFunction:rt,ZodIntersection:Tt,ZodIssueCode:v,ZodLazy:Mt,ZodLiteral:Pt,ZodMap:ua,ZodNaN:da,ZodNativeEnum:Lt,ZodNever:bs,ZodNull:St,ZodNullable:Rs,ZodNumber:Ss,ZodObject:le,ZodOptional:rs,ZodParsedType:V,ZodPipeline:Qt,ZodPromise:mt,ZodReadonly:Ot,ZodRecord:Rt,ZodSchema:Q,ZodSet:Qs,ZodString:He,ZodSymbol:la,ZodTransformer:Je,ZodTuple:ls,ZodType:Q,ZodUndefined:Ut,ZodUnion:_t,ZodUnknown:qs,ZodVoid:ca,addIssueToContext:B,any:Ft,array:st,bigint:Nd,boolean:vn,coerce:Fd,custom:Se,date:bd,datetimeRegex:_i,defaultErrorMap:ut,discriminatedUnion:Dd,effect:er,enum:Sd,function:Bd,getErrorMap:ia,getParsedType:ms,instanceof:pd,intersection:Ad,isAborted:Ga,isAsync:Bt,isDirty:Ka,isValid:zs,late:fd,lazy:Vd,literal:Ud,makeIssue:oa,map:wd,nan:hd,nativeEnum:_d,never:kd,null:Ri,nullable:Md,number:kn,object:it,get objectUtil(){return Qa},oboolean:Od,onumber:qd,optional:Rd,ostring:Id,pipeline:Ld,preprocess:Pd,promise:Td,quotelessJson:Fu,record:Mi,set:jd,setErrorMap:$u,strictObject:Cd,string:ns,symbol:gd,transformer:er,tuple:Ed,undefined:xd,union:Cn,unknown:yd,get util(){return Y},void:vd},Symbol.toStringTag,{value:"Module"})),E=Symbol.for("drizzle:entityKind");function ye(s,e){if(!s||typeof s!="object")return!1;if(s instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,E))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let a=Object.getPrototypeOf(s).constructor;if(a)for(;a;){if(E in a&&a[E]===e[E])return!0;a=Object.getPrototypeOf(a)}return!1}class $t{constructor(e,a){this.table=e,this.config=a,this.name=a.name,this.keyAsName=a.keyAsName,this.notNull=a.notNull,this.default=a.default,this.defaultFn=a.defaultFn,this.onUpdateFn=a.onUpdateFn,this.hasDefault=a.hasDefault,this.primary=a.primaryKey,this.isUnique=a.isUnique,this.uniqueName=a.uniqueName,this.uniqueType=a.uniqueType,this.dataType=a.dataType,this.columnType=a.columnType,this.generated=a.generated,this.generatedIdentity=a.generatedIdentity}static[E]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class Wd{static[E]="ColumnBuilder";config;constructor(e,a,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:a,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}const ot=Symbol.for("drizzle:Name"),sr=Symbol.for("drizzle:isPgEnum");function Qd(s){return!!s&&typeof s=="function"&&sr in s&&s[sr]===!0}class Pi{static[E]="Subquery";constructor(e,a,n,r=!1){this._={brand:"Subquery",sql:e,selectedFields:a,alias:n,isWith:r}}}const Gd={startActiveSpan(s,e){return e()}},lt=Symbol.for("drizzle:ViewBaseConfig"),_a=Symbol.for("drizzle:Schema"),tr=Symbol.for("drizzle:Columns"),ar=Symbol.for("drizzle:ExtraConfigColumns"),Ta=Symbol.for("drizzle:OriginalName"),Ra=Symbol.for("drizzle:BaseName"),ma=Symbol.for("drizzle:IsAlias"),nr=Symbol.for("drizzle:ExtraConfigBuilder"),Li=Symbol.for("drizzle:IsDrizzleTable");class Te{static[E]="Table";static Symbol={Name:ot,Schema:_a,OriginalName:Ta,Columns:tr,ExtraConfigColumns:ar,BaseName:Ra,IsAlias:ma,ExtraConfigBuilder:nr};[ot];[Ta];[_a];[tr];[ar];[Ra];[ma]=!1;[Li]=!0;[nr]=void 0;constructor(e,a,n){this[ot]=this[Ta]=e,this[_a]=a,this[Ra]=n}}function Ii(s){return typeof s=="object"&&s!==null&&Li in s}function Kd(s){return s!=null&&typeof s.getSQL=="function"}function Yd(s){const e={sql:"",params:[]};for(const a of s)e.sql+=a.sql,e.params.push(...a.params),a.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...a.typings));return e}class Ye{static[E]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new ue([this])}}class ue{constructor(e){this.queryChunks=e}static[E]="SQL";decoder=qi;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Gd.startActiveSpan("drizzle.buildSQL",a=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return a?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,a){const n=Object.assign({},a,{inlineParams:a.inlineParams||this.shouldInlineParams,paramStartIndex:a.paramStartIndex||{value:0}}),{casing:r,escapeName:i,escapeParam:o,prepareTyping:l,inlineParams:f,paramStartIndex:u}=n;return Yd(e.map(c=>{if(ye(c,Ye))return{sql:c.value.join(""),params:[]};if(ye(c,Za))return{sql:i(c.value),params:[]};if(c===void 0)return{sql:"",params:[]};if(Array.isArray(c)){const d=[new Ye("(")];for(const[b,g]of c.entries())d.push(g),b<c.length-1&&d.push(new Ye(", "));return d.push(new Ye(")")),this.buildQueryFromSourceParams(d,n)}if(ye(c,ue))return this.buildQueryFromSourceParams(c.queryChunks,{...n,inlineParams:f||c.shouldInlineParams});if(ye(c,Te)){const d=c[Te.Symbol.Schema],b=c[Te.Symbol.Name];return{sql:d===void 0||c[ma]?i(b):i(d)+"."+i(b),params:[]}}if(ye(c,$t)){const d=r.getColumnCasing(c);if(a.invokeSource==="indexes")return{sql:i(d),params:[]};const b=c.table[Te.Symbol.Schema];return{sql:c.table[ma]||b===void 0?i(c.table[Te.Symbol.Name])+"."+i(d):i(b)+"."+i(c.table[Te.Symbol.Name])+"."+i(d),params:[]}}if(ye(c,Zd)){const d=c[lt].schema,b=c[lt].name;return{sql:d===void 0||c[lt].isAlias?i(b):i(d)+"."+i(b),params:[]}}if(ye(c,Fi)){if(ye(c.value,Ha))return{sql:o(u.value++,c),params:[c],typings:["none"]};const d=c.value===null?null:c.encoder.mapToDriverValue(c.value);if(ye(d,ue))return this.buildQueryFromSourceParams([d],n);if(f)return{sql:this.mapInlineParam(d,n),params:[]};let b=["none"];return l&&(b=[l(c.encoder)]),{sql:o(u.value++,d),params:[d],typings:b}}return ye(c,Ha)?{sql:o(u.value++,c),params:[c],typings:["none"]}:ye(c,ue.Aliased)&&c.fieldAlias!==void 0?{sql:i(c.fieldAlias),params:[]}:ye(c,Pi)?c._.isWith?{sql:i(c._.alias),params:[]}:this.buildQueryFromSourceParams([new Ye("("),c._.sql,new Ye(") "),new Za(c._.alias)],n):Qd(c)?c.schema?{sql:i(c.schema)+"."+i(c.enumName),params:[]}:{sql:i(c.enumName),params:[]}:Kd(c)?c.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([c.getSQL()],n):this.buildQueryFromSourceParams([new Ye("("),c.getSQL(),new Ye(")")],n):f?{sql:this.mapInlineParam(c,n),params:[]}:{sql:o(u.value++,c),params:[c],typings:["none"]}}))}mapInlineParam(e,{escapeString:a}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return a(e);if(typeof e=="object"){const n=e.toString();return a(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new ue.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class Za{constructor(e){this.value=e}static[E]="Name";brand;getSQL(){return new ue([this])}}const qi={mapFromDriverValue:s=>s},Oi={mapToDriverValue:s=>s};({...qi,...Oi});class Fi{constructor(e,a=Oi){this.value=e,this.encoder=a}static[E]="Param";brand;getSQL(){return new ue([this])}}function pe(s,...e){const a=[];(e.length>0||s.length>0&&s[0]!=="")&&a.push(new Ye(s[0]));for(const[n,r]of e.entries())a.push(r,new Ye(s[n+1]));return new ue(a)}(s=>{function e(){return new ue([])}s.empty=e;function a(f){return new ue(f)}s.fromList=a;function n(f){return new ue([new Ye(f)])}s.raw=n;function r(f,u){const c=[];for(const[d,b]of f.entries())d>0&&u!==void 0&&c.push(u),c.push(b);return new ue(c)}s.join=r;function i(f){return new Za(f)}s.identifier=i;function o(f){return new Ha(f)}s.placeholder=o;function l(f,u){return new Fi(f,u)}s.param=l})(pe||(pe={}));(s=>{class e{constructor(n,r){this.sql=n,this.fieldAlias=r}static[E]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}s.Aliased=e})(ue||(ue={}));class Ha{constructor(e){this.name=e}static[E]="Placeholder";getSQL(){return new ue([this])}}const $i=Symbol.for("drizzle:IsDrizzleView");class Zd{static[E]="View";[lt];[$i]=!0;constructor({name:e,schema:a,selectedFields:n,query:r}){this[lt]={name:e,originalName:e,schema:a,selectedFields:n,query:r,isExisting:!r,isAlias:!1}}getSQL(){return new ue([this])}}function Hd(s){return typeof s=="object"&&s!==null&&$i in s}$t.prototype.getSQL=function(){return new ue([this])};Te.prototype.getSQL=function(){return new ue([this])};Pi.prototype.getSQL=function(){return new ue([this])};function Xd(s){return s[Te.Symbol.Columns]}function Jd(s){return s[lt].selectedFields}function ce(s,e){return{name:typeof s=="string"&&s.length>0?s:"",config:typeof s=="object"?s:e}}class em{static[E]="MySqlForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(e,a){this.reference=()=>{const{name:n,columns:r,foreignColumns:i}=e();return{name:n,columns:r,foreignTable:i[0].table,foreignColumns:i}},a&&(this._onUpdate=a.onUpdate,this._onDelete=a.onDelete)}onUpdate(e){return this._onUpdate=e,this}onDelete(e){return this._onDelete=e,this}build(e){return new sm(e,this)}}class sm{constructor(e,a){this.table=e,this.reference=a.reference,this.onUpdate=a._onUpdate,this.onDelete=a._onDelete}static[E]="MySqlForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:a,foreignColumns:n}=this.reference(),r=a.map(l=>l.name),i=n.map(l=>l.name),o=[this.table[ot],...r,n[0].table[ot],...i];return e??`${o.join("_")}_fk`}}function tm(s,e){return`${s[ot]}_${e.join("_")}_unique`}class ge extends Wd{static[E]="MySqlColumnBuilder";foreignKeyConfigs=[];references(e,a={}){return this.foreignKeyConfigs.push({ref:e,actions:a}),this}unique(e){return this.config.isUnique=!0,this.config.uniqueName=e,this}generatedAlwaysAs(e,a){return this.config.generated={as:e,type:"always",mode:a?.mode??"virtual"},this}buildForeignKeys(e,a){return this.foreignKeyConfigs.map(({ref:n,actions:r})=>((i,o)=>{const l=new em(()=>{const f=i();return{columns:[e],foreignColumns:[f]}});return o.onUpdate&&l.onUpdate(o.onUpdate),o.onDelete&&l.onDelete(o.onDelete),l.build(a)})(n,r))}}class xe extends $t{constructor(e,a){a.uniqueName||(a.uniqueName=tm(e,[a.name])),super(e,a),this.table=e}static[E]="MySqlColumn"}class es extends ge{static[E]="MySqlColumnBuilderWithAutoIncrement";constructor(e,a,n){super(e,a,n),this.config.autoIncrement=!1}autoincrement(){return this.config.autoIncrement=!0,this.config.hasDefault=!0,this}}class ss extends xe{static[E]="MySqlColumnWithAutoIncrement";autoIncrement=this.config.autoIncrement}class am extends es{static[E]="MySqlBigInt53Builder";constructor(e,a=!1){super(e,"number","MySqlBigInt53"),this.config.unsigned=a}build(e){return new nm(e,this.config)}}class nm extends ss{static[E]="MySqlBigInt53";getSQLType(){return`bigint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class rm extends es{static[E]="MySqlBigInt64Builder";constructor(e,a=!1){super(e,"bigint","MySqlBigInt64"),this.config.unsigned=a}build(e){return new im(e,this.config)}}class im extends ss{static[E]="MySqlBigInt64";getSQLType(){return`bigint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(e){return BigInt(e)}}function om(s,e){const{name:a,config:n}=ce(s,e);return n.mode==="number"?new am(a,n.unsigned):new rm(a,n.unsigned)}class lm extends ge{static[E]="MySqlBinaryBuilder";constructor(e,a){super(e,"string","MySqlBinary"),this.config.length=a}build(e){return new cm(e,this.config)}}class cm extends xe{static[E]="MySqlBinary";length=this.config.length;getSQLType(){return this.length===void 0?"binary":`binary(${this.length})`}}function um(s,e={}){const{name:a,config:n}=ce(s,e);return new lm(a,n.length)}class dm extends ge{static[E]="MySqlBooleanBuilder";constructor(e){super(e,"boolean","MySqlBoolean")}build(e){return new mm(e,this.config)}}class mm extends xe{static[E]="MySqlBoolean";getSQLType(){return"boolean"}mapFromDriverValue(e){return typeof e=="boolean"?e:e===1}}function $e(s){return new dm(s??"")}class fm extends ge{static[E]="MySqlCharBuilder";constructor(e,a){super(e,"string","MySqlChar"),this.config.length=a.length,this.config.enum=a.enum}build(e){return new pm(e,this.config)}}class pm extends xe{static[E]="MySqlChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function hm(s,e={}){const{name:a,config:n}=ce(s,e);return new fm(a,n)}class Nm extends ge{static[E]="MySqlCustomColumnBuilder";constructor(e,a,n){super(e,"custom","MySqlCustomColumn"),this.config.fieldConfig=a,this.config.customTypeParams=n}build(e){return new bm(e,this.config)}}class bm extends xe{static[E]="MySqlCustomColumn";sqlName;mapTo;mapFrom;constructor(e,a){super(e,a),this.sqlName=a.customTypeParams.dataType(a.fieldConfig),this.mapTo=a.customTypeParams.toDriver,this.mapFrom=a.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}}function gm(s){return(e,a)=>{const{name:n,config:r}=ce(e,a);return new Nm(n,r,s)}}class xm extends ge{static[E]="MySqlDateBuilder";constructor(e){super(e,"date","MySqlDate")}build(e){return new ym(e,this.config)}}class ym extends xe{static[E]="MySqlDate";constructor(e,a){super(e,a)}getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}}class km extends ge{static[E]="MySqlDateStringBuilder";constructor(e){super(e,"string","MySqlDateString")}build(e){return new vm(e,this.config)}}class vm extends xe{static[E]="MySqlDateString";constructor(e,a){super(e,a)}getSQLType(){return"date"}}function Cm(s,e){const{name:a,config:n}=ce(s,e);return n?.mode==="string"?new km(a):new xm(a)}class Dm extends ge{static[E]="MySqlDateTimeBuilder";constructor(e,a){super(e,"date","MySqlDateTime"),this.config.fsp=a?.fsp}build(e){return new Am(e,this.config)}}class Am extends xe{static[E]="MySqlDateTime";fsp;constructor(e,a){super(e,a),this.fsp=a.fsp}getSQLType(){return`datetime${this.fsp===void 0?"":`(${this.fsp})`}`}mapToDriverValue(e){return e.toISOString().replace("T"," ").replace("Z","")}mapFromDriverValue(e){return new Date(e.replace(" ","T")+"Z")}}class Em extends ge{static[E]="MySqlDateTimeStringBuilder";constructor(e,a){super(e,"string","MySqlDateTimeString"),this.config.fsp=a?.fsp}build(e){return new wm(e,this.config)}}class wm extends xe{static[E]="MySqlDateTimeString";fsp;constructor(e,a){super(e,a),this.fsp=a.fsp}getSQLType(){return`datetime${this.fsp===void 0?"":`(${this.fsp})`}`}}function X(s,e){const{name:a,config:n}=ce(s,e);return n?.mode==="string"?new Em(a,n):new Dm(a,n)}class jm extends es{static[E]="MySqlDecimalBuilder";constructor(e,a){super(e,"string","MySqlDecimal"),this.config.precision=a?.precision,this.config.scale=a?.scale,this.config.unsigned=a?.unsigned}build(e){return new Bm(e,this.config)}}class Bm extends ss{static[E]="MySqlDecimal";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;getSQLType(){let e="";return this.precision!==void 0&&this.scale!==void 0?e+=`decimal(${this.precision},${this.scale})`:this.precision===void 0?e+="decimal":e+=`decimal(${this.precision})`,e=e==="decimal(10,0)"||e==="decimal(10)"?"decimal":e,this.unsigned?`${e} unsigned`:e}}function ke(s,e={}){const{name:a,config:n}=ce(s,e);return new jm(a,n)}class Vm extends es{static[E]="MySqlDoubleBuilder";constructor(e,a){super(e,"number","MySqlDouble"),this.config.precision=a?.precision,this.config.scale=a?.scale,this.config.unsigned=a?.unsigned}build(e){return new Um(e,this.config)}}class Um extends ss{static[E]="MySqlDouble";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;getSQLType(){let e="";return this.precision!==void 0&&this.scale!==void 0?e+=`double(${this.precision},${this.scale})`:this.precision===void 0?e+="double":e+=`double(${this.precision})`,this.unsigned?`${e} unsigned`:e}}function Sm(s,e){const{name:a,config:n}=ce(s,e);return new Vm(a,n)}class _m extends ge{static[E]="MySqlEnumColumnBuilder";constructor(e,a){super(e,"string","MySqlEnumColumn"),this.config.enumValues=a}build(e){return new Tm(e,this.config)}}class Tm extends xe{static[E]="MySqlEnumColumn";enumValues=this.config.enumValues;getSQLType(){return`enum(${this.enumValues.map(e=>`'${e}'`).join(",")})`}}function Rm(s,e){const{name:a,config:n}=ce(s,e);if(n.length===0)throw new Error(`You have an empty array for "${a}" enum values`);return new _m(a,n)}class Mm extends es{static[E]="MySqlFloatBuilder";constructor(e,a){super(e,"number","MySqlFloat"),this.config.precision=a?.precision,this.config.scale=a?.scale,this.config.unsigned=a?.unsigned}build(e){return new Pm(e,this.config)}}class Pm extends ss{static[E]="MySqlFloat";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;getSQLType(){let e="";return this.precision!==void 0&&this.scale!==void 0?e+=`float(${this.precision},${this.scale})`:this.precision===void 0?e+="float":e+=`float(${this.precision})`,this.unsigned?`${e} unsigned`:e}}function Lm(s,e){const{name:a,config:n}=ce(s,e);return new Mm(a,n)}class Im extends es{static[E]="MySqlIntBuilder";constructor(e,a){super(e,"number","MySqlInt"),this.config.unsigned=a?a.unsigned:!1}build(e){return new qm(e,this.config)}}class qm extends ss{static[E]="MySqlInt";getSQLType(){return`int${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(e){return typeof e=="string"?Number(e):e}}function F(s,e){const{name:a,config:n}=ce(s,e);return new Im(a,n)}class Om extends ge{static[E]="MySqlJsonBuilder";constructor(e){super(e,"json","MySqlJson")}build(e){return new Fm(e,this.config)}}class Fm extends xe{static[E]="MySqlJson";getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}}function is(s){return new Om(s??"")}class $m extends es{static[E]="MySqlMediumIntBuilder";constructor(e,a){super(e,"number","MySqlMediumInt"),this.config.unsigned=a?a.unsigned:!1}build(e){return new zm(e,this.config)}}class zm extends ss{static[E]="MySqlMediumInt";getSQLType(){return`mediumint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(e){return typeof e=="string"?Number(e):e}}function Wm(s,e){const{name:a,config:n}=ce(s,e);return new $m(a,n)}class Qm extends es{static[E]="MySqlRealBuilder";constructor(e,a){super(e,"number","MySqlReal"),this.config.precision=a?.precision,this.config.scale=a?.scale}build(e){return new Gm(e,this.config)}}class Gm extends ss{static[E]="MySqlReal";precision=this.config.precision;scale=this.config.scale;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`real(${this.precision}, ${this.scale})`:this.precision===void 0?"real":`real(${this.precision})`}}function Km(s,e={}){const{name:a,config:n}=ce(s,e);return new Qm(a,n)}class Ym extends es{static[E]="MySqlSerialBuilder";constructor(e){super(e,"number","MySqlSerial"),this.config.hasDefault=!0,this.config.autoIncrement=!0}build(e){return new Zm(e,this.config)}}class Zm extends ss{static[E]="MySqlSerial";getSQLType(){return"serial"}mapFromDriverValue(e){return typeof e=="string"?Number(e):e}}function Hm(s){return new Ym(s??"")}class Xm extends es{static[E]="MySqlSmallIntBuilder";constructor(e,a){super(e,"number","MySqlSmallInt"),this.config.unsigned=a?a.unsigned:!1}build(e){return new Jm(e,this.config)}}class Jm extends ss{static[E]="MySqlSmallInt";getSQLType(){return`smallint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(e){return typeof e=="string"?Number(e):e}}function ef(s,e){const{name:a,config:n}=ce(s,e);return new Xm(a,n)}class ya extends ge{static[E]="MySqlTextBuilder";constructor(e,a,n){super(e,"string","MySqlText"),this.config.textType=a,this.config.enumValues=n.enum}build(e){return new sf(e,this.config)}}class sf extends xe{static[E]="MySqlText";textType=this.config.textType;enumValues=this.config.enumValues;getSQLType(){return this.textType}}function We(s,e={}){const{name:a,config:n}=ce(s,e);return new ya(a,"text",n)}function tf(s,e={}){const{name:a,config:n}=ce(s,e);return new ya(a,"tinytext",n)}function af(s,e={}){const{name:a,config:n}=ce(s,e);return new ya(a,"mediumtext",n)}function nf(s,e={}){const{name:a,config:n}=ce(s,e);return new ya(a,"longtext",n)}class rf extends ge{static[E]="MySqlTimeBuilder";constructor(e,a){super(e,"string","MySqlTime"),this.config.fsp=a?.fsp}build(e){return new of(e,this.config)}}class of extends xe{static[E]="MySqlTime";fsp=this.config.fsp;getSQLType(){return`time${this.fsp===void 0?"":`(${this.fsp})`}`}}function lf(s,e){const{name:a,config:n}=ce(s,e);return new rf(a,n)}class zi extends ge{static[E]="MySqlDateColumnBuilder";defaultNow(){return this.default(pe`(now())`)}onUpdateNow(){return this.config.hasOnUpdateNow=!0,this.config.hasDefault=!0,this}}class Wi extends xe{static[E]="MySqlDateColumn";hasOnUpdateNow=this.config.hasOnUpdateNow}class cf extends zi{static[E]="MySqlTimestampBuilder";constructor(e,a){super(e,"date","MySqlTimestamp"),this.config.fsp=a?.fsp}build(e){return new uf(e,this.config)}}class uf extends Wi{static[E]="MySqlTimestamp";fsp=this.config.fsp;getSQLType(){return`timestamp${this.fsp===void 0?"":`(${this.fsp})`}`}mapFromDriverValue(e){return new Date(e+"+0000")}mapToDriverValue(e){return e.toISOString().slice(0,-1).replace("T"," ")}}class df extends zi{static[E]="MySqlTimestampStringBuilder";constructor(e,a){super(e,"string","MySqlTimestampString"),this.config.fsp=a?.fsp}build(e){return new mf(e,this.config)}}class mf extends Wi{static[E]="MySqlTimestampString";fsp=this.config.fsp;getSQLType(){return`timestamp${this.fsp===void 0?"":`(${this.fsp})`}`}}function ff(s,e={}){const{name:a,config:n}=ce(s,e);return n?.mode==="string"?new df(a,n):new cf(a,n)}class pf extends es{static[E]="MySqlTinyIntBuilder";constructor(e,a){super(e,"number","MySqlTinyInt"),this.config.unsigned=a?a.unsigned:!1}build(e){return new hf(e,this.config)}}class hf extends ss{static[E]="MySqlTinyInt";getSQLType(){return`tinyint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(e){return typeof e=="string"?Number(e):e}}function Nf(s,e){const{name:a,config:n}=ce(s,e);return new pf(a,n)}class bf extends ge{static[E]="MySqlVarBinaryBuilder";constructor(e,a){super(e,"string","MySqlVarBinary"),this.config.length=a?.length}build(e){return new gf(e,this.config)}}class gf extends xe{static[E]="MySqlVarBinary";length=this.config.length;getSQLType(){return this.length===void 0?"varbinary":`varbinary(${this.length})`}}function xf(s,e){const{name:a,config:n}=ce(s,e);return new bf(a,n)}class yf extends ge{static[E]="MySqlVarCharBuilder";constructor(e,a){super(e,"string","MySqlVarChar"),this.config.length=a.length,this.config.enum=a.enum}build(e){return new kf(e,this.config)}}class kf extends xe{static[E]="MySqlVarChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function M(s,e){const{name:a,config:n}=ce(s,e);return new yf(a,n)}class vf extends ge{static[E]="MySqlYearBuilder";constructor(e){super(e,"number","MySqlYear")}build(e){return new Cf(e,this.config)}}class Cf extends xe{static[E]="MySqlYear";getSQLType(){return"year"}}function Df(s){return new vf(s??"")}function Af(){return{bigint:om,binary:um,boolean:$e,char:hm,customType:gm,date:Cm,datetime:X,decimal:ke,double:Sm,mysqlEnum:Rm,float:Lm,int:F,json:is,mediumint:Wm,real:Km,serial:Hm,smallint:ef,text:We,time:lf,timestamp:ff,tinyint:Nf,varbinary:xf,varchar:M,year:Df,longtext:nf,mediumtext:af,tinytext:tf}}const Xa=Symbol.for("drizzle:MySqlInlineForeignKeys");class Ef extends Te{static[E]="MySqlTable";static Symbol=Object.assign({},Te.Symbol,{InlineForeignKeys:Xa});[Te.Symbol.Columns];[Xa]=[];[Te.Symbol.ExtraConfigBuilder]=void 0}function wf(s,e,a,n,r=s){const i=new Ef(s,n,r),o=typeof e=="function"?e(Af()):e,l=Object.fromEntries(Object.entries(o).map(([u,c])=>{const d=c;d.setName(u);const b=d.build(i);return i[Xa].push(...d.buildForeignKeys(b,i)),[u,b]})),f=Object.assign(i,l);return f[Te.Symbol.Columns]=l,f[Te.Symbol.ExtraConfigColumns]=l,f}const De=(s,e,a)=>wf(s,e,a,void 0,s),oe={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function de(s,e){return e.includes(s.columnType)}function jf(s){return"enumValues"in s&&Array.isArray(s.enumValues)&&s.enumValues.length>0}const Bf=Cn([ns(),kn(),vn(),Ri()]),Vf=Cn([Bf,Mi(Ft()),st(Ft())]),Uf=Se(s=>s instanceof Buffer);function Qi(s,e){const a=e?.zodInstance??zd,n=e?.coerce??{};let r;return jf(s)&&(r=s.enumValues.length?a.enum(s.enumValues):a.string()),r||(de(s,["PgGeometry","PgPointTuple"])?r=a.tuple([a.number(),a.number()]):de(s,["PgGeometryObject","PgPointObject"])?r=a.object({x:a.number(),y:a.number()}):de(s,["PgHalfVector","PgVector"])?(r=a.array(a.number()),r=s.dimensions?r.length(s.dimensions):r):de(s,["PgLine"])?r=a.tuple([a.number(),a.number(),a.number()]):de(s,["PgLineABC"])?r=a.object({a:a.number(),b:a.number(),c:a.number()}):de(s,["PgArray"])?(r=a.array(Qi(s.baseColumn,a)),r=s.size?r.length(s.size):r):s.dataType==="array"?r=a.array(a.any()):s.dataType==="number"?r=Sf(s,a,n):s.dataType==="bigint"?r=_f(s,a,n):s.dataType==="boolean"?r=n===!0||n.boolean?a.coerce.boolean():a.boolean():s.dataType==="date"?r=n===!0||n.date?a.coerce.date():a.date():s.dataType==="string"?r=Tf(s,a,n):s.dataType==="json"?r=Vf:s.dataType==="custom"?r=a.any():s.dataType==="buffer"&&(r=Uf)),r||(r=a.any()),r}function Sf(s,e,a){let n=s.getSQLType().includes("unsigned"),r,i,o=!1;de(s,["MySqlTinyInt","SingleStoreTinyInt"])?(r=n?0:oe.INT8_MIN,i=n?oe.INT8_UNSIGNED_MAX:oe.INT8_MAX,o=!0):de(s,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(r=n?0:oe.INT16_MIN,i=n?oe.INT16_UNSIGNED_MAX:oe.INT16_MAX,o=!0):de(s,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(r=n?0:oe.INT24_MIN,i=n?oe.INT24_UNSIGNED_MAX:oe.INT24_MAX,o=de(s,["MySqlMediumInt","SingleStoreMediumInt"])):de(s,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(r=n?0:oe.INT32_MIN,i=n?oe.INT32_UNSIGNED_MAX:oe.INT32_MAX,o=!0):de(s,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(r=n?0:oe.INT48_MIN,i=n?oe.INT48_UNSIGNED_MAX:oe.INT48_MAX):de(s,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||de(s,["MySqlSerial","SingleStoreSerial"]),r=n?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=!0):de(s,["MySqlYear","SingleStoreYear"])?(r=1901,i=2155,o=!0):(r=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let l=a===!0||a?.number?e.coerce.number():e.number();return l=l.min(r).max(i),o?l.int():l}function _f(s,e,a){const n=s.getSQLType().includes("unsigned"),r=n?0n:oe.INT64_MIN,i=n?oe.INT64_UNSIGNED_MAX:oe.INT64_MAX;return(a===!0||a?.bigint?e.coerce.bigint():e.bigint()).min(r).max(i)}function Tf(s,e,a){if(de(s,["PgUUID"]))return e.string().uuid();let n,r,i=!1;de(s,["PgVarchar","SQLiteText"])?n=s.length:de(s,["MySqlVarChar","SingleStoreVarChar"])?n=s.length??oe.INT16_UNSIGNED_MAX:de(s,["MySqlText","SingleStoreText"])&&(s.textType==="longtext"?n=oe.INT32_UNSIGNED_MAX:s.textType==="mediumtext"?n=oe.INT24_UNSIGNED_MAX:s.textType==="text"?n=oe.INT16_UNSIGNED_MAX:n=oe.INT8_UNSIGNED_MAX),de(s,["PgChar","MySqlChar","SingleStoreChar"])&&(n=s.length,i=!0),de(s,["PgBinaryVector"])&&(r=/^[01]+$/,n=s.dimensions);let o=a===!0||a?.string?e.coerce.string():e.string();return o=r?o.regex(r):o,n&&i?o.length(n):n?o.max(n):o}function Gi(s){return Ii(s)?Xd(s):Jd(s)}function Ki(s,e,a,n){const r={};for(const[i,o]of Object.entries(s)){if(!ye(o,$t)&&!ye(o,ue)&&!ye(o,ue.Aliased)&&typeof o=="object"){const d=Ii(o)||Hd(o)?Gi(o):o;r[i]=Ki(d,e[i]??{},a,n);continue}const l=e[i];if(l!==void 0&&typeof l!="function"){r[i]=l;continue}const f=ye(o,$t)?o:void 0,u=f?Qi(f,n):Ft(),c=typeof l=="function"?l(u):u;a.never(f)||(r[i]=c,f&&(a.nullable(f)&&(r[i]=r[i].nullable()),a.optional(f)&&(r[i]=r[i].optional())))}return it(r)}const Rf={never:s=>s?.generated?.type==="always"||s?.generatedIdentity?.type==="always",optional:s=>!s.notNull||s.notNull&&s.hasDefault,nullable:s=>!s.notNull},pt=(s,e)=>{const a=Gi(s);return Ki(a,{},Rf)},Qe=De("users",{id:F("id").autoincrement().primaryKey(),email:M("email",{length:255}).notNull().unique(),password:M("password",{length:255}).notNull(),firstName:M("first_name",{length:100}).notNull(),lastName:M("last_name",{length:100}).notNull(),phone:M("phone",{length:20}),phoneVerified:$e("phone_verified").default(!1),phoneVerificationCode:M("phone_verification_code",{length:10}),phoneVerificationExpiry:X("phone_verification_expiry"),role:M("role",{length:20}).notNull().default("passenger"),isLive:$e("is_live").default(!1),emailVerified:$e("email_verified").default(!1),verificationToken:M("verification_token",{length:255}),verificationTokenExpiry:X("verification_token_expiry"),driverDetails:is("driver_details").$type(),kycStatus:M("kyc_status",{length:20}),kycSubmittedAt:X("kyc_submitted_at"),kycReviewedAt:X("kyc_reviewed_at"),kycReviewedBy:M("kyc_reviewed_by",{length:20}),kycRejectionReason:We("kyc_rejection_reason"),licenseDocumentUrl:M("license_document_url",{length:500}),accountStatus:M("account_status",{length:20}).default("active"),suspensionReason:We("suspension_reason"),staffType:M("staff_type",{length:30}),createdAt:X("created_at").default(pe`NOW()`),updatedAt:X("updated_at").default(pe`NOW()`)}),Mf=De("buses",{id:F("id").autoincrement().primaryKey(),plateNumber:M("plate_number",{length:20}).notNull().unique(),driverName:M("driver_name",{length:200}).notNull(),capacity:F("capacity").notNull(),status:M("status",{length:20}).notNull().default("active")}),Dn=De("routes",{id:F("id").autoincrement().primaryKey(),name:M("name",{length:255}).notNull(),startLocation:M("start_location",{length:255}).notNull(),endLocation:M("end_location",{length:255}).notNull(),distance:M("distance",{length:20}),estimatedDuration:F("estimated_duration"),busType:M("bus_type",{length:30}).default("standard"),geometry:is("geometry"),createdAt:X("created_at").default(pe`NOW()`)});De("route_stops",{id:F("id").autoincrement().primaryKey(),routeId:F("route_id").notNull().references(()=>Dn.id,{onDelete:"cascade"}),name:M("name",{length:255}).notNull(),lat:ke("lat",{precision:10,scale:6}),lng:ke("lng",{precision:10,scale:6}),stopOrder:F("stop_order").notNull()});const Yi=De("schedules",{id:F("id").autoincrement().primaryKey(),routeId:F("route_id").references(()=>Dn.id),driverId:F("driver_id").references(()=>Qe.id),departureTime:X("departure_time").notNull(),price:ke("price",{precision:10,scale:2}),capacity:F("capacity").default(15),availableSeats:F("available_seats"),isLive:$e("is_live").default(!1),routeData:is("route_data"),fareBreakdown:is("fare_breakdown"),lastLocationLat:ke("last_location_lat",{precision:10,scale:6}),lastLocationLng:ke("last_location_lng",{precision:10,scale:6}),lastUpdate:X("last_update"),startLocation:M("start_location",{length:255}),endLocation:M("end_location",{length:255}),stopsData:is("stops_data"),createdAt:X("created_at").default(pe`NOW()`)}),Zi=De("bookings",{id:F("id").autoincrement().primaryKey(),userId:F("user_id").notNull().references(()=>Qe.id),scheduleId:F("schedule_id").notNull().references(()=>Yi.id),seatNumber:F("seat_number"),pickup:M("pickup",{length:255}),dropoff:M("dropoff",{length:255}),price:ke("price",{precision:10,scale:2}),status:M("status",{length:20}).notNull().default("confirmed"),isGroupBooking:$e("is_group_booking").default(!1),numberOfSeats:F("number_of_seats"),organizationName:M("organization_name",{length:255}),organizationType:M("organization_type",{length:50}),contactName:M("contact_name",{length:200}),contactPhone:M("contact_phone",{length:20}),notes:We("notes"),rideRequestId:F("ride_request_id"),createdAt:X("created_at").default(pe`NOW()`)}),Pf=De("profiles",{id:F("id").autoincrement().primaryKey(),userId:F("user_id").notNull().references(()=>Qe.id),role:M("role",{length:20}).notNull().default("passenger"),phoneNumber:M("phone_number",{length:20}),createdAt:X("created_at").default(pe`NOW()`)});De("bus_stops",{id:F("id").autoincrement().primaryKey(),name:M("name",{length:255}).notNull(),city:M("city",{length:100}).notNull(),region:M("region",{length:100}).notNull(),type:M("type",{length:20}).notNull(),lat:ke("lat",{precision:10,scale:6}).notNull(),lng:ke("lng",{precision:10,scale:6}).notNull(),aliases:is("aliases").$type(),searchTerms:We("search_terms"),createdAt:X("created_at").default(pe`NOW()`),updatedAt:X("updated_at").default(pe`NOW()`)});De("payments",{id:F("id").autoincrement().primaryKey(),bookingId:F("booking_id").notNull().references(()=>Zi.id),amount:ke("amount",{precision:10,scale:2}).notNull(),status:M("status",{length:20}).notNull().default("completed"),method:M("method",{length:30}).notNull(),createdAt:X("created_at").default(pe`NOW()`)});De("support_tickets",{id:F("id").autoincrement().primaryKey(),userId:F("user_id").notNull().references(()=>Qe.id),userEmail:M("user_email",{length:255}).notNull(),userName:M("user_name",{length:200}).notNull(),subject:M("subject",{length:255}).notNull(),message:We("message").notNull(),status:M("status",{length:20}).notNull().default("open"),priority:M("priority",{length:20}).notNull().default("medium"),category:M("category",{length:30}).notNull().default("other"),resolvedAt:X("resolved_at"),adminNotes:We("admin_notes"),assignedTo:M("assigned_to",{length:20}),createdAt:X("created_at").default(pe`NOW()`),updatedAt:X("updated_at").default(pe`NOW()`)});De("notifications",{id:F("id").autoincrement().primaryKey(),userId:F("user_id").notNull().references(()=>Qe.id),type:M("type",{length:30}).notNull(),title:M("title",{length:255}).notNull(),body:We("body").notNull(),data:is("data"),isRead:$e("is_read").default(!1),sent:$e("sent").default(!1),sentAt:X("sent_at"),createdAt:X("created_at").default(pe`NOW()`)});De("push_subscriptions",{id:F("id").autoincrement().primaryKey(),userId:F("user_id").notNull().references(()=>Qe.id),endpoint:We("endpoint").notNull(),keys:is("keys").$type().notNull(),createdAt:X("created_at").default(pe`NOW()`)});De("notification_preferences",{id:F("id").autoincrement().primaryKey(),userId:F("user_id").notNull().references(()=>Qe.id),enablePushNotifications:$e("enable_push_notifications").default(!0),enableArrivalAlerts:$e("enable_arrival_alerts").default(!0),enableDelayAlerts:$e("enable_delay_alerts").default(!0),enableCongestionWarnings:$e("enable_congestion_warnings").default(!0),arrivalAlertMinutes:F("arrival_alert_minutes").default(10),delayThresholdMinutes:F("delay_threshold_minutes").default(15),createdAt:X("created_at").default(pe`NOW()`),updatedAt:X("updated_at").default(pe`NOW()`)});De("ride_requests",{id:F("id").autoincrement().primaryKey(),userId:F("user_id").notNull().references(()=>Qe.id),userName:M("user_name",{length:200}),userPhone:M("user_phone",{length:20}),fromLocation:M("from_location",{length:255}).notNull(),toLocation:M("to_location",{length:255}).notNull(),seats:F("seats").default(1),departureTime:X("departure_time"),notes:We("notes"),status:M("status",{length:20}).notNull().default("pending"),estimatedFare:ke("estimated_fare",{precision:10,scale:2}),estimatedDistance:ke("estimated_distance",{precision:10,scale:2}),notifiedDrivers:is("notified_drivers").$type(),acceptedBy:F("accepted_by").references(()=>Qe.id),acceptedByName:M("accepted_by_name",{length:200}),acceptedScheduleId:F("accepted_schedule_id"),acceptedAt:X("accepted_at"),cancelledAt:X("cancelled_at"),createdAt:X("created_at").default(pe`NOW()`)});De("reports",{id:F("id").autoincrement().primaryKey(),userId:F("user_id").notNull().references(()=>Qe.id),type:M("type",{length:50}).notNull(),scheduleId:F("schedule_id"),routeId:F("route_id"),details:We("details"),locationLat:ke("location_lat",{precision:10,scale:6}),locationLng:ke("location_lng",{precision:10,scale:6}),status:M("status",{length:20}).default("pending"),createdAt:X("created_at").default(pe`NOW()`)});De("sos_alerts",{id:F("id").autoincrement().primaryKey(),userId:F("user_id").notNull().references(()=>Qe.id),scheduleId:F("schedule_id"),locationLat:ke("location_lat",{precision:10,scale:6}),locationLng:ke("location_lng",{precision:10,scale:6}),message:We("message"),status:M("status",{length:20}).default("active"),createdAt:X("created_at").default(pe`NOW()`)});pt(Qe).omit({id:!0,createdAt:!0,updatedAt:!0});const rr=pt(Mf).omit({id:!0}),Lf=pt(Dn).omit({id:!0,createdAt:!0}),If=pt(Yi).omit({id:!0,createdAt:!0}),qf=pt(Zi).omit({id:!0,createdAt:!0});pt(Pf).omit({id:!0,createdAt:!0});const vs={validation:it({message:ns(),field:ns().optional()}),notFound:it({message:ns()}),internal:it({message:ns()})},je={buses:{list:{method:"GET",path:"/api/buses",responses:{200:st(Se())}},create:{method:"POST",path:"/api/buses",input:rr,responses:{201:Se(),400:vs.validation}},update:{method:"PUT",path:"/api/buses/:id",input:rr.partial(),responses:{200:Se(),404:vs.notFound}}},routes:{list:{method:"GET",path:"/api/routes",responses:{200:st(Se())}},create:{method:"POST",path:"/api/routes",input:Lf,responses:{201:Se(),400:vs.validation}}},schedules:{list:{method:"GET",path:"/api/schedules",input:it({from:ns().optional(),to:ns().optional(),date:ns().optional()}).optional(),responses:{200:st(Se())}},create:{method:"POST",path:"/api/schedules",input:If,responses:{201:Se(),400:vs.validation}}},bookings:{list:{method:"GET",path:"/api/bookings",responses:{200:st(Se())}},create:{method:"POST",path:"/api/bookings",input:qf,responses:{201:Se(),400:vs.validation}},cancel:{method:"POST",path:"/api/bookings/:id/cancel",responses:{200:Se(),404:vs.notFound}}},profile:{get:{method:"GET",path:"/api/profile",responses:{200:Se(),404:vs.notFound}},update:{method:"PUT",path:"/api/profile",responses:{200:Ft(),404:vs.notFound}}}};function fa(s){const e=s?[je.schedules.list.path,s.from,s.to,s.date,s.driverId,s.query].filter(Boolean):[je.schedules.list.path];return Re({queryKey:e,queryFn:async()=>{const a=new URL(je.schedules.list.path,window.location.origin);s?.from&&a.searchParams.set("from",s.from),s?.to&&a.searchParams.set("to",s.to),s?.date&&a.searchParams.set("date",s.date),s?.driverId&&a.searchParams.set("driverId",s.driverId),s?.query&&a.searchParams.set("query",s.query);const n=await Ie(a.toString());if(!n.ok)throw new Error("Failed to fetch schedules");return n.json()},refetchInterval:5e3,refetchIntervalInBackground:!0,staleTime:5e3})}function Hi(){return Re({queryKey:[je.bookings.list.path],queryFn:async()=>{const s=await Ie(je.bookings.list.path);if(!s.ok)throw new Error("Failed to fetch bookings");return s.json()},refetchInterval:5e3,refetchIntervalInBackground:!0,staleTime:5e3})}function Of(){const s=he();return fe({mutationFn:async e=>{const a={scheduleId:String(e.scheduleId),seatNumber:Number(e.seatNumber),pickup:e.pickup,dropoff:e.dropoff,price:e.price,status:e.status||"confirmed"},n=await Ie(je.bookings.create.path,{method:je.bookings.create.method,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.message||"Failed to create booking")}return n.json()},onSuccess:()=>s.invalidateQueries({queryKey:[je.bookings.list.path]}),onError:e=>{e instanceof Us&&s.invalidateQueries({queryKey:["/api/auth/user"]})}})}function Ff(){const s=he();return fe({mutationFn:async e=>{const a=await Ie(`/api/bookings/${e}/cancel`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok){const n=await a.json().catch(()=>({}));throw new Error(n.message||"Failed to cancel booking")}return a.json()},onSuccess:()=>s.invalidateQueries({queryKey:[je.bookings.list.path]}),onError:e=>{e instanceof Us&&s.invalidateQueries({queryKey:["/api/auth/user"]})}})}function $f(){const s=he();return fe({mutationFn:async e=>{const a=await Ie(`/api/bookings/${e}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete booking");return a.json()},onSuccess:()=>s.invalidateQueries({queryKey:[je.bookings.list.path]}),onError:e=>{e instanceof Us&&s.invalidateQueries({queryKey:["/api/auth/user"]})}})}const An=Sr,En=Po,zf=Br,Xi=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(mn,{ref:a,className:T("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/dialog.tsx",lineNumber:21,columnNumber:3},void 0));Xi.displayName=mn.displayName;const ka=m.forwardRef(({className:s,children:e,...a},n)=>t.jsxDEV(zf,{children:[t.jsxDEV(Xi,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/dialog.tsx",lineNumber:37,columnNumber:5},void 0),t.jsxDEV(fn,{ref:n,className:T("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:[e,t.jsxDEV(Mo,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsxDEV(dn,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/dialog.tsx",lineNumber:48,columnNumber:9},void 0),t.jsxDEV("span",{className:"sr-only",children:"Close"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/dialog.tsx",lineNumber:49,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/dialog.tsx",lineNumber:47,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/dialog.tsx",lineNumber:38,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/dialog.tsx",lineNumber:36,columnNumber:3},void 0));ka.displayName=fn.displayName;const va=({className:s,...e})=>t.jsxDEV("div",{className:T("flex flex-col space-y-1.5 text-center sm:text-left",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/dialog.tsx",lineNumber:60,columnNumber:3},void 0);va.displayName="DialogHeader";const Ji=({className:s,...e})=>t.jsxDEV("div",{className:T("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/dialog.tsx",lineNumber:74,columnNumber:3},void 0);Ji.displayName="DialogFooter";const Ca=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Vr,{ref:a,className:T("text-lg font-semibold leading-none tracking-tight",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/dialog.tsx",lineNumber:88,columnNumber:3},void 0));Ca.displayName=Vr.displayName;const wn=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Ur,{ref:a,className:T("text-sm text-muted-foreground",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/dialog.tsx",lineNumber:103,columnNumber:3},void 0));wn.displayName=Ur.displayName;var ir=1,Wf=.9,Qf=.8,Gf=.17,Ma=.1,Pa=.999,Kf=.9999,Yf=.99,Zf=/[\\\/_+.#"@\[\(\{&]/,Hf=/[\\\/_+.#"@\[\(\{&]/g,Xf=/[\s-]/,eo=/[\s-]/g;function Ja(s,e,a,n,r,i,o){if(i===e.length)return r===s.length?ir:Yf;var l=`${r},${i}`;if(o[l]!==void 0)return o[l];for(var f=n.charAt(i),u=a.indexOf(f,r),c=0,d,b,g,D;u>=0;)d=Ja(s,e,a,n,u+1,i+1,o),d>c&&(u===r?d*=ir:Zf.test(s.charAt(u-1))?(d*=Qf,g=s.slice(r,u-1).match(Hf),g&&r>0&&(d*=Math.pow(Pa,g.length))):Xf.test(s.charAt(u-1))?(d*=Wf,D=s.slice(r,u-1).match(eo),D&&r>0&&(d*=Math.pow(Pa,D.length))):(d*=Gf,r>0&&(d*=Math.pow(Pa,u-r))),s.charAt(u)!==e.charAt(i)&&(d*=Kf)),(d<Ma&&a.charAt(u-1)===n.charAt(i+1)||n.charAt(i+1)===n.charAt(i)&&a.charAt(u-1)!==n.charAt(i))&&(b=Ja(s,e,a,n,u+1,i+2,o),b*Ma>d&&(d=b*Ma)),d>c&&(c=d),u=a.indexOf(f,u+1);return o[l]=c,c}function or(s){return s.toLowerCase().replace(eo," ")}function Jf(s,e,a){return s=a&&a.length>0?`${s+" "+a.join(" ")}`:s,Ja(s,e,or(s),or(e),0,0,{})}var xt='[cmdk-group=""]',La='[cmdk-group-items=""]',ep='[cmdk-group-heading=""]',so='[cmdk-item=""]',lr=`${so}:not([aria-disabled="true"])`,en="cmdk-item-select",Xs="data-value",sp=(s,e,a)=>Jf(s,e,a),to=m.createContext(void 0),Gt=()=>m.useContext(to),ao=m.createContext(void 0),jn=()=>m.useContext(ao),no=m.createContext(void 0),ro=m.forwardRef((s,e)=>{let a=Js(()=>{var p,j;return{search:"",value:(j=(p=s.value)!=null?p:s.defaultValue)!=null?j:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=Js(()=>new Set),r=Js(()=>new Map),i=Js(()=>new Map),o=Js(()=>new Set),l=io(s),{label:f,children:u,value:c,onValueChange:d,filter:b,shouldFilter:g,loop:D,disablePointerSelection:h=!1,vimBindings:y=!0,...x}=s,N=tt(),R=tt(),w=tt(),S=m.useRef(null),C=mp();Gs(()=>{if(c!==void 0){let p=c.trim();a.current.value=p,Z.emit()}},[c]),Gs(()=>{C(6,Ve)},[]);let Z=m.useMemo(()=>({subscribe:p=>(o.current.add(p),()=>o.current.delete(p)),snapshot:()=>a.current,setState:(p,j,P)=>{var U,K,re,Pe;if(!Object.is(a.current[p],j)){if(a.current[p]=j,p==="search")$(),G(),C(1,ae);else if(p==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let we=document.getElementById(w);we?we.focus():(U=document.getElementById(N))==null||U.focus()}if(C(7,()=>{var we;a.current.selectedItemId=(we=Ae())==null?void 0:we.id,Z.emit()}),P||C(5,Ve),((K=l.current)==null?void 0:K.value)!==void 0){let we=j??"";(Pe=(re=l.current).onValueChange)==null||Pe.call(re,we);return}}Z.emit()}},emit:()=>{o.current.forEach(p=>p())}}),[]),H=m.useMemo(()=>({value:(p,j,P)=>{var U;j!==((U=i.current.get(p))==null?void 0:U.value)&&(i.current.set(p,{value:j,keywords:P}),a.current.filtered.items.set(p,k(j,P)),C(2,()=>{G(),Z.emit()}))},item:(p,j)=>(n.current.add(p),j&&(r.current.has(j)?r.current.get(j).add(p):r.current.set(j,new Set([p]))),C(3,()=>{$(),G(),a.current.value||ae(),Z.emit()}),()=>{i.current.delete(p),n.current.delete(p),a.current.filtered.items.delete(p);let P=Ae();C(4,()=>{$(),P?.getAttribute("id")===p&&ae(),Z.emit()})}),group:p=>(r.current.has(p)||r.current.set(p,new Set),()=>{i.current.delete(p),r.current.delete(p)}),filter:()=>l.current.shouldFilter,label:f||s["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:N,inputId:w,labelId:R,listInnerRef:S}),[]);function k(p,j){var P,U;let K=(U=(P=l.current)==null?void 0:P.filter)!=null?U:sp;return p?K(p,a.current.search,j):0}function G(){if(!a.current.search||l.current.shouldFilter===!1)return;let p=a.current.filtered.items,j=[];a.current.filtered.groups.forEach(U=>{let K=r.current.get(U),re=0;K.forEach(Pe=>{let we=p.get(Pe);re=Math.max(we,re)}),j.push([U,re])});let P=S.current;Ke().sort((U,K)=>{var re,Pe;let we=U.getAttribute("id"),Kt=K.getAttribute("id");return((re=p.get(Kt))!=null?re:0)-((Pe=p.get(we))!=null?Pe:0)}).forEach(U=>{let K=U.closest(La);K?K.appendChild(U.parentElement===K?U:U.closest(`${La} > *`)):P.appendChild(U.parentElement===P?U:U.closest(`${La} > *`))}),j.sort((U,K)=>K[1]-U[1]).forEach(U=>{var K;let re=(K=S.current)==null?void 0:K.querySelector(`${xt}[${Xs}="${encodeURIComponent(U[0])}"]`);re?.parentElement.appendChild(re)})}function ae(){let p=Ke().find(P=>P.getAttribute("aria-disabled")!=="true"),j=p?.getAttribute(Xs);Z.setState("value",j||void 0)}function $(){var p,j,P,U;if(!a.current.search||l.current.shouldFilter===!1){a.current.filtered.count=n.current.size;return}a.current.filtered.groups=new Set;let K=0;for(let re of n.current){let Pe=(j=(p=i.current.get(re))==null?void 0:p.value)!=null?j:"",we=(U=(P=i.current.get(re))==null?void 0:P.keywords)!=null?U:[],Kt=k(Pe,we);a.current.filtered.items.set(re,Kt),Kt>0&&K++}for(let[re,Pe]of r.current)for(let we of Pe)if(a.current.filtered.items.get(we)>0){a.current.filtered.groups.add(re);break}a.current.filtered.count=K}function Ve(){var p,j,P;let U=Ae();U&&(((p=U.parentElement)==null?void 0:p.firstChild)===U&&((P=(j=U.closest(xt))==null?void 0:j.querySelector(ep))==null||P.scrollIntoView({block:"nearest"})),U.scrollIntoView({block:"nearest"}))}function Ae(){var p;return(p=S.current)==null?void 0:p.querySelector(`${so}[aria-selected="true"]`)}function Ke(){var p;return Array.from(((p=S.current)==null?void 0:p.querySelectorAll(lr))||[])}function ts(p){let j=Ke()[p];j&&Z.setState("value",j.getAttribute(Xs))}function cs(p){var j;let P=Ae(),U=Ke(),K=U.findIndex(Pe=>Pe===P),re=U[K+p];(j=l.current)!=null&&j.loop&&(re=K+p<0?U[U.length-1]:K+p===U.length?U[0]:U[K+p]),re&&Z.setState("value",re.getAttribute(Xs))}function gs(p){let j=Ae(),P=j?.closest(xt),U;for(;P&&!U;)P=p>0?up(P,xt):dp(P,xt),U=P?.querySelector(lr);U?Z.setState("value",U.getAttribute(Xs)):cs(p)}let Oe=()=>ts(Ke().length-1),as=p=>{p.preventDefault(),p.metaKey?Oe():p.altKey?gs(1):cs(1)},Ee=p=>{p.preventDefault(),p.metaKey?ts(0):p.altKey?gs(-1):cs(-1)};return m.createElement(Ps.div,{ref:e,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:p=>{var j;(j=x.onKeyDown)==null||j.call(x,p);let P=p.nativeEvent.isComposing||p.keyCode===229;if(!(p.defaultPrevented||P))switch(p.key){case"n":case"j":{y&&p.ctrlKey&&as(p);break}case"ArrowDown":{as(p);break}case"p":case"k":{y&&p.ctrlKey&&Ee(p);break}case"ArrowUp":{Ee(p);break}case"Home":{p.preventDefault(),ts(0);break}case"End":{p.preventDefault(),Oe();break}case"Enter":{p.preventDefault();let U=Ae();if(U){let K=new Event(en);U.dispatchEvent(K)}}}}},m.createElement("label",{"cmdk-label":"",htmlFor:H.inputId,id:H.labelId,style:pp},f),Da(s,p=>m.createElement(ao.Provider,{value:Z},m.createElement(to.Provider,{value:H},p))))}),tp=m.forwardRef((s,e)=>{var a,n;let r=tt(),i=m.useRef(null),o=m.useContext(no),l=Gt(),f=io(s),u=(n=(a=f.current)==null?void 0:a.forceMount)!=null?n:o?.forceMount;Gs(()=>{if(!u)return l.item(r,o?.id)},[u]);let c=oo(r,i,[s.value,s.children,i],s.keywords),d=jn(),b=Ms(C=>C.value&&C.value===c.current),g=Ms(C=>u||l.filter()===!1?!0:C.search?C.filtered.items.get(r)>0:!0);m.useEffect(()=>{let C=i.current;if(!(!C||s.disabled))return C.addEventListener(en,D),()=>C.removeEventListener(en,D)},[g,s.onSelect,s.disabled]);function D(){var C,Z;h(),(Z=(C=f.current).onSelect)==null||Z.call(C,c.current)}function h(){d.setState("value",c.current,!0)}if(!g)return null;let{disabled:y,value:x,onSelect:N,forceMount:R,keywords:w,...S}=s;return m.createElement(Ps.div,{ref:Ct(i,e),...S,id:r,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!b,"data-disabled":!!y,"data-selected":!!b,onPointerMove:y||l.getDisablePointerSelection()?void 0:h,onClick:y?void 0:D},s.children)}),ap=m.forwardRef((s,e)=>{let{heading:a,children:n,forceMount:r,...i}=s,o=tt(),l=m.useRef(null),f=m.useRef(null),u=tt(),c=Gt(),d=Ms(g=>r||c.filter()===!1?!0:g.search?g.filtered.groups.has(o):!0);Gs(()=>c.group(o),[]),oo(o,l,[s.value,s.heading,f]);let b=m.useMemo(()=>({id:o,forceMount:r}),[r]);return m.createElement(Ps.div,{ref:Ct(l,e),...i,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},a&&m.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:u},a),Da(s,g=>m.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":a?u:void 0},m.createElement(no.Provider,{value:b},g))))}),np=m.forwardRef((s,e)=>{let{alwaysRender:a,...n}=s,r=m.useRef(null),i=Ms(o=>!o.search);return!a&&!i?null:m.createElement(Ps.div,{ref:Ct(r,e),...n,"cmdk-separator":"",role:"separator"})}),rp=m.forwardRef((s,e)=>{let{onValueChange:a,...n}=s,r=s.value!=null,i=jn(),o=Ms(u=>u.search),l=Ms(u=>u.selectedItemId),f=Gt();return m.useEffect(()=>{s.value!=null&&i.setState("search",s.value)},[s.value]),m.createElement(Ps.input,{ref:e,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":f.listId,"aria-labelledby":f.labelId,"aria-activedescendant":l,id:f.inputId,type:"text",value:r?s.value:o,onChange:u=>{r||i.setState("search",u.target.value),a?.(u.target.value)}})}),ip=m.forwardRef((s,e)=>{let{children:a,label:n="Suggestions",...r}=s,i=m.useRef(null),o=m.useRef(null),l=Ms(u=>u.selectedItemId),f=Gt();return m.useEffect(()=>{if(o.current&&i.current){let u=o.current,c=i.current,d,b=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let g=u.offsetHeight;c.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return b.observe(u),()=>{cancelAnimationFrame(d),b.unobserve(u)}}},[]),m.createElement(Ps.div,{ref:Ct(i,e),...r,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:f.listId},Da(s,u=>m.createElement("div",{ref:Ct(o,f.listInnerRef),"cmdk-list-sizer":""},u)))}),op=m.forwardRef((s,e)=>{let{open:a,onOpenChange:n,overlayClassName:r,contentClassName:i,container:o,...l}=s;return m.createElement(Sr,{open:a,onOpenChange:n},m.createElement(Br,{container:o},m.createElement(mn,{"cmdk-overlay":"",className:r}),m.createElement(fn,{"aria-label":s.label,"cmdk-dialog":"",className:i},m.createElement(ro,{ref:e,...l}))))}),lp=m.forwardRef((s,e)=>Ms(a=>a.filtered.count===0)?m.createElement(Ps.div,{ref:e,...s,"cmdk-empty":"",role:"presentation"}):null),cp=m.forwardRef((s,e)=>{let{progress:a,children:n,label:r="Loading...",...i}=s;return m.createElement(Ps.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":r},Da(s,o=>m.createElement("div",{"aria-hidden":!0},o)))}),Me=Object.assign(ro,{List:ip,Item:tp,Input:rp,Group:ap,Separator:np,Dialog:op,Empty:lp,Loading:cp});function up(s,e){let a=s.nextElementSibling;for(;a;){if(a.matches(e))return a;a=a.nextElementSibling}}function dp(s,e){let a=s.previousElementSibling;for(;a;){if(a.matches(e))return a;a=a.previousElementSibling}}function io(s){let e=m.useRef(s);return Gs(()=>{e.current=s}),e}var Gs=typeof window>"u"?m.useEffect:m.useLayoutEffect;function Js(s){let e=m.useRef();return e.current===void 0&&(e.current=s()),e}function Ms(s){let e=jn(),a=()=>s(e.snapshot());return m.useSyncExternalStore(e.subscribe,a,a)}function oo(s,e,a,n=[]){let r=m.useRef(),i=Gt();return Gs(()=>{var o;let l=(()=>{var u;for(let c of a){if(typeof c=="string")return c.trim();if(typeof c=="object"&&"current"in c)return c.current?(u=c.current.textContent)==null?void 0:u.trim():r.current}})(),f=n.map(u=>u.trim());i.value(s,l,f),(o=e.current)==null||o.setAttribute(Xs,l),r.current=l}),r}var mp=()=>{let[s,e]=m.useState(),a=Js(()=>new Map);return Gs(()=>{a.current.forEach(n=>n()),a.current=new Map},[s]),(n,r)=>{a.current.set(n,r),e({})}};function fp(s){let e=s.type;return typeof e=="function"?e(s.props):"render"in e?e.render(s.props):s}function Da({asChild:s,children:e},a){return s&&m.isValidElement(e)?m.cloneElement(fp(e),{ref:e.ref},a(e.props.children)):a(e)}var pp={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const lo=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Me,{ref:a,className:T("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/command.tsx",lineNumber:13,columnNumber:3},void 0));lo.displayName=Me.displayName;const hp=m.forwardRef(({className:s,...e},a)=>t.jsxDEV("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[t.jsxDEV(ta,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/command.tsx",lineNumber:41,columnNumber:5},void 0),t.jsxDEV(Me.Input,{ref:a,className:T("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/command.tsx",lineNumber:42,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/command.tsx",lineNumber:40,columnNumber:3},void 0));hp.displayName=Me.Input.displayName;const co=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Me.List,{ref:a,className:T("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/command.tsx",lineNumber:59,columnNumber:3},void 0));co.displayName=Me.List.displayName;const Np=m.forwardRef((s,e)=>t.jsxDEV(Me.Empty,{ref:e,className:"py-6 text-center text-sm",...s},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/command.tsx",lineNumber:72,columnNumber:3},void 0));Np.displayName=Me.Empty.displayName;const sn=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Me.Group,{ref:a,className:T("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/command.tsx",lineNumber:85,columnNumber:3},void 0));sn.displayName=Me.Group.displayName;const bp=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Me.Separator,{ref:a,className:T("-mx-1 h-px bg-border",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/command.tsx",lineNumber:101,columnNumber:3},void 0));bp.displayName=Me.Separator.displayName;const tn=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Me.Item,{ref:a,className:T("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/command.tsx",lineNumber:113,columnNumber:3},void 0));tn.displayName=Me.Item.displayName;const gp=Io,xp=qo,uo=m.forwardRef(({className:s,align:e="center",sideOffset:a=4,...n},r)=>t.jsxDEV(Lo,{children:t.jsxDEV(_r,{ref:r,align:e,sideOffset:a,className:T("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...n},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/popover.tsx",lineNumber:15,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/popover.tsx",lineNumber:14,columnNumber:3},void 0));uo.displayName=_r.displayName;function yp(s,e=!0){return Re({queryKey:["bus-stops",s],queryFn:async()=>{let a="/api/bus-stops";s&&(a=`/api/bus-stops/search?q=${encodeURIComponent(s)}`);const n=await fetch(a);if(!n.ok)throw new Error("Failed to fetch bus stops");return n.json()},enabled:e&&(s===void 0||s.length>=2)})}function kp(s){return Re({queryKey:["locations",s],queryFn:async()=>{if(!s||s.length<2)return[];const e=await Ie(`/api/locations/search?q=${encodeURIComponent(s)}`);if(!e.ok)throw new Error("Failed to fetch locations");return e.json()},enabled:s.length>=2,staleTime:3600*1e3})}function vp(s,e){const[a,n]=m.useState(s);return m.useEffect(()=>{const r=setTimeout(()=>{n(s)},e);return()=>{clearTimeout(r)}},[s,e]),a}function pa({value:s,onChange:e,onLocationSelect:a,placeholder:n="Select location...",className:r}){const[i,o]=m.useState(!1),[l,f]=m.useState(s),[u,c]=m.useState(!1),d=vp(l,400),b=d.length>=2,{data:g=[],isLoading:D}=yp(d,b),{data:h=[],isLoading:y}=kp(b?d:""),x=D||y;m.useEffect(()=>{f(s)},[s]);const N=w=>{const S=w.target.value;f(S),e(S),c(!1),o(!0)},R=()=>{u||o(!0)};return t.jsxDEV("div",{className:"relative w-full",children:t.jsxDEV(gp,{open:i,onOpenChange:o,modal:!1,children:[t.jsxDEV(xp,{asChild:!0,children:t.jsxDEV(O,{type:"text",autoComplete:"off",value:l,onChange:N,onFocus:R,onBlur:()=>c(!1),placeholder:n,className:T("w-full transition-all font-medium rounded-xl h-14",!r&&"bg-slate-50 border border-slate-200 text-slate-800 placeholder:text-slate-400 focus:border-blue-500 focus:ring-blue-500",r)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:77,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:76,columnNumber:17},this),t.jsxDEV(uo,{className:"p-0 w-[--radix-popover-trigger-width] border-none rounded-2xl shadow-2xl overflow-hidden z-[9999]",align:"start",sideOffset:8,onOpenAutoFocus:w=>w.preventDefault(),children:t.jsxDEV(lo,{shouldFilter:!1,className:"bg-white",children:t.jsxDEV(co,{className:"max-h-[350px] overflow-y-auto custom-scrollbar",children:[x&&t.jsxDEV("div",{className:"py-6 flex items-center justify-center text-slate-400 gap-3",children:[t.jsxDEV("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:103,columnNumber:37},this),t.jsxDEV("span",{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:"Searching..."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:104,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:102,columnNumber:33},this),!x&&!(g.length>0||h.length>0)&&d.length>=2&&t.jsxDEV("div",{className:"py-10 text-center text-slate-500 px-6",children:[t.jsxDEV("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-3",children:t.jsxDEV($s,{className:"w-6 h-6 text-slate-200"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:111,columnNumber:41},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:110,columnNumber:37},this),t.jsxDEV("p",{className:"text-sm font-black text-slate-800",children:"No matching places found"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:113,columnNumber:37},this),t.jsxDEV("p",{className:"text-[10px] text-slate-400 mt-1 uppercase tracking-tight font-bold",children:"Try typing a city name or landmark"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:114,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:109,columnNumber:33},this),g.length>0&&t.jsxDEV(sn,{heading:"Terminals & Stations",className:"px-2 pt-2",children:g.map(w=>t.jsxDEV(tn,{value:w.name,onSelect:()=>{const S=w.name;f(S),e(S),a&&a({name:S,lat:w.location?.lat,lng:w.location?.lng}),c(!0),o(!1)},className:"cursor-pointer aria-selected:bg-blue-50 aria-selected:text-blue-700 hover:bg-slate-50 rounded-xl p-3 flex items-center transition-all border-b border-slate-50 last:border-0 group",children:t.jsxDEV("div",{className:"flex flex-col flex-1",children:[t.jsxDEV("div",{className:"flex items-center justify-between",children:[t.jsxDEV("span",{className:"font-black text-slate-800 group-hover:text-blue-700 transition-colors",children:w.name},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:145,columnNumber:53},this),t.jsxDEV(ps,{className:"h-4 w-4 text-blue-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:146,columnNumber:53},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:144,columnNumber:49},this),t.jsxDEV("div",{className:"flex items-center gap-2 mt-1",children:t.jsxDEV("div",{className:"px-2 py-0.5 bg-blue-50 text-blue-600 rounded-md text-[10px] font-black uppercase tracking-wider",children:w.city||"Ghana"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:149,columnNumber:53},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:148,columnNumber:49},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:143,columnNumber:45},this)},`stop-${w._id}`,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:124,columnNumber:41},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:122,columnNumber:33},this),h.length>0&&t.jsxDEV(sn,{heading:"Nearby Places",className:"p-2",children:h.map((w,S)=>t.jsxDEV(tn,{value:w.address,onSelect:()=>{const C=w.title;f(C),e(C),a&&a({name:C,lat:w.coordinates.lat,lng:w.coordinates.lng}),c(!0),o(!1)},className:"cursor-pointer aria-selected:bg-blue-50 aria-selected:text-blue-700 hover:bg-slate-50 rounded-xl p-3 flex items-center transition-all group",children:t.jsxDEV("div",{className:"flex flex-col flex-1",children:[t.jsxDEV("div",{className:"flex items-center justify-between",children:[t.jsxDEV("span",{className:"font-bold text-slate-700 group-hover:text-blue-600 transition-colors",children:w.title},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:184,columnNumber:53},this),t.jsxDEV($s,{className:"h-4 w-4 text-slate-300"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:185,columnNumber:53},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:183,columnNumber:49},this),t.jsxDEV("span",{className:"text-[10px] text-slate-400 line-clamp-1",children:w.address},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:187,columnNumber:49},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:182,columnNumber:45},this)},`loc-${S}`,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:163,columnNumber:41},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:161,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:100,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:99,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:93,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:75,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/LocationAutocomplete.tsx",lineNumber:74,columnNumber:9},this)}function ha({editData:s,onSuccess:e}){const{user:a}=Ce(),{toast:n}=be(),[r,i]=m.useState(!1),[o,l]=m.useState({startLocation:"",endLocation:"",startCoords:null,endCoords:null,departureTime:""}),[f,u]=m.useState(!1),[c,d]=m.useState(null),[b,g]=m.useState(!1);m.useEffect(()=>{if(r)if(s){const h=s.startLocation||s.route?.startLocation||"",y=s.endLocation||s.route?.endLocation||"";let x="";if(s.departureTime)try{x=wt(new Date(s.departureTime),"yyyy-MM-dd'T'HH:mm")}catch{console.error("Invalid date in editData",s.departureTime)}l({startLocation:h,endLocation:y,startCoords:s.route?.coordinates?.start||null,endCoords:s.route?.coordinates?.end||null,departureTime:x}),s.price&&d({price:s.price,distance:s.distance||0,duration:s.duration||0})}else l({startLocation:"",endLocation:"",startCoords:null,endCoords:null,departureTime:""}),d(null)},[r,s]),m.useEffect(()=>{const y=setTimeout(async()=>{if(!o.startLocation||!o.endLocation){d(null);return}g(!0);try{const x=await Ie("/api/fare/estimate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startLocation:o.startLocation,endLocation:o.endLocation,startCoords:o.startCoords,endCoords:o.endCoords})});if(x.ok){const N=await x.json();d({price:N.pricePerSeat,distance:N.distance,duration:N.duration})}}catch(x){x instanceof Us?(n({title:"Session Expired",description:"Please log in again to continue.",variant:"destructive"}),i(!1)):console.error("Failed to fetch fare estimate:",x)}finally{g(!1)}},500);return()=>clearTimeout(y)},[o.startLocation,o.endLocation,o.startCoords,o.endCoords,n]);const D=async()=>{if(!o.startLocation||!o.endLocation||!o.departureTime){n({title:"Validation Error",description:"Please fill all fields",variant:"destructive"});return}u(!0);try{const h=!!s,y=s?._id||s?.id,x=h?`/api/schedules/${y}`:"/api/schedules",N=await Ie(x,{method:h?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startLocation:o.startLocation,endLocation:o.endLocation,startCoords:o.startCoords,endCoords:o.endCoords,departureTime:new Date(o.departureTime).toISOString(),driverId:a?._id})});if(!N.ok){const w=await N.json().catch(()=>({}));throw new Error(w.message||"Failed to save route")}const R=await N.json();n({title:h?"Route Updated":"Route Created Successfully",description:`Fare: GHS ${R.price?.toFixed(2)||c?.price?.toFixed(2)||"calculated"} per seat`}),i(!1),e?.()}catch(h){h instanceof Us?n({title:"Session Expired",description:"Please log in again to continue.",variant:"destructive"}):n({title:"Error",description:h.message,variant:"destructive"})}finally{u(!1)}};return t.jsxDEV(An,{open:r,onOpenChange:i,children:[t.jsxDEV(En,{asChild:!0,children:s?t.jsxDEV(A,{className:"w-full h-14 bg-blue-600 hover:bg-blue-700 rounded-2xl font-black text-lg text-white shadow-lg shadow-blue-900/10 active:scale-[0.98] transition-all gap-3",children:[t.jsxDEV(Tr,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:191,columnNumber:25},this),"Edit"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:190,columnNumber:21},this):t.jsxDEV(A,{className:"bg-emerald-600 hover:bg-emerald-700 rounded-full px-6 font-bold text-white shadow-md",children:[t.jsxDEV(Rr,{className:"mr-2 h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:196,columnNumber:25},this)," Add New Route"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:195,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:188,columnNumber:13},this),t.jsxDEV(ka,{className:"rounded-[2.5rem] bg-white p-8 sm:max-w-[500px]",children:[t.jsxDEV(va,{children:[t.jsxDEV(Ca,{className:"text-2xl font-black text-slate-900",children:s?"Update Route":"Add New Route"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:202,columnNumber:21},this),t.jsxDEV(wn,{className:"text-slate-500",children:s?"Update your route details below":"Create a new route by filling out the details below"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:205,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:201,columnNumber:17},this),t.jsxDEV("div",{className:"space-y-5 mt-6",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{className:"font-bold text-slate-700 text-sm flex items-center gap-2",children:[t.jsxDEV("span",{className:"w-6 h-6 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center text-xs font-black",children:"1"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:214,columnNumber:29},this),"From (Departure)"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:213,columnNumber:25},this),t.jsxDEV(pa,{placeholder:"e.g. Accra Mall, Circle Station...",value:o.startLocation,onChange:h=>l({...o,startLocation:h,startCoords:null}),onLocationSelect:h=>{h.lat&&h.lng?l(y=>({...y,startLocation:h.name,startCoords:{lat:h.lat,lng:h.lng}})):l(y=>({...y,startLocation:h.name}))},className:"h-14 rounded-xl bg-slate-50 border border-slate-200 text-slate-800 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:217,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:212,columnNumber:21},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{className:"font-bold text-slate-700 text-sm flex items-center gap-2",children:[t.jsxDEV("span",{className:"w-6 h-6 bg-red-100 text-red-600 rounded-full flex items-center justify-center text-xs font-black",children:"2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:235,columnNumber:29},this),"To (Destination)"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:234,columnNumber:25},this),t.jsxDEV(pa,{placeholder:"e.g. Kumasi, Tema Station...",value:o.endLocation,onChange:h=>l({...o,endLocation:h,endCoords:null}),onLocationSelect:h=>{h.lat&&h.lng?l(y=>({...y,endLocation:h.name,endCoords:{lat:h.lat,lng:h.lng}})):l(y=>({...y,endLocation:h.name}))},className:"h-14 rounded-xl bg-slate-50 border border-slate-200 text-slate-800 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:238,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:233,columnNumber:21},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{className:"font-bold text-slate-700 text-sm flex items-center gap-2",children:[t.jsxDEV("span",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-black",children:"3"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:256,columnNumber:29},this),"Departure Time"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:255,columnNumber:25},this),t.jsxDEV(O,{type:"datetime-local",value:o.departureTime,onChange:h=>l({...o,departureTime:h.target.value}),className:"rounded-xl h-14 bg-slate-50 border border-slate-200 focus:border-emerald-500 focus:ring-emerald-500 transition-all font-medium text-slate-800"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:259,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:254,columnNumber:21},this),o.startLocation&&o.endLocation&&t.jsxDEV("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl p-4 border border-emerald-100",children:[t.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[t.jsxDEV(Mr,{className:"h-5 w-5 text-emerald-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:273,columnNumber:33},this),t.jsxDEV("span",{className:"font-bold text-slate-700",children:"Calculated Fare"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:274,columnNumber:33},this),t.jsxDEV(Tu,{children:[t.jsxDEV(Ru,{children:t.jsxDEV(Oo,{className:"h-4 w-4 text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:277,columnNumber:41},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:276,columnNumber:37},this),t.jsxDEV(Ai,{className:"max-w-xs",children:t.jsxDEV("p",{children:"Fare is automatically calculated based on distance, vehicle type, fuel costs, maintenance, and platform fees."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:280,columnNumber:41},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:279,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:275,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:272,columnNumber:29},this),b?t.jsxDEV("div",{className:"flex items-center gap-2 text-slate-500",children:[t.jsxDEV("div",{className:"animate-spin h-4 w-4 border-2 border-emerald-600 border-t-transparent rounded-full"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:286,columnNumber:37},this),t.jsxDEV("span",{children:"Calculating..."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:287,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:285,columnNumber:33},this):c?t.jsxDEV("div",{className:"space-y-1",children:[t.jsxDEV("div",{className:"flex items-baseline gap-2",children:[t.jsxDEV("span",{className:"text-2xl font-black text-emerald-700",children:["GHS ",c.price.toFixed(2)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:292,columnNumber:41},this),t.jsxDEV("span",{className:"text-slate-500",children:"per seat"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:295,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:291,columnNumber:37},this),t.jsxDEV("div",{className:"text-sm text-slate-500",children:["Est. ",c.distance," km | ~",c.duration," min"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:297,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:290,columnNumber:33},this):t.jsxDEV("span",{className:"text-slate-500",children:"Enter locations to see fare"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:302,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:271,columnNumber:25},this),t.jsxDEV(A,{onClick:D,disabled:f,className:"w-full h-14 bg-emerald-600 hover:bg-emerald-700 active:scale-[0.98] transition-all rounded-2xl font-bold text-lg mt-6 shadow-lg shadow-emerald-100 disabled:opacity-70 disabled:cursor-not-allowed text-white",children:f?t.jsxDEV(t.Fragment,{children:"Saving..."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:313,columnNumber:29},this):t.jsxDEV(t.Fragment,{children:[t.jsxDEV(Pr,{className:"mr-2 h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:315,columnNumber:31},this)," ",s?"Update Schedule":"Save Schedule"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:315,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:307,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:210,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:200,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RouteDialog.tsx",lineNumber:187,columnNumber:9},this)}function mo({scheduleId:s}){const[e,a]=m.useState(!1),[n,r]=m.useState(!1),i=m.useRef(null),o=m.useRef(null),l=m.useRef(null),f=m.useRef(0),u=5,c=m.useRef(null),d=m.useRef(null),{toast:b}=be(),g=()=>{o.current!==null&&(navigator.geolocation.clearWatch(o.current),o.current=null),l.current&&(clearTimeout(l.current),l.current=null),f.current=0;const y=localStorage.getItem("token");fetch(`/api/schedules/${s}/toggle-live`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify({isLive:!1})}).catch(x=>console.error("Visibility sync failed:",x)),a(!1),localStorage.removeItem(`tracking_active_${s}`),c.current&&c.current.release().then(()=>{c.current=null}),d.current&&(d.current.pause(),d.current=null),b({title:"Tracking Stopped",description:"You are now offline."})},D=()=>{if(!navigator.geolocation){b({title:"Error",description:"Geolocation is not supported by your browser.",variant:"destructive"});return}r(!0);const y=localStorage.getItem("token");fetch(`/api/schedules/${s}/toggle-live`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify({isLive:!0})}).catch(w=>console.error("Visibility sync failed:",w)),navigator.geolocation.getCurrentPosition(w=>{const{latitude:S,longitude:C}=w.coords;console.log("[TrackingToggle] Got initial location burst:",S,C),i.current?.readyState===WebSocket.OPEN&&i.current.send(JSON.stringify({type:"LOCATION_UPDATE",scheduleId:s,payload:{lat:S,lng:C}}))},w=>console.warn("[TrackingToggle] Initial location burst failed:",w),{enableHighAccuracy:!0,timeout:5e3});const N=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/tracking`,R=new WebSocket(N);if(R.onopen=()=>{i.current=R,o.current=navigator.geolocation.watchPosition(w=>{const{latitude:S,longitude:C}=w.coords;R.readyState===WebSocket.OPEN&&R.send(JSON.stringify({type:"LOCATION_UPDATE",scheduleId:s,payload:{lat:S,lng:C}}))},w=>{console.error("Geolocation error:",w),b({title:"Tracking Error",description:"Failed to get location. Please check permissions.",variant:"destructive"}),g()},{enableHighAccuracy:!0,maximumAge:1e4,timeout:5e3}),a(!0),r(!1),localStorage.getItem(`tracking_active_${s}`)||b({title:"Tracking Active",description:"Passengers can now see your live location."}),localStorage.setItem(`tracking_active_${s}`,"true")},R.onerror=w=>{console.error("WebSocket error:",w)},R.onclose=()=>{if(console.log("[TrackingToggle] WebSocket closed"),e&&f.current<u){const w=Math.min(1e3*Math.pow(2,f.current),1e4);console.log(`[TrackingToggle] Reconnecting in ${w}ms... (Attempt ${f.current+1})`),l.current=setTimeout(()=>{f.current++,D()},w)}else f.current>=u&&(b({title:"Connection Lost",description:"Tracking stopped after multiple reconnection attempts.",variant:"destructive"}),g())},"wakeLock"in navigator)try{navigator.wakeLock.request("screen").then(w=>{c.current=w,console.log("[TrackingToggle] Wake Lock acquired")})}catch(w){console.warn("[TrackingToggle] Wake Lock request failed:",w)}if(!d.current){const w=new Audio("data:audio/wav;base64,UklGRigAAABXQVZFRm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==");w.loop=!0,w.play().catch(S=>console.warn("[TrackingToggle] Audio play failed (needs interaction):",S)),d.current=w}},h=()=>{e?g():D()};return m.useEffect(()=>{localStorage.getItem(`tracking_active_${s}`)==="true"&&D();const x=setInterval(()=>{if(localStorage.getItem(`tracking_active_${s}`)==="true"){const w=i.current&&i.current.readyState===WebSocket.OPEN,S=o.current!==null;(!w||!S)&&(console.log("[TrackingToggle] Background self-healing triggered. Restarting tracking..."),D())}},1e3),N=async()=>{if(c.current!==null&&document.visibilityState==="visible")try{c.current=await navigator.wakeLock.request("screen"),console.log("[TrackingToggle] Wake Lock re-acquired")}catch(R){console.warn("[TrackingToggle] Wake Lock re-acquisition failed:",R)}};return document.addEventListener("visibilitychange",N),()=>{o.current!==null&&navigator.geolocation.clearWatch(o.current),i.current&&i.current.close(),l.current&&clearTimeout(l.current),clearInterval(x),document.removeEventListener("visibilitychange",N)}},[s]),t.jsxDEV(A,{onClick:h,disabled:n,variant:e?"destructive":"outline",size:"sm",className:`rounded-full gap-2 transition-all ${e?"animate-pulse":""}`,children:n?t.jsxDEV(se,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/TrackingToggle.tsx",lineNumber:238,columnNumber:17},this):e?t.jsxDEV(t.Fragment,{children:[t.jsxDEV(Fo,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/TrackingToggle.tsx",lineNumber:241,columnNumber:21},this)," Stop Live"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/TrackingToggle.tsx",lineNumber:240,columnNumber:17},this):t.jsxDEV(t.Fragment,{children:[t.jsxDEV(Dt,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/TrackingToggle.tsx",lineNumber:245,columnNumber:21},this)," Go Live"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/TrackingToggle.tsx",lineNumber:244,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/TrackingToggle.tsx",lineNumber:230,columnNumber:9},this)}const Cp=m.lazy(()=>pn(()=>import("./LiveMap-BNRl0C6z.js"),__vite__mapDeps([0,1,2,3,4,5]))),Dp=m.lazy(()=>pn(()=>import("./DriverMapView-Ba5f70C2.js"),__vite__mapDeps([6,1,2,3,4,5])));function Ap(){const{user:s,isLoading:e}=Ce(),[a,n]=m.useState(!1);return m.useEffect(()=>{n(!0)},[]),!a||e?t.jsxDEV("div",{className:"fixed inset-0 flex flex-col items-center justify-center bg-white z-50",children:[t.jsxDEV(se,{className:"h-10 w-10 animate-spin text-blue-600 mb-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:36,columnNumber:9},this),t.jsxDEV("p",{className:"text-slate-500 font-bold animate-pulse",children:"Loading Workspace..."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:37,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:35,columnNumber:7},this):s?s.role==="driver"?t.jsxDEV(Ep,{user:s},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:44,columnNumber:35},this):t.jsxDEV(wp,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:44,columnNumber:69},this):null}function Ep({user:s}){const{toast:e}=be(),{data:a=[],isLoading:n,refetch:r}=fa({driverId:s?._id}),[i,o]=m.useState(s?.isLive||!1),[l,f]=m.useState(!1),[u,c]=m.useState(null);m.useEffect(()=>{s&&o(!!s.isLive)},[s?.isLive]);const d=async()=>{f(!0);try{const x=localStorage.getItem("token"),N=await fetch("/api/driver/live-status",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({isLive:!i})});if(N.ok){const R=await N.json();o(R.isLive),e({title:R.isLive?"You are now Live!":"Broadcast Ended",description:R.isLive?"Passengers can now see and book your routes.":"Your routes are now hidden from search."})}else throw new Error("Failed to update status")}catch{e({title:"Error",description:"Could not update live status",variant:"destructive"})}finally{f(!1)}},b=async x=>{if(window.confirm("Delete this route forever?"))try{const N=localStorage.getItem("token");(await fetch(`/api/schedules/${x}`,{method:"DELETE",headers:{Authorization:`Bearer ${N}`}})).ok&&(e({title:"Route removed"}),r())}catch{e({title:"Error",variant:"destructive"})}},g=new Date;g.setHours(0,0,0,0);const D=a.filter(x=>{if(!x.departureTime)return!1;const N=new Date(x.departureTime);return N.setHours(0,0,0,0),N.getTime()===g.getTime()}),h=D.reduce((x,N)=>x+(N.capacity-(N.availableSeats??N.capacity)),0),y=D.reduce((x,N)=>{const R=N.capacity-(N.availableSeats??N.capacity);return x+R*(N.price||0)},0);return t.jsxDEV("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-950 pt-16 px-3 pb-20 md:pt-20 md:px-4 md:pb-12 transition-colors",children:t.jsxDEV("div",{className:"max-w-7xl mx-auto space-y-4 md:space-y-6",children:[t.jsxDEV("div",{className:"bg-slate-900 rounded-2xl md:rounded-[2rem] shadow-xl overflow-hidden text-white p-4 md:p-6",children:[t.jsxDEV("div",{className:"flex flex-col md:flex-row justify-between items-center gap-3 md:gap-4 text-center md:text-left",children:[t.jsxDEV("div",{children:[t.jsxDEV("h1",{className:"text-xl md:text-2xl font-black tracking-tight",children:"Driver Hub"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:134,columnNumber:15},this),t.jsxDEV("p",{className:"text-slate-400 mt-1 text-sm",children:["Welcome back, ",t.jsxDEV("span",{className:"text-emerald-400 font-bold",children:s?.firstName},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:136,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:135,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:133,columnNumber:13},this),t.jsxDEV("div",{className:"flex flex-wrap justify-center gap-2 md:gap-3",children:[a.length===0&&t.jsxDEV(ha,{onSuccess:()=>r()},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:141,columnNumber:17},this),t.jsxDEV(A,{size:"sm",variant:i?"destructive":"secondary",className:`rounded-full font-bold px-4 h-10 shadow-lg transition-all text-sm ${l?"opacity-50 cursor-not-allowed":""}`,onClick:d,disabled:l,children:[t.jsxDEV(Dt,{className:`mr-1.5 h-4 w-4 ${i?"animate-pulse":""}`},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:150,columnNumber:17},this),l?"Updating...":i?"End Trip":"Go Live"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:143,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:139,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:132,columnNumber:11},this),t.jsxDEV("div",{className:"mt-4 md:mt-6 grid grid-cols-2 lg:grid-cols-4 gap-2 md:gap-3",children:[t.jsxDEV(Zt,{label:"Live Status",value:i?"BROADCASTING":"OFFLINE",active:i},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:157,columnNumber:13},this),t.jsxDEV(Zt,{label:"Daily Earnings",value:`GHS ${y.toFixed(2)}`,variant:"emerald"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:158,columnNumber:13},this),t.jsxDEV(Zt,{label:"Today's Bookings",value:h.toString()},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:159,columnNumber:13},this),t.jsxDEV(Zt,{label:"Active Fleet",value:`${a.length} Routes`},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:160,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:156,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:131,columnNumber:9},this),t.jsxDEV("div",{className:"space-y-3 md:space-y-4",children:[t.jsxDEV("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-2 px-1",children:[t.jsxDEV("h2",{className:"text-lg md:text-xl font-black text-slate-800 dark:text-slate-100 uppercase tracking-tight",children:"Active Operation"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:167,columnNumber:13},this),t.jsxDEV("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest bg-slate-100 dark:bg-slate-900 px-3 py-1.5 rounded-full border border-slate-200 dark:border-slate-800",children:a.length>0?"Managing 1 Active Route":"No Active Routes"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:168,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:166,columnNumber:11},this),t.jsxDEV("div",{className:"max-w-4xl mx-auto",children:n?t.jsxDEV("div",{className:"py-12 flex justify-center",children:t.jsxDEV(se,{className:"animate-spin text-blue-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:174,columnNumber:58},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:174,columnNumber:15},this):a.length>0?a.map(x=>t.jsxDEV(ee,{className:"rounded-xl md:rounded-2xl p-4 md:p-5 border-none shadow-xl dark:shadow-slate-900 transition-all group bg-white dark:bg-slate-900 relative border border-slate-100 dark:border-slate-800",children:[t.jsxDEV("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 mb-4 border-b border-slate-50 dark:border-slate-800 pb-4",children:[t.jsxDEV("div",{className:"flex items-center gap-3",children:[t.jsxDEV("div",{className:"p-3 bg-blue-600 rounded-xl text-white shadow-lg shadow-blue-900/20",children:t.jsxDEV(ps,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:182,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:181,columnNumber:23},this),t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"font-black text-xl md:text-2xl text-slate-900 dark:text-white",children:["GHS ",x.price?.toFixed(2)||"0.00"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:185,columnNumber:25},this),t.jsxDEV("div",{className:"text-[10px] font-black text-blue-600 uppercase tracking-widest mt-0.5",children:"Base Price / Seat"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:186,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:184,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:180,columnNumber:21},this),t.jsxDEV("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-800/50 p-2 rounded-xl border border-slate-100 dark:border-slate-700 shadow-inner",children:[t.jsxDEV("div",{className:`h-2 w-2 rounded-full ${i?"bg-emerald-500 animate-pulse":"bg-slate-300"}`},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:190,columnNumber:23},this),t.jsxDEV("span",{className:"font-black text-[10px] uppercase tracking-tighter text-slate-600 dark:text-slate-400",children:i?"Currently Live":"System Offline"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:191,columnNumber:23},this),t.jsxDEV(mo,{scheduleId:x._id||x.id},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:194,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:189,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:179,columnNumber:19},this),t.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsxDEV("div",{className:"space-y-2",children:t.jsxDEV("div",{className:"space-y-1",children:[t.jsxDEV("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Route Details"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:201,columnNumber:25},this),t.jsxDEV("div",{className:"font-black text-base md:text-lg text-slate-900 dark:text-white flex flex-col gap-1",children:[t.jsxDEV("div",{className:"flex items-center gap-2",children:[t.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-blue-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:204,columnNumber:29},this),x.startLocation||x.route?.startLocation]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:203,columnNumber:27},this),t.jsxDEV("div",{className:"h-3 border-l-2 border-dashed border-slate-200 dark:border-slate-700 ml-1"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:207,columnNumber:27},this),t.jsxDEV("div",{className:"flex items-center gap-2",children:[t.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-red-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:209,columnNumber:29},this),x.endLocation||x.route?.endLocation]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:208,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:202,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:200,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:199,columnNumber:21},this),t.jsxDEV("div",{className:"space-y-2",children:t.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxDEV("div",{className:"space-y-1",children:[t.jsxDEV("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Departure"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:219,columnNumber:27},this),t.jsxDEV("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-200 font-black text-base",children:[t.jsxDEV(hs,{className:"h-4 w-4 text-blue-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:221,columnNumber:29},this),ga(x.departureTime,"p")]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:220,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:218,columnNumber:25},this),t.jsxDEV("div",{className:"space-y-1",children:[t.jsxDEV("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Capacity"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:226,columnNumber:27},this),t.jsxDEV("div",{className:"flex items-center gap-2 font-black text-base",children:[t.jsxDEV(Is,{className:"h-4 w-4 text-emerald-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:228,columnNumber:29},this),t.jsxDEV("span",{className:x.availableSeats===0?"text-red-500":"text-emerald-600",children:[x.capacity-(x.availableSeats??x.capacity),"/",x.capacity||15]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:229,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:227,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:225,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:217,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:216,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:198,columnNumber:19},this),t.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 pt-4 border-t border-slate-50 dark:border-slate-800",children:[t.jsxDEV(A,{variant:u===(x._id||x.id)?"default":"outline",className:"rounded-xl font-black h-10 md:h-11 gap-2 text-sm transition-all active:scale-[0.98] shadow-md",onClick:()=>c(u===(x._id||x.id)?null:x._id||x.id),children:[t.jsxDEV(ba,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:245,columnNumber:23},this),u===(x._id||x.id)?"Hide Map":"View Live Map"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:240,columnNumber:21},this),t.jsxDEV("div",{className:"flex gap-2",children:[t.jsxDEV("div",{className:"flex-1",children:t.jsxDEV(ha,{editData:x,onSuccess:()=>r()},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:251,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:250,columnNumber:23},this),t.jsxDEV(A,{onClick:()=>b(x._id||x.id),variant:"destructive",className:"h-10 md:h-11 w-10 md:w-11 rounded-xl shadow-lg shadow-red-900/10 active:scale-95 transition-all",children:t.jsxDEV(Ks,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:258,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:253,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:249,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:239,columnNumber:19},this),t.jsxDEV(Lr,{children:u===(x._id||x.id)&&t.jsxDEV(Ir.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:400},exit:{opacity:0,height:0},transition:{height:{duration:.5,ease:[.4,0,.2,1]},opacity:{duration:.3,delay:.1}},className:"mt-4 pt-4 border-t border-slate-50 dark:border-slate-800 overflow-hidden",children:t.jsxDEV("div",{className:"h-[350px] md:h-[400px] w-full",children:t.jsxDEV(m.Suspense,{fallback:t.jsxDEV("div",{className:"h-full w-full bg-slate-100 dark:bg-slate-800 rounded-2xl animate-pulse flex items-center justify-center",children:t.jsxDEV(se,{className:"animate-spin text-blue-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:276,columnNumber:168},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:276,columnNumber:47},this),children:t.jsxDEV(Dp,{scheduleId:x._id||x.id,startLocation:x.startLocation||x.route?.startLocation,endLocation:x.endLocation||x.route?.endLocation,isTracking:i},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:277,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:276,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:275,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:265,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:263,columnNumber:19},this)]},x._id||x.id,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:177,columnNumber:17},this)):t.jsxDEV("div",{className:"py-16 md:py-20 text-center bg-white dark:bg-slate-900 rounded-2xl border-2 border-dashed border-slate-200 dark:border-slate-800 shadow-inner",children:[t.jsxDEV("div",{className:"w-14 h-14 bg-slate-50 dark:bg-slate-800/50 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsxDEV(ps,{className:"h-7 w-7 text-slate-300 dark:text-slate-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:293,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:292,columnNumber:17},this),t.jsxDEV("h3",{className:"text-base font-black text-slate-800 dark:text-white mb-1",children:"No Active Routes"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:295,columnNumber:17},this),t.jsxDEV("p",{className:"text-slate-400 font-bold text-sm max-w-sm mx-auto",children:"Create your first journey to begin broadcasting."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:296,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:291,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:172,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:165,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:129,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:128,columnNumber:5},this)}function wp(){const{toast:s}=be(),{user:e}=Ce(),[a,n]=m.useState({from:"",to:"",date:"",seats:1,departureTime:wt(new Date,"yyyy-MM-dd'T'HH:mm"),query:""}),[r,i]=m.useState(!1),o=a.from||a.to||a.query,{data:l=[],isLoading:f,refetch:u}=fa(o?{from:a.from,to:a.to,date:a.date,query:a.query}:void 0),{data:c=[],isLoading:d}=fa(),b=c.filter(p=>p.driver?.isLive===!0),{data:g=[],isLoading:D}=Hi(),h=Of(),[y,x]=m.useState(null),[N,R]=m.useState(null),[w,S]=m.useState(""),[C,Z]=m.useState(""),[H,k]=m.useState(null),[G,ae]=m.useState(!1),[$,Ve]=m.useState(!1),[Ae,Ke]=m.useState(null),[ts,cs]=m.useState(!1);m.useEffect(()=>{y&&w&&C&&(async()=>{ae(!0);try{const j=l.find(U=>String(U._id||U.id)===String(y)),P=await Ie("/api/fare/calculate",{method:"POST",body:JSON.stringify({startLocation:w,endLocation:C,vehicleParams:j?.driver?.vehicle,capacity:j?.capacity})});if(P.ok){const U=await P.json();k(U.pricePerSeat)}}catch(j){console.error("Fare calc error:",j)}finally{ae(!1)}})()},[y,w,C,l]),m.useEffect(()=>{if(y){const p=l.find(j=>String(j._id||j.id)===String(y));if(p){const j=Array.isArray(p.stops)?p.stops:[],P=j.some(K=>K.name===a.from),U=j.some(K=>K.name===a.to);S(P?a.from:p.startLocation||p.route?.startLocation),Z(U?a.to:p.endLocation||p.route?.endLocation),k(null)}}else S(""),Z(""),k(null)},[y,a,l]),m.useEffect(()=>{const j=setTimeout(async()=>{if(!a.from||!a.to){Ke(null);return}cs(!0);try{const P=await Ie("/api/fare/estimate",{method:"POST",body:JSON.stringify({startLocation:a.from,endLocation:a.to})});if(P.ok){const U=await P.json();Ke({price:U.pricePerSeat,distance:U.distance})}}catch(P){console.error("Failed to fetch fare preview:",P)}finally{cs(!1)}},500);return()=>clearTimeout(j)},[a.from,a.to]);const gs=()=>{i(!0),u()},Oe=async p=>{try{await h.mutateAsync({scheduleId:p,seatNumber:0,pickup:w,dropoff:C,price:H,status:"confirmed"}),s({title:"Booking Confirmed!",description:"Your seat has been reserved.",duration:5e3}),x(null),u()}catch(j){s({title:"Booking Failed",description:j.message,variant:"destructive"})}},as=p=>{const j=N?._id||N?.id,P=p._id||p.id;j&&String(j)===String(P)?R(null):(R(p),setTimeout(()=>{const U=document.getElementById("live-map-section");U&&U.scrollIntoView({behavior:"smooth"})},100))},Ee=async()=>{if(!a.from||!a.to){s({title:"Please enter from and to locations",variant:"destructive"});return}Ve(!0);try{const p=await Ie("/api/ride-requests",{method:"POST",body:JSON.stringify({from:a.from,to:a.to,seats:a.seats,departureTime:a.departureTime})});if(p.ok){const j=await p.json(),P=j.notifiedCount||0,U=j.estimatedFare?`GHS ${Number(j.estimatedFare).toFixed(2)}/seat`:"",K=j.estimatedDistance?`${j.estimatedDistance}km`:"",re=U?`  Est. fare: ${U}${K?` (${K})`:""}`:"";P>0?s({title:"Request Sent!",description:`Notified ${P} driver${P>1?"s":""} on this route.${re}`}):s({title:"Request Saved",description:`No drivers currently on this route. Your request has been saved.${re}`})}else{const j=await p.json().catch(()=>({message:"Failed to send request"}));throw new Error(j.message||j.error||"Failed to send request")}}catch(p){console.error("Ride request error:",p),s({title:"Error",description:p.message||"Could not send request",variant:"destructive"})}finally{Ve(!1)}};return t.jsxDEV("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-950 pt-16 px-3 pb-20 md:pt-20 md:px-4 md:pb-12 transition-colors",children:t.jsxDEV("div",{className:"max-w-7xl mx-auto space-y-4 md:space-y-6",children:[t.jsxDEV("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-2xl md:rounded-[2rem] shadow-xl text-white p-4 md:p-8",children:[t.jsxDEV("div",{className:"text-center md:text-left mb-4",children:[t.jsxDEV("h1",{className:"text-2xl md:text-3xl font-black tracking-tight",children:"Find Your Ride"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:521,columnNumber:13},this),t.jsxDEV("p",{className:"text-blue-200 mt-1 text-sm md:text-base",children:["Welcome back, ",t.jsxDEV("span",{className:"text-white font-bold",children:e?.firstName},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:523,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:522,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:520,columnNumber:11},this),t.jsxDEV("div",{className:"w-full relative group mb-4",children:[t.jsxDEV("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsxDEV(ta,{className:"h-4 w-4 text-blue-300 group-focus-within:text-white transition-colors"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:530,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:529,columnNumber:13},this),t.jsxDEV(O,{placeholder:"Quick find by bus or stop...",value:a.query,onChange:p=>{n({...a,query:p.target.value}),i(!0)},onKeyDown:p=>p.key==="Enter"&&gs(),className:"h-10 md:h-12 pl-10 rounded-xl bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder:text-blue-200/60 focus:bg-white/20 focus:ring-2 focus:ring-white/30 transition-all font-medium text-sm"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:532,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:528,columnNumber:11},this),t.jsxDEV("div",{className:"bg-emerald-500/10 backdrop-blur-md rounded-xl md:rounded-2xl p-4 md:p-6 border border-emerald-500/20",children:[t.jsxDEV("div",{className:"flex items-center gap-2 mb-4 border-b border-emerald-500/10 pb-3",children:[t.jsxDEV("div",{className:"p-2 bg-emerald-500 rounded-xl text-white shadow-lg shadow-emerald-900/40",children:t.jsxDEV(Dt,{className:"h-4 w-4 md:h-5 md:w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:548,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:547,columnNumber:15},this),t.jsxDEV("div",{children:[t.jsxDEV("h3",{className:"font-black uppercase tracking-wider text-xs text-emerald-100",children:"Trip & Notify"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:551,columnNumber:17},this),t.jsxDEV("p",{className:"text-emerald-200/60 text-[10px] font-bold hidden md:block",children:"Find rides or broadcast demand"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:552,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:550,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:546,columnNumber:13},this),t.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-3 items-end",children:[t.jsxDEV("div",{className:"lg:col-span-5 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxDEV("div",{className:"space-y-1 text-left",children:[t.jsxDEV("label",{className:"text-[10px] font-black uppercase text-emerald-200/60 ml-2",children:"From"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:560,columnNumber:19},this),t.jsxDEV(pa,{placeholder:"Starting point",value:a.from,onChange:p=>n({...a,from:p}),className:"h-11 md:h-12 rounded-xl bg-white border-none text-slate-800 placeholder:text-slate-400 font-bold shadow-lg text-sm"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:561,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:559,columnNumber:17},this),t.jsxDEV("div",{className:"space-y-1 text-left",children:[t.jsxDEV("label",{className:"text-[10px] font-black uppercase text-emerald-200/60 ml-2",children:"To"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:569,columnNumber:19},this),t.jsxDEV(pa,{placeholder:"Destination",value:a.to,onChange:p=>n({...a,to:p}),className:"h-11 md:h-12 rounded-xl bg-white border-none text-slate-800 placeholder:text-slate-400 font-bold shadow-lg text-sm"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:570,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:568,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:558,columnNumber:15},this),t.jsxDEV("div",{className:"lg:col-span-4 grid grid-cols-2 gap-3",children:[t.jsxDEV("div",{className:"space-y-1 text-left",children:[t.jsxDEV("label",{className:"text-[10px] font-black uppercase text-emerald-200/60 ml-2",children:"Seats"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:582,columnNumber:19},this),t.jsxDEV(O,{type:"number",min:"1",value:a.seats,onChange:p=>n({...a,seats:parseInt(p.target.value)||1}),className:"h-11 md:h-12 rounded-xl bg-white border-none text-slate-800 font-bold shadow-lg text-center text-base"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:583,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:581,columnNumber:17},this),t.jsxDEV("div",{className:"space-y-1 text-left",children:[t.jsxDEV("label",{className:"text-[10px] font-black uppercase text-emerald-200/60 ml-2",children:"Time"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:592,columnNumber:19},this),t.jsxDEV(O,{type:"datetime-local",value:a.departureTime,onChange:p=>n({...a,departureTime:p.target.value}),className:"h-11 md:h-12 rounded-xl bg-white border-none text-slate-800 font-bold shadow-lg text-sm pr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:593,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:591,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:580,columnNumber:15},this),t.jsxDEV("div",{className:"lg:col-span-3 flex flex-col gap-2",children:[a.from&&a.to&&t.jsxDEV("div",{className:"bg-white/90 backdrop-blur rounded-xl p-2 text-center",children:ts?t.jsxDEV("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[t.jsxDEV(se,{className:"h-3 w-3 animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:609,columnNumber:25},this),t.jsxDEV("span",{className:"text-xs font-medium",children:"Calculating..."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:610,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:608,columnNumber:23},this):Ae?t.jsxDEV("div",{className:"flex items-center justify-center gap-2",children:[t.jsxDEV("span",{className:"text-sm font-black text-emerald-700",children:["GHS ",Ae.price.toFixed(2)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:614,columnNumber:25},this),t.jsxDEV("span",{className:"text-[10px] text-slate-400",children:[Ae.distance,"km"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:617,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:613,columnNumber:23},this):null},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:606,columnNumber:19},this),t.jsxDEV(A,{onClick:Ee,disabled:$,className:"w-full h-11 md:h-12 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl font-black shadow-xl shadow-emerald-900/40 transition-all active:scale-[0.98] disabled:opacity-50 text-sm",children:$?t.jsxDEV(se,{className:"animate-spin h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:627,columnNumber:41},this):t.jsxDEV(t.Fragment,{children:[t.jsxDEV(Ln,{className:"mr-1.5 h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:628,columnNumber:23},this)," Notify Drivers"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:628,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:622,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:603,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:556,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:545,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:519,columnNumber:9},this),g.filter(p=>p.status==="confirmed").length>0&&t.jsxDEV("div",{className:"space-y-3",children:[t.jsxDEV("div",{className:"flex items-center justify-between px-1",children:[t.jsxDEV("h2",{className:"text-lg md:text-xl font-black text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[t.jsxDEV(js,{className:"h-5 w-5 text-blue-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:641,columnNumber:17},this),"Active Tickets"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:640,columnNumber:15},this),t.jsxDEV(Ne,{href:"/my-rides",className:"text-xs font-bold text-blue-600 hover:underline",children:"View History"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:644,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:639,columnNumber:13},this),t.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:g.filter(p=>p.status==="confirmed").slice(0,3).map(p=>{const j=p.schedule,P=j?.isLive||j?.driver?.isLive;return t.jsxDEV(ee,{className:"rounded-xl md:rounded-2xl p-4 border-none shadow-md bg-white dark:bg-slate-900 overflow-hidden relative group",children:[P&&t.jsxDEV("div",{className:"absolute top-0 right-0 px-3 py-0.5 bg-emerald-500 text-white text-[9px] font-black uppercase tracking-widest rounded-bl-xl",children:"Live Now"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:655,columnNumber:23},this),t.jsxDEV("div",{className:"flex items-center gap-2.5 mb-3",children:[t.jsxDEV("div",{className:`p-2.5 rounded-lg ${P?"bg-emerald-50 text-emerald-600":"bg-blue-50 text-blue-600"}`,children:t.jsxDEV(ps,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:662,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:661,columnNumber:23},this),t.jsxDEV("div",{className:"min-w-0",children:[t.jsxDEV("div",{className:"font-bold text-sm text-slate-900 dark:text-white line-clamp-1",children:[p.pickup||j?.route?.startLocation,"  ",p.dropoff||j?.route?.endLocation]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:665,columnNumber:25},this),t.jsxDEV("div",{className:"text-[9px] font-black text-slate-400 uppercase",children:["Seat #",p.seatNumber]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:668,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:664,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:660,columnNumber:21},this),t.jsxDEV("div",{className:"grid grid-cols-2 gap-3 mb-3 p-2.5 bg-slate-50 dark:bg-slate-800/50 rounded-xl",children:[t.jsxDEV("div",{className:"space-y-0.5",children:[t.jsxDEV("span",{className:"text-[9px] font-black text-slate-400 uppercase",children:"Time"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:674,columnNumber:25},this),t.jsxDEV("div",{className:"text-xs font-black text-slate-700 dark:text-slate-200",children:ga(j?.departureTime,"p")},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:675,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:673,columnNumber:23},this),t.jsxDEV("div",{className:"space-y-0.5",children:[t.jsxDEV("span",{className:"text-[9px] font-black text-slate-400 uppercase",children:"Driver"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:680,columnNumber:25},this),t.jsxDEV("div",{className:"text-xs font-black text-slate-700 dark:text-slate-200 truncate",children:j?.driver?.firstName||"Assigning..."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:681,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:679,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:672,columnNumber:21},this),t.jsxDEV(A,{onClick:()=>as(j),disabled:!P,size:"sm",className:`w-full h-9 rounded-lg font-bold text-xs ${P?"bg-blue-600 hover:bg-blue-700":"bg-slate-100 text-slate-400"}`,children:[t.jsxDEV(ba,{className:"mr-1.5 h-3.5 w-3.5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:693,columnNumber:23},this),P?"Track Live":"Not Started"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:687,columnNumber:21},this)]},p._id,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:653,columnNumber:19},this)})},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:647,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:638,columnNumber:11},this),t.jsxDEV(Lr,{children:N&&t.jsxDEV(Ir.div,{initial:{height:0,opacity:0},animate:{height:420,opacity:1},exit:{height:0,opacity:0},transition:{height:{duration:.5,ease:[.4,0,.2,1]},opacity:{duration:.3,delay:.15}},id:"live-map-section",className:"scroll-mt-20 overflow-hidden",children:[t.jsxDEV("div",{className:"flex items-center justify-between mb-3 px-1",children:[t.jsxDEV("h2",{className:"text-lg md:text-xl font-black text-slate-800 dark:text-slate-100",children:"Live Tracking"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:718,columnNumber:17},this),t.jsxDEV("div",{className:"flex items-center gap-2",children:[t.jsxDEV("span",{className:"text-xs font-bold text-blue-600 bg-blue-50 dark:bg-blue-900/30 px-2.5 py-1 rounded-full animate-pulse line-clamp-1 max-w-[200px]",children:[N.route?.startLocation,"  ",N.route?.endLocation]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:720,columnNumber:19},this),t.jsxDEV(A,{variant:"ghost",size:"icon",onClick:()=>R(null),className:"h-7 w-7 rounded-full hover:bg-red-50 hover:text-red-500 transition-colors",children:t.jsxDEV(Bs,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:729,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:723,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:719,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:717,columnNumber:15},this),t.jsxDEV("div",{className:"h-[280px] md:h-[350px] w-full",children:t.jsxDEV(m.Suspense,{fallback:t.jsxDEV("div",{className:"h-full w-full bg-slate-100 dark:bg-slate-800 rounded-2xl animate-pulse"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:734,columnNumber:37},this),children:t.jsxDEV(Cp,{scheduleId:N._id||N.id},N._id||N.id,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:735,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:734,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:733,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:706,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:704,columnNumber:9},this),t.jsxDEV("div",{className:"space-y-3",children:[t.jsxDEV("div",{className:"flex items-center justify-between px-1",children:[t.jsxDEV("div",{className:"flex items-center gap-2",children:[t.jsxDEV("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-ping"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:746,columnNumber:15},this),t.jsxDEV("h2",{className:"text-lg md:text-xl font-black text-slate-800 dark:text-slate-100",children:"Live Routes Near You"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:747,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:745,columnNumber:13},this),t.jsxDEV("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-2.5 py-1 rounded-full",children:[b.length," active"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:749,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:744,columnNumber:11},this),d?t.jsxDEV("div",{className:"py-8 flex justify-center",children:t.jsxDEV(se,{className:"animate-spin h-6 w-6 text-emerald-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:756,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:755,columnNumber:13},this):b.length>0?t.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:b.map(p=>t.jsxDEV(Ia,{schedule:p,selected:String(N?._id||N?.id)===String(p._id||p.id),bookingActive:String(y)===String(p._id||p.id),onTrack:as,onBookInitiate:()=>x(p._id||p.id),onBookCancel:()=>x(null),pickupStop:w,setPickupStop:S,dropoffStop:C,setDropoffStop:Z,segmentPrice:H,isCalculatingFare:G,handleBooking:()=>Oe(p._id||p.id),bookingPending:h.isPending},p._id||p.id,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:761,columnNumber:17},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:759,columnNumber:13},this):t.jsxDEV("div",{className:"text-center bg-white dark:bg-slate-900 rounded-xl md:rounded-2xl border border-slate-100 dark:border-slate-800 p-5 md:p-6 shadow-sm",children:[t.jsxDEV("div",{className:"w-12 h-12 bg-slate-50 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-3",children:t.jsxDEV(Dt,{className:"h-6 w-6 text-slate-300 dark:text-slate-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:783,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:782,columnNumber:15},this),t.jsxDEV("p",{className:"text-slate-500 dark:text-slate-400 font-bold text-sm",children:"No drivers are currently live."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:785,columnNumber:15},this),t.jsxDEV("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:'Use "Notify Drivers" above to request a ride.'},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:786,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:781,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:743,columnNumber:9},this),o&&t.jsxDEV("div",{className:"space-y-4",children:[t.jsxDEV("div",{className:"flex items-center justify-between px-1",children:[t.jsxDEV("h2",{className:"text-lg md:text-xl font-black text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[t.jsxDEV(ta,{className:"h-5 w-5 text-blue-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:796,columnNumber:17},this),"Search Results"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:795,columnNumber:15},this),(a.from||a.to||a.query)&&t.jsxDEV(A,{variant:"ghost",size:"sm",onClick:()=>{n({...a,from:"",to:"",query:""}),i(!1)},className:"text-xs font-bold text-slate-500 hover:text-red-500",children:[t.jsxDEV(Bs,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:809,columnNumber:19},this)," Clear Search"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:800,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:794,columnNumber:13},this),t.jsxDEV("div",{className:"flex flex-wrap gap-1.5 px-1 -mt-2",children:[a.from&&t.jsxDEV("span",{className:"px-3 py-1 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs font-bold rounded-full",children:["From: ",a.from]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:817,columnNumber:17},this),a.to&&t.jsxDEV("span",{className:"px-3 py-1 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs font-bold rounded-full",children:["To: ",a.to]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:822,columnNumber:17},this),a.query&&t.jsxDEV("span",{className:"px-3 py-1 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs font-bold rounded-full",children:['"',a.query,'"']},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:827,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:815,columnNumber:13},this),f?t.jsxDEV("div",{className:"py-20 flex justify-center",children:t.jsxDEV(se,{className:"animate-spin h-10 w-10 text-blue-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:835,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:834,columnNumber:15},this):Array.isArray(l)&&l.length>0?t.jsxDEV(t.Fragment,{children:[l.some(p=>p.driver?.isLive===!0)&&t.jsxDEV("div",{className:"space-y-3",children:[t.jsxDEV("div",{className:"flex items-center gap-2 px-1",children:[t.jsxDEV("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-ping"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:843,columnNumber:23},this),t.jsxDEV("h3",{className:"text-base font-black text-slate-700 dark:text-slate-200",children:"Matching Live Routes"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:844,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:842,columnNumber:21},this),t.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:l.filter(p=>p.driver?.isLive===!0).map(p=>t.jsxDEV(Ia,{schedule:p,selected:String(N?._id||N?.id)===String(p._id||p.id),bookingActive:String(y)===String(p._id||p.id),onTrack:as,onBookInitiate:()=>x(p._id||p.id),onBookCancel:()=>x(null),pickupStop:w,setPickupStop:S,dropoffStop:C,setDropoffStop:Z,segmentPrice:H,isCalculatingFare:G,handleBooking:()=>Oe(p._id||p.id),bookingPending:h.isPending},p._id||p.id,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:848,columnNumber:25},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:846,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:841,columnNumber:19},this),l.some(p=>p.driver?.isLive!==!0)&&t.jsxDEV("div",{className:"space-y-3",children:[t.jsxDEV("h3",{className:"text-base font-black text-slate-700 dark:text-slate-200 px-1",children:"Matching Upcoming Schedules"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:873,columnNumber:21},this),t.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:l.filter(p=>p.driver?.isLive!==!0).map(p=>t.jsxDEV(Ia,{schedule:p,selected:String(N?._id||N?.id)===String(p._id||p.id),bookingActive:String(y)===String(p._id||p.id),onTrack:as,onBookInitiate:()=>x(p._id||p.id),onBookCancel:()=>x(null),pickupStop:w,setPickupStop:S,dropoffStop:C,setDropoffStop:Z,segmentPrice:H,isCalculatingFare:G,handleBooking:()=>Oe(p._id||p.id),bookingPending:h.isPending},p._id||p.id,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:876,columnNumber:25},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:874,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:872,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:838,columnNumber:15},this):t.jsxDEV("div",{className:"text-center bg-white dark:bg-slate-900 rounded-xl md:rounded-2xl border-2 border-dashed border-slate-200 dark:border-slate-700 p-6 md:p-8",children:[t.jsxDEV(ps,{className:"h-8 w-8 text-slate-300 dark:text-slate-600 mx-auto mb-3"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:900,columnNumber:17},this),t.jsxDEV("p",{className:"text-slate-500 dark:text-slate-400 font-bold text-base",children:"No rides found matching your search."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:901,columnNumber:17},this),t.jsxDEV("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:'Try a different route or use "Notify Drivers" to request a ride.'},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:902,columnNumber:17},this),t.jsxDEV("div",{className:"flex flex-wrap justify-center gap-3 mt-4",children:[t.jsxDEV(A,{variant:"outline",onClick:()=>{n({...a,from:"",to:"",query:""}),i(!1)},className:"rounded-xl font-bold border-2 border-slate-200 dark:border-slate-700",children:"Clear Filters"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:904,columnNumber:19},this),t.jsxDEV(A,{className:"bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold",onClick:Ee,disabled:!a.from||!a.to,children:[t.jsxDEV(Ln,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:919,columnNumber:21},this)," Notify Drivers"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:914,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:903,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:899,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:793,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:517,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:516,columnNumber:5},this)}function Ia({schedule:s,selected:e,bookingActive:a,onTrack:n,onBookInitiate:r,onBookCancel:i,pickupStop:o,setPickupStop:l,dropoffStop:f,setDropoffStop:u,segmentPrice:c,isCalculatingFare:d,handleBooking:b,bookingPending:g}){const D=s.isLive||s.driver?.isLive;return t.jsxDEV(ee,{className:`rounded-xl md:rounded-2xl p-4 md:p-5 border-none shadow-sm dark:shadow-slate-900 hover:shadow-lg dark:hover:shadow-slate-800 transition-all bg-white dark:bg-slate-900 ${e?"ring-2 ring-blue-400 dark:ring-blue-500 ring-offset-1 dark:ring-offset-slate-950":""}`,children:[t.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[t.jsxDEV("div",{className:"flex items-center gap-3",children:[t.jsxDEV("div",{className:`p-2.5 rounded-xl ${D?"bg-emerald-50 text-emerald-600":"bg-blue-50 text-blue-600"}`,children:t.jsxDEV(ps,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:955,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:954,columnNumber:11},this),t.jsxDEV("div",{className:`font-black text-lg md:text-xl ${D?"text-emerald-600":"text-blue-600"}`,children:["GHS ",s.price?.toFixed(2)||"0.00"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:957,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:953,columnNumber:9},this),D?t.jsxDEV("span",{className:"flex items-center gap-1 px-2.5 py-0.5 bg-emerald-100 text-emerald-700 text-[9px] font-black uppercase tracking-wider rounded-full animate-pulse",children:[t.jsxDEV("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:963,columnNumber:13},this)," Live"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:962,columnNumber:11},this):t.jsxDEV("span",{className:"px-2.5 py-0.5 bg-blue-100 text-blue-700 text-[9px] font-black uppercase tracking-wider rounded-full",children:"Scheduled"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:966,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:952,columnNumber:7},this),t.jsxDEV("div",{className:"space-y-2 mb-3",children:[t.jsxDEV("div",{className:"font-bold text-sm md:text-base text-slate-700 dark:text-slate-200 flex items-center gap-2",children:[s.startLocation||s.route?.startLocation,t.jsxDEV(aa,{className:"h-4 w-4 text-slate-300 shrink-0"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:975,columnNumber:11},this),s.endLocation||s.route?.endLocation]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:973,columnNumber:9},this),t.jsxDEV("div",{className:"flex items-center gap-4 text-xs",children:[t.jsxDEV("span",{className:"flex items-center gap-1.5 text-slate-500 font-medium",children:[t.jsxDEV(hs,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:980,columnNumber:13},this),ga(s.departureTime,"PPp")]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:979,columnNumber:11},this),t.jsxDEV("span",{className:"flex items-center gap-1.5 text-slate-400",children:[t.jsxDEV($o,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:984,columnNumber:13},this),s.availableSeats??s.capacity??15," seats"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:983,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:978,columnNumber:9},this),t.jsxDEV("div",{className:"pt-3 border-t border-slate-50 dark:border-slate-800 mt-1",children:[t.jsxDEV("div",{className:"flex items-center gap-2.5 mb-2",children:[t.jsxDEV("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center text-blue-600 dark:text-blue-400 font-black text-sm",children:s.driver?.firstName?.[0]||"D"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:992,columnNumber:13},this),t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Driver"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:996,columnNumber:15},this),t.jsxDEV("div",{className:"text-xs font-black text-slate-800 dark:text-white",children:[s.driver?.firstName," ",s.driver?.lastName||"Driver"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:997,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:995,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:991,columnNumber:11},this),s.driver?.vehicle&&t.jsxDEV("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-2.5 rounded-xl border border-slate-100 dark:border-slate-700 flex items-center justify-between",children:[t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"text-[9px] font-black text-slate-400 uppercase",children:"Vehicle"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1006,columnNumber:17},this),t.jsxDEV("div",{className:"text-[11px] font-bold text-slate-700 dark:text-slate-300",children:[s.driver.vehicle.make," ",s.driver.vehicle.model]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1007,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1005,columnNumber:15},this),t.jsxDEV("div",{className:"px-2 py-0.5 bg-yellow-100 border border-yellow-200 rounded text-[9px] font-mono font-bold text-yellow-800",children:s.driver.vehicle.plateNumber},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1011,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1004,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:990,columnNumber:9},this),Array.isArray(s.stops)&&s.stops.length>0&&t.jsxDEV("div",{className:"pt-2",children:[t.jsxDEV("div",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-wider mb-1.5",children:"Route Stops"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1021,columnNumber:13},this),t.jsxDEV("div",{className:"flex flex-wrap gap-1.5",children:s.stops.map((h,y)=>t.jsxDEV("div",{className:"flex items-center",children:[t.jsxDEV("span",{className:"px-1.5 py-0.5 bg-blue-50 dark:bg-blue-900/30 text-[9px] font-bold text-blue-600 dark:text-blue-300 rounded border border-blue-100 dark:border-blue-800/50",children:h.name},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1025,columnNumber:19},this),y<s.stops.length-1&&t.jsxDEV(aa,{className:"h-2.5 w-2.5 mx-0.5 text-slate-300"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1029,columnNumber:21},this)]},y,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1024,columnNumber:17},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1022,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1020,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:972,columnNumber:7},this),a?t.jsxDEV("div",{className:"space-y-3",children:[t.jsxDEV("div",{className:"grid grid-cols-1 gap-2 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-800",children:[t.jsxDEV("div",{className:"space-y-1",children:[t.jsxDEV("label",{className:"text-[10px] font-black uppercase text-slate-400",children:"Pick-up From"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1042,columnNumber:15},this),t.jsxDEV("select",{value:o,onChange:h=>l(h.target.value),className:"w-full bg-transparent font-bold text-slate-700 dark:text-slate-200 focus:outline-none",children:(Array.isArray(s.stops)?s.stops:[]).map(h=>t.jsxDEV("option",{value:h.name,className:"bg-white dark:bg-slate-900",children:h.name},h.name,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1049,columnNumber:19},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1043,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1041,columnNumber:13},this),t.jsxDEV("div",{className:"h-px bg-slate-200 dark:bg-slate-700 my-1"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1053,columnNumber:13},this),t.jsxDEV("div",{className:"space-y-1",children:[t.jsxDEV("label",{className:"text-[10px] font-black uppercase text-slate-400",children:"Drop-off At"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1055,columnNumber:15},this),t.jsxDEV("select",{value:f,onChange:h=>u(h.target.value),className:"w-full bg-transparent font-bold text-slate-700 dark:text-slate-200 focus:outline-none",children:(Array.isArray(s.stops)?s.stops:[]).map(h=>t.jsxDEV("option",{value:h.name,className:"bg-white dark:bg-slate-900",children:h.name},h.name,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1062,columnNumber:19},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1056,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1054,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1040,columnNumber:11},this),t.jsxDEV("div",{className:"flex items-center justify-between px-1",children:[t.jsxDEV("span",{className:"text-xs font-bold text-slate-500",children:"Segment Price"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1069,columnNumber:13},this),t.jsxDEV("div",{className:"text-base font-black text-emerald-600",children:d?t.jsxDEV(se,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1072,columnNumber:17},this):`GHS ${c?.toFixed(2)||s.price?.toFixed(2)}`},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1070,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1068,columnNumber:11},this),t.jsxDEV("div",{className:"flex gap-2",children:[t.jsxDEV(A,{onClick:b,disabled:g||d,className:"flex-1 h-10 bg-emerald-600 hover:bg-emerald-700 rounded-lg font-bold text-sm shadow-md shadow-emerald-100 dark:shadow-none",children:g?"Assigning Seat...":"Confirm Booking"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1080,columnNumber:13},this),t.jsxDEV(A,{onClick:i,variant:"ghost",className:"h-10 rounded-lg text-slate-500 hover:bg-slate-100 text-sm",children:"Cancel"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1087,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1079,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1039,columnNumber:9},this):t.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxDEV(A,{onClick:()=>n(s),disabled:!D,variant:e?"destructive":"secondary",className:`h-10 md:h-11 rounded-xl font-bold text-sm ${D?"":"opacity-50 grayscale cursor-not-allowed"}`,children:e?t.jsxDEV(t.Fragment,{children:[t.jsxDEV(Bs,{className:"mr-1.5 h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1106,columnNumber:17},this)," Stop"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1105,columnNumber:15},this):t.jsxDEV(t.Fragment,{children:[t.jsxDEV(Dt,{className:`mr-1.5 h-4 w-4 ${D?"text-blue-600":"text-slate-400"}`},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1110,columnNumber:17},this),D?"Track":"Not Live"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1109,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1098,columnNumber:11},this),t.jsxDEV(A,{onClick:r,disabled:(s.availableSeats??s.capacity??15)<=0,className:`h-10 md:h-11 rounded-xl font-bold text-sm shadow-md ${(s.availableSeats??s.capacity??15)<=0?"bg-slate-200 text-slate-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-blue-100"}`,children:(s.availableSeats??s.capacity??15)<=0?"Full":D?"Join Bus":"Book"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1115,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1097,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:951,columnNumber:5},this)}function Zt({label:s,value:e,active:a,variant:n}){const r=()=>a?"bg-emerald-500 text-white":n==="emerald"?"bg-emerald-600/20 text-emerald-400 border border-emerald-500/20":"bg-slate-800 text-slate-300";return t.jsxDEV("div",{className:`p-3 md:p-4 rounded-xl md:rounded-2xl flex flex-col justify-center min-h-[70px] md:min-h-[80px] shadow-sm transition-all ${r()}`,children:[t.jsxDEV("p",{className:`text-[9px] font-black uppercase tracking-widest mb-0.5 ${a?"text-white/80":n==="emerald"?"text-emerald-400/70":"text-slate-500"}`,children:s},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1142,columnNumber:7},this),t.jsxDEV("p",{className:"text-lg md:text-xl font-black text-white",children:e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1143,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Dashboard.tsx",lineNumber:1141,columnNumber:5},this)}const cr=Wo,ur=Qo,jp=zo,fo=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(qr,{className:T("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...e,ref:a},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/alert-dialog.tsx",lineNumber:17,columnNumber:3},void 0));fo.displayName=qr.displayName;const an=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(jp,{children:[t.jsxDEV(fo,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/alert-dialog.tsx",lineNumber:33,columnNumber:5},void 0),t.jsxDEV(Or,{ref:a,className:T("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/alert-dialog.tsx",lineNumber:34,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/alert-dialog.tsx",lineNumber:32,columnNumber:3},void 0));an.displayName=Or.displayName;const nn=({className:s,...e})=>t.jsxDEV("div",{className:T("flex flex-col space-y-2 text-center sm:text-left",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/alert-dialog.tsx",lineNumber:50,columnNumber:3},void 0);nn.displayName="AlertDialogHeader";const rn=({className:s,...e})=>t.jsxDEV("div",{className:T("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/alert-dialog.tsx",lineNumber:64,columnNumber:3},void 0);rn.displayName="AlertDialogFooter";const on=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Fr,{ref:a,className:T("text-lg font-semibold",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/alert-dialog.tsx",lineNumber:78,columnNumber:3},void 0));on.displayName=Fr.displayName;const ln=m.forwardRef(({className:s,...e},a)=>t.jsxDEV($r,{ref:a,className:T("text-sm text-muted-foreground",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/alert-dialog.tsx",lineNumber:90,columnNumber:3},void 0));ln.displayName=$r.displayName;const cn=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(zr,{ref:a,className:T(bn(),s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/alert-dialog.tsx",lineNumber:103,columnNumber:3},void 0));cn.displayName=zr.displayName;const un=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Wr,{ref:a,className:T(bn({variant:"outline"}),"mt-2 sm:mt-0",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/alert-dialog.tsx",lineNumber:115,columnNumber:3},void 0));un.displayName=Wr.displayName;const Bn=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Qr,{className:T("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...e,ref:a,children:t.jsxDEV(Go,{className:T("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/switch.tsx",lineNumber:18,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/switch.tsx",lineNumber:10,columnNumber:3},void 0));Bn.displayName=Qr.displayName;function Bp({scheduleId:s,userId:e,userName:a}){const[n,r]=m.useState(!1),[i,o]=m.useState(!1),l=m.useRef(null),f=m.useRef(null),{toast:u}=be();m.useEffect(()=>(localStorage.getItem(`share_location_${s}`)==="true"&&c(),()=>{l.current!==null&&navigator.geolocation.clearWatch(l.current),f.current&&f.current.close()}),[]);const c=()=>{if(!navigator.geolocation){u({title:"Error",description:"Geolocation is not supported by your browser",variant:"destructive"});return}o(!0);const D=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/tracking`,h=new WebSocket(D);h.onopen=()=>{f.current=h,l.current=navigator.geolocation.watchPosition(y=>{f.current?.readyState===WebSocket.OPEN&&f.current.send(JSON.stringify({type:"PASSENGER_LOCATION_UPDATE",scheduleId:s,payload:{lat:y.coords.latitude,lng:y.coords.longitude,userId:e,userName:a}}))},y=>{console.error("Geolocation error:",y),d(),u({title:"Sharing Failed",description:"Could not access your location.",variant:"destructive"})},{enableHighAccuracy:!0,maximumAge:1e4}),r(!0),o(!1),localStorage.getItem(`share_location_${s}`)||u({title:"Location Shared",description:"The driver can now see your live position."}),localStorage.setItem(`share_location_${s}`,"true")},h.onerror=()=>{d(),o(!1),u({title:"Connection Error",description:"Could not connect to tracking server.",variant:"destructive"})}},d=()=>{l.current!==null&&(navigator.geolocation.clearWatch(l.current),l.current=null),f.current&&(f.current.close(),f.current=null),r(!1),localStorage.removeItem(`share_location_${s}`),u({title:"Sharing Stopped",description:"Your location is no longer visible to the driver."})},b=g=>{g?c():d()};return t.jsxDEV("div",{className:"flex items-center space-x-3 bg-white/50 backdrop-blur-sm px-4 py-2 rounded-xl border border-slate-100 shadow-sm",children:[n?t.jsxDEV($s,{className:"h-4 w-4 text-green-500 animate-pulse"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ShareLocationToggle.tsx",lineNumber:112,columnNumber:17},this):t.jsxDEV(Ko,{className:"h-4 w-4 text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ShareLocationToggle.tsx",lineNumber:114,columnNumber:17},this),t.jsxDEV("div",{className:"flex flex-col",children:[t.jsxDEV(L,{htmlFor:"share-location",className:"text-[10px] font-bold uppercase tracking-wider text-slate-500",children:"Share Location"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ShareLocationToggle.tsx",lineNumber:117,columnNumber:17},this),t.jsxDEV("span",{className:"text-[9px] text-slate-400 leading-none",children:"with driver"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ShareLocationToggle.tsx",lineNumber:120,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ShareLocationToggle.tsx",lineNumber:116,columnNumber:13},this),t.jsxDEV(Bn,{id:"share-location",checked:n,onCheckedChange:b,disabled:i},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ShareLocationToggle.tsx",lineNumber:122,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ShareLocationToggle.tsx",lineNumber:110,columnNumber:9},this)}const Vp=m.lazy(()=>pn(()=>import("./LiveMap-BNRl0C6z.js"),__vite__mapDeps([0,1,2,3,4,5])));function Up(){const{data:s,isLoading:e,isError:a}=Hi(),{user:n}=Ce(),r=Ff(),i=$f(),{toast:o}=be(),[l,f]=m.useState(null),u=d=>{r.mutate(d,{onSuccess:()=>{o({title:"Booking Cancelled",description:"Your refund has been processed."})},onError:()=>{o({title:"Error",description:"Failed to cancel booking.",variant:"destructive"})}})},c=d=>{i.mutate(d,{onSuccess:()=>{o({title:"Removed",description:"Trip removed from history."})},onError:()=>{o({title:"Error",description:"Failed to remove trip.",variant:"destructive"})}})};return e?t.jsxDEV("div",{className:"p-8",children:"Loading..."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:94,columnNumber:25},this):a?t.jsxDEV("div",{className:"min-h-screen flex items-center justify-center p-8",children:t.jsxDEV("div",{className:"text-center max-w-md mx-auto p-8 rounded-2xl bg-white shadow-sm border border-red-100",children:[t.jsxDEV(Bs,{className:"h-12 w-12 text-red-500 mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:100,columnNumber:11},this),t.jsxDEV("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Unavailable"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:101,columnNumber:11},this),t.jsxDEV("p",{className:"text-gray-500 mb-6",children:"We couldn't load your tickets. This might be a temporary connection issue."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:102,columnNumber:11},this),t.jsxDEV(A,{onClick:()=>window.location.reload(),variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50",children:"Try Again"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:103,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:99,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:98,columnNumber:7},this):t.jsxDEV("div",{className:"min-h-screen bg-gray-50 pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:t.jsxDEV("div",{className:"max-w-4xl mx-auto",children:[t.jsxDEV("h1",{className:"text-3xl font-display font-bold text-gray-900 mb-8 flex items-center",children:[t.jsxDEV(js,{className:"mr-3 h-8 w-8 text-primary"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:115,columnNumber:11},this),"My Tickets"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:114,columnNumber:9},this),t.jsxDEV("div",{className:"space-y-6",children:s?.length===0?t.jsxDEV("div",{className:"text-center py-16 bg-white rounded-3xl shadow-sm",children:[t.jsxDEV(js,{className:"h-16 w-16 text-gray-200 mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:122,columnNumber:15},this),t.jsxDEV("h2",{className:"text-xl font-medium text-gray-900",children:"No upcoming trips"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:123,columnNumber:15},this),t.jsxDEV("p",{className:"text-gray-500 mb-6",children:"Ready to explore? Book your first ride now."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:124,columnNumber:15},this),t.jsxDEV(A,{onClick:()=>window.location.href="/dashboard",className:"btn-primary",children:"Find a Ride"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:125,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:121,columnNumber:13},this):s?.map(d=>t.jsxDEV("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[t.jsxDEV("div",{className:"p-5 sm:p-6",children:[t.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-5",children:[t.jsxDEV("div",{className:"flex-1 min-w-0",children:[t.jsxDEV("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Route"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:134,columnNumber:23},this),t.jsxDEV("div",{className:"font-bold text-lg text-gray-900 flex items-center flex-wrap gap-1",children:[t.jsxDEV("span",{className:"truncate",children:d.route?.startLocation||"Unknown"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:136,columnNumber:25},this),t.jsxDEV("span",{className:"text-gray-300 flex-shrink-0",children:""},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:137,columnNumber:25},this),t.jsxDEV("span",{className:"truncate",children:d.route?.endLocation||"Unknown"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:138,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:135,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:133,columnNumber:21},this),t.jsxDEV("span",{className:`self-start px-3 py-1 rounded-full text-xs font-bold whitespace-nowrap ${d.status==="confirmed"?"bg-emerald-100 text-emerald-700":d.status==="cancelled"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:d.status.toUpperCase()},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:141,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:132,columnNumber:19},this),t.jsxDEV("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-5 p-4 bg-slate-50 rounded-xl",children:[t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1 flex items-center gap-1",children:[t.jsxDEV(Yo,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:155,columnNumber:25},this)," Date"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:154,columnNumber:23},this),t.jsxDEV("div",{className:"font-semibold text-gray-900",children:d.schedule?.departureTime?wt(new Date(d.schedule.departureTime),"MMM d, yyyy"):"N/A"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:157,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:153,columnNumber:21},this),t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1 flex items-center gap-1",children:[t.jsxDEV(hs,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:165,columnNumber:25},this)," Time"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:164,columnNumber:23},this),t.jsxDEV("div",{className:"font-semibold text-gray-900",children:d.schedule?.departureTime?wt(new Date(d.schedule.departureTime),"HH:mm"):"N/A"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:167,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:163,columnNumber:21},this),t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Price"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:174,columnNumber:23},this),t.jsxDEV("div",{className:"font-bold text-emerald-600",children:["GHS ",Number(d.price||d.schedule?.price||0).toFixed(2)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:175,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:173,columnNumber:21},this),t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Seat"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:180,columnNumber:23},this),t.jsxDEV("div",{className:"font-bold text-gray-900",children:d.seatNumber},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:181,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:179,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:152,columnNumber:19},this),t.jsxDEV("div",{className:"flex items-center justify-between mb-5",children:[t.jsxDEV("div",{className:"flex-1",children:[t.jsxDEV("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Pick-up"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:190,columnNumber:23},this),t.jsxDEV("div",{className:"font-bold text-gray-900 line-clamp-1",children:d.pickup||d.route?.startLocation||d.schedule?.route?.startLocation||"Unknown"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:191,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:189,columnNumber:21},this),t.jsxDEV("div",{className:"px-4 text-gray-300",children:t.jsxDEV(aa,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:194,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:193,columnNumber:21},this),t.jsxDEV("div",{className:"flex-1 text-right",children:[t.jsxDEV("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Drop-off"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:197,columnNumber:23},this),t.jsxDEV("div",{className:"font-bold text-gray-900 line-clamp-1",children:d.dropoff||d.route?.endLocation||d.schedule?.route?.endLocation||"Unknown"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:198,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:196,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:188,columnNumber:19},this),d.schedule?.driver&&t.jsxDEV("div",{className:"flex flex-wrap gap-x-6 gap-y-3 pb-5 mb-5 border-b border-gray-100",children:[t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Driver"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:206,columnNumber:25},this),t.jsxDEV("div",{className:"text-sm font-semibold text-gray-700",children:[d.schedule.driver.firstName," ",d.schedule.driver.lastName]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:207,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:205,columnNumber:23},this),d.schedule.driver.phone&&t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Contact"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:213,columnNumber:27},this),t.jsxDEV("a",{href:`tel:${d.schedule.driver.phone}`,className:"inline-flex items-center gap-1.5 px-3 py-1 bg-emerald-50 hover:bg-emerald-100 text-emerald-700 text-sm font-semibold rounded-lg transition-colors",children:[t.jsxDEV(At,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:218,columnNumber:29},this),d.schedule.driver.phone]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:214,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:212,columnNumber:25},this),d.schedule.driver.vehicle&&t.jsxDEV(t.Fragment,{children:[t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Vehicle"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:226,columnNumber:29},this),t.jsxDEV("div",{className:"text-sm font-semibold text-gray-700",children:[d.schedule.driver.vehicle.make," ",d.schedule.driver.vehicle.model,t.jsxDEV("span",{className:"ml-1 text-xs font-normal text-gray-400",children:["(",d.schedule.driver.vehicle.color,")"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:229,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:227,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:225,columnNumber:27},this),t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Plate Number"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:233,columnNumber:29},this),t.jsxDEV("div",{className:"inline-block px-2 py-0.5 bg-yellow-100 border border-yellow-300 rounded text-xs font-mono font-bold text-yellow-800",children:d.schedule.driver.vehicle.plateNumber},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:234,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:232,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:224,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:204,columnNumber:21},this),t.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.status==="confirmed"&&n&&t.jsxDEV("div",{className:"flex-shrink-0",children:t.jsxDEV(Bp,{scheduleId:d.scheduleId,userId:n._id,userName:`${n.firstName} ${n.lastName}`},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:248,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:247,columnNumber:23},this),d.status!=="confirmed"&&t.jsxDEV("div",{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:257,columnNumber:56},this),t.jsxDEV("div",{className:"flex items-center gap-3 flex-wrap sm:flex-nowrap",children:[d.status==="confirmed"&&t.jsxDEV(A,{variant:l===d._id?"default":"outline",size:"sm",onClick:()=>f(l===d._id?null:d._id||String(d.id)),className:"gap-2",children:[t.jsxDEV(ba,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:269,columnNumber:27},this),l===d._id?"Stop Tracking":"Track Bus"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:263,columnNumber:25},this),d.status==="confirmed"&&t.jsxDEV(cr,{children:[t.jsxDEV(ur,{asChild:!0,children:t.jsxDEV(A,{variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50 border-red-200",children:"Cancel"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:278,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:277,columnNumber:27},this),t.jsxDEV(an,{children:[t.jsxDEV(nn,{children:[t.jsxDEV(on,{children:"Cancel Trip"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:284,columnNumber:31},this),t.jsxDEV(ln,{children:"Are you sure you want to cancel this trip?"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:285,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:283,columnNumber:29},this),t.jsxDEV(rn,{children:[t.jsxDEV(un,{children:"Keep Ride"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:290,columnNumber:31},this),t.jsxDEV(cn,{onClick:()=>u(d._id||String(d.id)),className:"bg-red-600 hover:bg-red-700",children:"Yes, Cancel"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:291,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:289,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:282,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:276,columnNumber:25},this),(d.status==="cancelled"||d.status==="completed")&&t.jsxDEV(cr,{children:[t.jsxDEV(ur,{asChild:!0,children:t.jsxDEV(A,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-red-600 hover:bg-red-50",children:[t.jsxDEV(Ks,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:304,columnNumber:31},this)," Remove"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:303,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:302,columnNumber:27},this),t.jsxDEV(an,{children:[t.jsxDEV(nn,{children:[t.jsxDEV(on,{children:"Remove from History?"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:309,columnNumber:31},this),t.jsxDEV(ln,{children:["This will permanently remove this ",d.status," trip from your list."]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:310,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:308,columnNumber:29},this),t.jsxDEV(rn,{children:[t.jsxDEV(un,{children:"Cancel"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:315,columnNumber:31},this),t.jsxDEV(cn,{onClick:()=>c(d._id||String(d.id)),className:"bg-red-600 hover:bg-red-700",children:"Remove"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:316,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:314,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:307,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:301,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:260,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:244,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:130,columnNumber:17},this),l===d._id&&t.jsxDEV("div",{className:"p-6 pt-0 border-t border-gray-50 bg-slate-50/30",children:[t.jsxDEV("div",{className:"mb-4 flex items-center justify-between",children:[t.jsxDEV("h3",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[t.jsxDEV("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:335,columnNumber:25},this),"Live Bus Location"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:334,columnNumber:23},this),t.jsxDEV(A,{variant:"ghost",size:"sm",onClick:()=>f(null),className:"h-8 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",children:[t.jsxDEV(Bs,{className:"h-3.5 w-3.5 mr-1"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:344,columnNumber:25},this)," Stop Tracking"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:338,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:333,columnNumber:21},this),t.jsxDEV(Vp,{scheduleId:d.scheduleId},d.scheduleId,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:347,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:332,columnNumber:19},this)]},d._id||d.id,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:129,columnNumber:15},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:119,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:113,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRides.tsx",lineNumber:112,columnNumber:5},this)}function Sp(){const{user:s}=Ce(),{toast:e}=be(),{data:a=[],isLoading:n,refetch:r}=fa({driverId:s?._id}),i=async o=>{if(window.confirm("Delete this route forever?")){console.log("Attempting to delete schedule:",o);try{const l=localStorage.getItem("token"),f=await fetch(`/api/schedules/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${l}`}});if(f.ok)e({title:"Route removed"}),r();else{const u=await f.json();console.error("Delete failed:",u),e({title:"Error",description:u.message,variant:"destructive"})}}catch(l){console.error("Delete exception:",l),e({title:"Error",variant:"destructive"})}}};return s?console.log("Current Driver ID:",s._id):console.log("No user logged in or user loading"),n?t.jsxDEV("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:t.jsxDEV(se,{className:"h-10 w-10 animate-spin text-blue-600 mb-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:54,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:53,columnNumber:13},this):t.jsxDEV("div",{className:"min-h-screen bg-gray-50 pt-24 px-4 pb-12",children:t.jsxDEV("div",{className:"max-w-7xl mx-auto space-y-8",children:[t.jsxDEV("div",{className:"bg-slate-900 rounded-[2.5rem] shadow-xl overflow-hidden text-white p-8 md:p-12",children:t.jsxDEV("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"flex items-center gap-2 mb-2 text-slate-400",children:[t.jsxDEV(Ne,{href:"/dashboard",children:t.jsxDEV("span",{className:"flex items-center gap-1 hover:text-white cursor-pointer transition-colors",children:[t.jsxDEV(Zo,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:70,columnNumber:41},this)," Dashboard"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:69,columnNumber:37},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:68,columnNumber:33},this),t.jsxDEV("span",{children:"/"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:73,columnNumber:33},this),t.jsxDEV("span",{className:"text-white",children:"My Routes"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:74,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:67,columnNumber:29},this),t.jsxDEV("h1",{className:"text-4xl font-black tracking-tight",children:"My Routes"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:76,columnNumber:29},this),t.jsxDEV("p",{className:"text-slate-400 mt-2 text-lg",children:"Manage your active schedules and pricing"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:77,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:66,columnNumber:25},this),t.jsxDEV("div",{children:t.jsxDEV(ha,{onSuccess:()=>r()},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:82,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:81,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:65,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:64,columnNumber:17},this),t.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(o=>t.jsxDEV(ee,{className:"rounded-[2.5rem] p-8 border-none shadow-sm hover:shadow-xl transition-all group bg-white relative",children:[t.jsxDEV("div",{className:"absolute top-6 right-6 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsxDEV(ha,{editData:o,onSuccess:()=>r()},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:95,columnNumber:37},this),t.jsxDEV(A,{onClick:()=>i(o._id||o.id),size:"icon",variant:"ghost",className:"h-10 w-10 rounded-full bg-slate-50 hover:bg-red-500 hover:text-white transition-colors",children:t.jsxDEV(Ks,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:102,columnNumber:41},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:96,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:94,columnNumber:33},this),t.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[t.jsxDEV("div",{className:"flex items-center gap-4",children:[t.jsxDEV("div",{className:"p-4 bg-blue-50 rounded-2xl text-blue-600",children:t.jsxDEV(ps,{className:"h-6 w-6"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:109,columnNumber:45},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:108,columnNumber:41},this),t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"font-black text-2xl text-blue-600",children:["GHS ",o.price?.toFixed(2)||"0.00"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:112,columnNumber:45},this),s?.driverDetails?.vehicleParams&&t.jsxDEV("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-tighter",children:[s.driverDetails.vehicleParams.make," ",s.driverDetails.vehicleParams.model]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:114,columnNumber:49},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:111,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:107,columnNumber:37},this),t.jsxDEV(mo,{scheduleId:o._id||o.id},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:120,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:106,columnNumber:33},this),t.jsxDEV("div",{className:"space-y-3",children:[t.jsxDEV("div",{className:"font-bold text-xl text-slate-700 flex items-center gap-3",children:[o.startLocation||o.route?.startLocation,t.jsxDEV(aa,{className:"h-5 w-5 text-slate-300"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:126,columnNumber:41},this),o.endLocation||o.route?.endLocation]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:124,columnNumber:37},this),t.jsxDEV("div",{className:"flex items-center gap-2 text-slate-500 font-medium",children:[t.jsxDEV(hs,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:130,columnNumber:41},this),ga(o.departureTime,"p")]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:129,columnNumber:37},this),t.jsxDEV("div",{className:"flex items-center gap-2 text-slate-400 text-sm font-medium pt-2 border-t border-slate-50",children:[t.jsxDEV(ws,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:134,columnNumber:41},this),t.jsxDEV("span",{className:o.availableSeats===0?"text-red-500 font-bold":"text-emerald-600 font-bold",children:[o.capacity-(o.availableSeats??o.capacity),"/",o.capacity||15]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:135,columnNumber:41},this),t.jsxDEV("span",{className:"text-slate-400",children:"seats booked"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:138,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:133,columnNumber:37},this),s?.driverDetails?.vehicleParams?.plateNumber&&t.jsxDEV("div",{className:"pt-2",children:t.jsxDEV("span",{className:"px-2 py-0.5 bg-yellow-100 border border-yellow-200 rounded text-[10px] font-mono font-bold text-yellow-800 uppercase",children:s.driverDetails.vehicleParams.plateNumber},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:142,columnNumber:45},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:141,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:123,columnNumber:33},this)]},o._id||o.id,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:91,columnNumber:29},this)):t.jsxDEV("div",{className:"col-span-full py-20 text-center bg-white rounded-[2.5rem] border-2 border-dashed border-slate-200",children:[t.jsxDEV(ps,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:152,columnNumber:29},this),t.jsxDEV("p",{className:"text-slate-500 font-bold",children:"No schedules found. Create your first route to begin."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:153,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:151,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:88,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:61,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/MyRoutes.tsx",lineNumber:60,columnNumber:9},this)}const _p=zt("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function fs({className:s,variant:e,...a}){return t.jsxDEV("div",{className:T(_p({variant:e}),s),...a},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/badge.tsx",lineNumber:34,columnNumber:5},this)}const po=m.forwardRef(({className:s,...e},a)=>t.jsxDEV("textarea",{className:T("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/textarea.tsx",lineNumber:10,columnNumber:5},void 0));po.displayName="Textarea";const Os=al,Fs=nl,As=m.forwardRef(({className:s,children:e,...a},n)=>t.jsxDEV(Gr,{ref:n,className:T("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...a,children:[e,t.jsxDEV(Ho,{asChild:!0,children:t.jsxDEV(Kr,{className:"h-4 w-4 opacity-50"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:29,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:28,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:19,columnNumber:3},void 0));As.displayName=Gr.displayName;const ho=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Yr,{ref:a,className:T("flex cursor-default items-center justify-center py-1",s),...e,children:t.jsxDEV(Xo,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:47,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:39,columnNumber:3},void 0));ho.displayName=Yr.displayName;const No=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Zr,{ref:a,className:T("flex cursor-default items-center justify-center py-1",s),...e,children:t.jsxDEV(Kr,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:64,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:56,columnNumber:3},void 0));No.displayName=Zr.displayName;const Es=m.forwardRef(({className:s,children:e,position:a="popper",...n},r)=>t.jsxDEV(Jo,{children:t.jsxDEV(Hr,{ref:r,className:T("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...n,children:[t.jsxDEV(ho,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:86,columnNumber:7},void 0),t.jsxDEV(el,{className:T("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:87,columnNumber:7},void 0),t.jsxDEV(No,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:96,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:75,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:74,columnNumber:3},void 0));Es.displayName=Hr.displayName;const Tp=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(Xr,{ref:a,className:T("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:106,columnNumber:3},void 0));Tp.displayName=Xr.displayName;const te=m.forwardRef(({className:s,children:e,...a},n)=>t.jsxDEV(Jr,{ref:n,className:T("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[t.jsxDEV("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsxDEV(sl,{children:t.jsxDEV(ei,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:128,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:127,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:126,columnNumber:5},void 0),t.jsxDEV(tl,{children:e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:132,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:118,columnNumber:3},void 0));te.displayName=Jr.displayName;const Rp=m.forwardRef(({className:s,...e},a)=>t.jsxDEV(si,{ref:a,className:T("-mx-1 my-1 h-px bg-muted",s),...e},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/select.tsx",lineNumber:141,columnNumber:3},void 0));Rp.displayName=si.displayName;async function Ge(s,e={}){const a=localStorage.getItem("token"),n=await fetch(s,{...e,headers:{...e.headers,"Content-Type":"application/json",Authorization:`Bearer ${a}`}});if(!n.ok){const r=await n.json().catch(()=>({message:n.statusText}));throw new Error(r.message||"Request failed")}return n.json()}function Mp(){return Re({queryKey:["/api/admin/stats"],queryFn:()=>Ge("/api/admin/stats"),refetchInterval:3e4})}function Pp(s){return Re({queryKey:["/api/admin/users",s],queryFn:()=>{const e=new URLSearchParams;return s?.role&&e.set("role",s.role),s?.search&&e.set("search",s.search),s?.page&&e.set("page",s.page.toString()),Ge(`/api/admin/users?${e.toString()}`)}})}function Lp(){const s=he();return fe({mutationFn:({userId:e,status:a,reason:n})=>Ge(`/api/admin/users/${e}/status`,{method:"PATCH",body:JSON.stringify({status:a,reason:n})}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/users"]}),s.invalidateQueries({queryKey:["/api/admin/stats"]})}})}function Ip(){const s=he();return fe({mutationFn:({userId:e,role:a})=>Ge(`/api/admin/users/${e}/role`,{method:"PATCH",body:JSON.stringify({role:a})}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/users"]})}})}function qp(){const s=he();return fe({mutationFn:e=>Ge(`/api/admin/users/${e}`,{method:"DELETE"}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/users"]}),s.invalidateQueries({queryKey:["/api/admin/stats"]})}})}function Op(){return Re({queryKey:["/api/admin/drivers/pending"],queryFn:()=>Ge("/api/admin/drivers/pending")})}function Fp(){const s=he();return fe({mutationFn:e=>Ge(`/api/admin/drivers/${e}/approve`,{method:"POST"}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/drivers/pending"]}),s.invalidateQueries({queryKey:["/api/admin/users"]}),s.invalidateQueries({queryKey:["/api/admin/stats"]})}})}function $p(){const s=he();return fe({mutationFn:({driverId:e,reason:a})=>Ge(`/api/admin/drivers/${e}/reject`,{method:"POST",body:JSON.stringify({reason:a})}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/drivers/pending"]}),s.invalidateQueries({queryKey:["/api/admin/users"]})}})}function zp(s){return Re({queryKey:["/api/admin/support-tickets",s],queryFn:()=>{const e=new URLSearchParams;return s?.status&&e.set("status",s.status),s?.priority&&e.set("priority",s.priority),Ge(`/api/admin/support-tickets?${e.toString()}`)}})}function Wp(){const s=he();return fe({mutationFn:({ticketId:e,updates:a})=>Ge(`/api/admin/support-tickets/${e}`,{method:"PATCH",body:JSON.stringify(a)}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/support-tickets"]}),s.invalidateQueries({queryKey:["/api/admin/stats"]})}})}function Qp(s){return Re({queryKey:["/api/admin/bookings",s],queryFn:()=>{const e=new URLSearchParams;return s?.status&&e.set("status",s.status),s?.page&&e.set("page",s.page.toString()),Ge(`/api/admin/bookings?${e.toString()}`)}})}function Gp(){const s=he();return fe({mutationFn:e=>Ge(`/api/admin/bookings/${e}`,{method:"DELETE"}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/bookings"]}),s.invalidateQueries({queryKey:["/api/admin/stats"]})}})}function dr(){return t.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 pt-20 pb-12 px-4 sm:px-6 lg:px-8",children:t.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[t.jsxDEV("div",{className:"flex items-center gap-3 mb-8",children:[t.jsxDEV(ct,{className:"h-8 w-8 text-emerald-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:54,columnNumber:21},this),t.jsxDEV("h1",{className:"text-3xl font-bold text-white",children:"Admin Console"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:55,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:53,columnNumber:17},this),t.jsxDEV(Ei,{defaultValue:"dashboard",className:"w-full",children:[t.jsxDEV(gn,{className:"mb-8 bg-slate-800/50 border border-slate-700 p-1",children:[t.jsxDEV(Cs,{value:"dashboard",className:"data-[state=active]:bg-emerald-600 data-[state=active]:text-white",children:[t.jsxDEV(ti,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:61,columnNumber:29},this)," Dashboard"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:60,columnNumber:25},this),t.jsxDEV(Cs,{value:"users",className:"data-[state=active]:bg-emerald-600 data-[state=active]:text-white",children:[t.jsxDEV(Is,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:64,columnNumber:29},this)," Users"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:63,columnNumber:25},this),t.jsxDEV(Cs,{value:"kyc",className:"data-[state=active]:bg-emerald-600 data-[state=active]:text-white",children:[t.jsxDEV(ze,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:67,columnNumber:29},this)," KYC Approval"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:66,columnNumber:25},this),t.jsxDEV(Cs,{value:"tickets",className:"data-[state=active]:bg-emerald-600 data-[state=active]:text-white",children:[t.jsxDEV(js,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:70,columnNumber:29},this)," Support"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:69,columnNumber:25},this),t.jsxDEV(Cs,{value:"bookings",className:"data-[state=active]:bg-emerald-600 data-[state=active]:text-white",children:[t.jsxDEV(ai,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:73,columnNumber:29},this)," Bookings"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:72,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:59,columnNumber:21},this),t.jsxDEV(Ds,{value:"dashboard",children:t.jsxDEV(Kp,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:77,columnNumber:52},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:77,columnNumber:21},this),t.jsxDEV(Ds,{value:"users",children:t.jsxDEV(Yp,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:78,columnNumber:48},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:78,columnNumber:21},this),t.jsxDEV(Ds,{value:"kyc",children:t.jsxDEV(Zp,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:79,columnNumber:46},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:79,columnNumber:21},this),t.jsxDEV(Ds,{value:"tickets",children:t.jsxDEV(Hp,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:80,columnNumber:50},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:80,columnNumber:21},this),t.jsxDEV(Ds,{value:"bookings",children:t.jsxDEV(Xp,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:81,columnNumber:51},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:81,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:58,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:52,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:51,columnNumber:9},this)}function Kp(){const{data:s,isLoading:e}=Mp();if(e)return t.jsxDEV("div",{className:"flex justify-center py-12",children:t.jsxDEV(se,{className:"h-8 w-8 animate-spin text-emerald-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:93,columnNumber:59},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:93,columnNumber:16},this);const a=[{label:"Total Users",value:s?.totalUsers||0,icon:Is,color:"bg-blue-500"},{label:"Passengers",value:s?.totalPassengers||0,icon:Is,color:"bg-indigo-500"},{label:"Drivers",value:s?.totalDrivers||0,icon:ze,color:"bg-emerald-500"},{label:"Pending KYC",value:s?.pendingKYC||0,icon:hs,color:"bg-amber-500"},{label:"Total Bookings",value:s?.totalBookings||0,icon:js,color:"bg-purple-500"},{label:"Total Revenue",value:`GHS ${(s?.totalRevenue||0).toLocaleString()}`,icon:rl,color:"bg-green-500"},{label:"Open Tickets",value:s?.openTickets||0,icon:In,color:"bg-red-500"}];return t.jsxDEV("div",{className:"space-y-6",children:[t.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map((n,r)=>t.jsxDEV(ee,{className:"bg-slate-800/50 border-slate-700",children:t.jsxDEV(me,{className:"pt-6",children:t.jsxDEV("div",{className:"flex items-center justify-between",children:[t.jsxDEV("div",{children:[t.jsxDEV("p",{className:"text-sm text-slate-400",children:n.label},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:114,columnNumber:37},this),t.jsxDEV("p",{className:"text-2xl font-bold text-white",children:n.value},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:115,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:113,columnNumber:33},this),t.jsxDEV("div",{className:`p-3 rounded-lg ${n.color}`,children:t.jsxDEV(n.icon,{className:"h-6 w-6 text-white"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:118,columnNumber:37},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:117,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:112,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:111,columnNumber:25},this)},r,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:110,columnNumber:21},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:108,columnNumber:13},this),t.jsxDEV(ee,{className:"bg-slate-800/50 border-slate-700",children:[t.jsxDEV(Fe,{children:t.jsxDEV(Le,{className:"text-white",children:"Quick Actions"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:128,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:127,columnNumber:17},this),t.jsxDEV(me,{className:"flex flex-wrap gap-3",children:[t.jsxDEV(A,{variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[t.jsxDEV(Is,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:132,columnNumber:25},this)," View All Users"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:131,columnNumber:21},this),t.jsxDEV(A,{variant:"outline",className:"border-amber-600 text-amber-400 hover:bg-amber-900/30",children:[t.jsxDEV(hs,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:135,columnNumber:25},this)," Pending KYC (",s?.pendingKYC,")"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:134,columnNumber:21},this),t.jsxDEV(A,{variant:"outline",className:"border-red-600 text-red-400 hover:bg-red-900/30",children:[t.jsxDEV(In,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:138,columnNumber:25},this)," Open Tickets (",s?.openTickets,")"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:137,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:130,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:126,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:107,columnNumber:9},this)}function Yp(){const[s,e]=m.useState(""),[a,n]=m.useState("all"),[r,i]=m.useState(1),{toast:o}=be(),{data:l,isLoading:f}=Pp({search:s,role:a,page:r}),u=Lp(),c=Ip(),d=qp(),b=(h,y)=>{u.mutate({userId:h,status:y},{onSuccess:()=>o({title:"User status updated"}),onError:x=>o({title:"Error",description:x.message,variant:"destructive"})})},g=(h,y)=>{c.mutate({userId:h,role:y},{onSuccess:()=>o({title:"User role updated"}),onError:x=>o({title:"Error",description:x.message,variant:"destructive"})})},D=h=>{confirm("Are you sure you want to delete this user?")&&d.mutate(h,{onSuccess:()=>o({title:"User deleted"}),onError:y=>o({title:"Error",description:y.message,variant:"destructive"})})};return t.jsxDEV("div",{className:"space-y-6",children:[t.jsxDEV("div",{className:"flex flex-wrap gap-4",children:[t.jsxDEV("div",{className:"relative flex-1 min-w-[200px]",children:[t.jsxDEV(ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:185,columnNumber:21},this),t.jsxDEV(O,{placeholder:"Search users...",value:s,onChange:h=>e(h.target.value),className:"pl-10 bg-slate-800 border-slate-700 text-white"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:186,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:184,columnNumber:17},this),t.jsxDEV(Os,{value:a,onValueChange:n,children:[t.jsxDEV(As,{className:"w-[150px] bg-slate-800 border-slate-700 text-white",children:t.jsxDEV(Fs,{placeholder:"Filter by role"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:195,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:194,columnNumber:21},this),t.jsxDEV(Es,{children:[t.jsxDEV(te,{value:"all",children:"All Roles"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:198,columnNumber:25},this),t.jsxDEV(te,{value:"passenger",children:"Passengers"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:199,columnNumber:25},this),t.jsxDEV(te,{value:"driver",children:"Drivers"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:200,columnNumber:25},this),t.jsxDEV(te,{value:"admin",children:"Admins"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:201,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:197,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:193,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:183,columnNumber:13},this),f?t.jsxDEV("div",{className:"flex justify-center py-12",children:t.jsxDEV(se,{className:"h-8 w-8 animate-spin text-emerald-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:207,columnNumber:60},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:207,columnNumber:17},this):t.jsxDEV("div",{className:"space-y-3",children:[l?.users.map(h=>t.jsxDEV(ee,{className:"bg-slate-800/50 border-slate-700",children:t.jsxDEV(me,{className:"pt-4",children:t.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[t.jsxDEV("div",{className:"flex-1 min-w-[200px]",children:[t.jsxDEV("div",{className:"flex items-center gap-2",children:[t.jsxDEV("h3",{className:"font-medium text-white",children:[h.firstName," ",h.lastName]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:216,columnNumber:45},this),t.jsxDEV(fs,{variant:h.role==="admin"?"default":h.role==="driver"?"secondary":"outline",children:h.role},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:217,columnNumber:45},this),h.accountStatus==="suspended"&&t.jsxDEV(fs,{variant:"destructive",children:"Suspended"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:220,columnNumber:84},this),h.accountStatus==="banned"&&t.jsxDEV(fs,{variant:"destructive",children:"Banned"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:221,columnNumber:81},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:215,columnNumber:41},this),t.jsxDEV("p",{className:"text-sm text-slate-400",children:h.email},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:223,columnNumber:41},this),h.role==="driver"&&h.kycStatus&&t.jsxDEV("div",{className:"mt-1",children:t.jsxDEV(fs,{variant:h.kycStatus==="approved"?"default":h.kycStatus==="pending"?"secondary":"destructive",children:["KYC: ",h.kycStatus]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:226,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:225,columnNumber:45},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:214,columnNumber:37},this),t.jsxDEV("div",{className:"flex gap-2",children:[t.jsxDEV(Os,{defaultValue:h.role,onValueChange:y=>g(h._id,y),children:[t.jsxDEV(As,{className:"w-[120px] bg-slate-700 border-slate-600 text-white",children:t.jsxDEV(Fs,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:235,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:234,columnNumber:45},this),t.jsxDEV(Es,{children:[t.jsxDEV(te,{value:"passenger",children:"Passenger"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:238,columnNumber:49},this),t.jsxDEV(te,{value:"driver",children:"Driver"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:239,columnNumber:49},this),t.jsxDEV(te,{value:"admin",children:"Admin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:240,columnNumber:49},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:237,columnNumber:45},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:233,columnNumber:41},this),t.jsxDEV(A,{size:"sm",variant:h.accountStatus==="active"||!h.accountStatus?"outline":"default",onClick:()=>b(h._id,h.accountStatus==="active"||!h.accountStatus?"suspended":"active"),className:"border-amber-600 text-amber-400",children:h.accountStatus==="active"||!h.accountStatus?t.jsxDEV(il,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:249,columnNumber:103},this):t.jsxDEV(Ns,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:249,columnNumber:133},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:243,columnNumber:41},this),t.jsxDEV(A,{size:"sm",variant:"destructive",onClick:()=>D(h._id),children:t.jsxDEV(Ks,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:252,columnNumber:45},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:251,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:232,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:213,columnNumber:33},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:212,columnNumber:29},this)},h._id,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:211,columnNumber:25},this)),l?.users.length===0&&t.jsxDEV("div",{className:"text-center py-8 text-slate-400",children:"No users found"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:260,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:209,columnNumber:17},this),l&&l.total>20&&t.jsxDEV("div",{className:"flex justify-center gap-2",children:[t.jsxDEV(A,{disabled:r===1,onClick:()=>i(h=>h-1),variant:"outline",children:"Previous"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:267,columnNumber:21},this),t.jsxDEV("span",{className:"text-slate-400 py-2",children:["Page ",r," of ",Math.ceil(l.total/20)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:268,columnNumber:21},this),t.jsxDEV(A,{disabled:r*20>=l.total,onClick:()=>i(h=>h+1),variant:"outline",children:"Next"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:269,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:266,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:182,columnNumber:9},this)}function Zp(){const{data:s,isLoading:e}=Op(),a=Fp(),n=$p(),{toast:r}=be(),[i,o]=m.useState(""),[l,f]=m.useState(null),u=d=>{a.mutate(d,{onSuccess:()=>r({title:"Driver approved successfully"}),onError:b=>r({title:"Error",description:b.message,variant:"destructive"})})},c=()=>{!l||!i||n.mutate({driverId:l,reason:i},{onSuccess:()=>{r({title:"Driver rejected"}),f(null),o("")},onError:d=>r({title:"Error",description:d.message,variant:"destructive"})})};return e?t.jsxDEV("div",{className:"flex justify-center py-12",children:t.jsxDEV(se,{className:"h-8 w-8 animate-spin text-emerald-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:305,columnNumber:59},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:305,columnNumber:16},this):t.jsxDEV("div",{className:"space-y-6",children:[t.jsxDEV(ee,{className:"bg-slate-800/50 border-slate-700",children:t.jsxDEV(Fe,{children:[t.jsxDEV(Le,{className:"text-white flex items-center gap-2",children:[t.jsxDEV(hs,{className:"h-5 w-5 text-amber-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:313,columnNumber:25},this)," Pending KYC Applications"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:312,columnNumber:21},this),t.jsxDEV(Ze,{className:"text-slate-400",children:"Review driver license applications and vehicle details"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:315,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:311,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:310,columnNumber:13},this),s?.length===0?t.jsxDEV("div",{className:"text-center py-12 text-slate-400",children:[t.jsxDEV(Ns,{className:"h-12 w-12 mx-auto mb-3 text-emerald-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:323,columnNumber:21},this),t.jsxDEV("p",{children:"No pending KYC applications"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:324,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:322,columnNumber:17},this):t.jsxDEV("div",{className:"space-y-4",children:s?.map(d=>t.jsxDEV(ee,{className:"bg-slate-800/50 border-slate-700",children:t.jsxDEV(me,{className:"pt-6",children:t.jsxDEV("div",{className:"flex flex-wrap justify-between gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV("h3",{className:"font-medium text-white text-lg",children:[d.firstName," ",d.lastName]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:333,columnNumber:41},this),t.jsxDEV("p",{className:"text-sm text-slate-400",children:d.email},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:334,columnNumber:41},this),d.driverDetails&&t.jsxDEV("div",{className:"mt-3 p-3 bg-slate-700/50 rounded-lg",children:[t.jsxDEV("p",{className:"text-sm text-slate-300",children:[t.jsxDEV("strong",{children:"License:"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:337,columnNumber:87},this)," ",d.driverDetails.licenseNumber]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:337,columnNumber:49},this),d.driverDetails.vehicleParams&&t.jsxDEV(t.Fragment,{children:[t.jsxDEV("p",{className:"text-sm text-slate-300",children:[t.jsxDEV("strong",{children:"Vehicle:"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:341,columnNumber:61},this)," ",d.driverDetails.vehicleParams.make," ",d.driverDetails.vehicleParams.model," (",d.driverDetails.vehicleParams.year,")"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:340,columnNumber:57},this),t.jsxDEV("p",{className:"text-sm text-slate-300",children:[t.jsxDEV("strong",{children:"Plate:"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:343,columnNumber:95},this)," ",d.driverDetails.vehicleParams.plateNumber]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:343,columnNumber:57},this),t.jsxDEV("p",{className:"text-sm text-slate-300",children:[t.jsxDEV("strong",{children:"Capacity:"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:344,columnNumber:95},this)," ",d.driverDetails.vehicleParams.capacity," seats"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:344,columnNumber:57},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:339,columnNumber:53},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:336,columnNumber:45},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:332,columnNumber:37},this),t.jsxDEV("div",{className:"flex flex-col gap-2",children:[t.jsxDEV(A,{onClick:()=>u(d._id),className:"bg-emerald-600 hover:bg-emerald-700",children:[t.jsxDEV(Ns,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:352,columnNumber:45},this)," Approve"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:351,columnNumber:41},this),t.jsxDEV(An,{children:[t.jsxDEV(En,{asChild:!0,children:t.jsxDEV(A,{variant:"destructive",onClick:()=>f(d._id),children:[t.jsxDEV(Bs,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:357,columnNumber:53},this)," Reject"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:356,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:355,columnNumber:45},this),t.jsxDEV(ka,{className:"bg-slate-800 border-slate-700",children:[t.jsxDEV(va,{children:[t.jsxDEV(Ca,{className:"text-white",children:"Reject Driver Application"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:362,columnNumber:53},this),t.jsxDEV(wn,{className:"text-slate-400",children:"Provide a reason for rejection. This will be sent to the driver."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:363,columnNumber:53},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:361,columnNumber:49},this),t.jsxDEV(po,{placeholder:"Reason for rejection...",value:i,onChange:b=>o(b.target.value),className:"bg-slate-700 border-slate-600 text-white"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:367,columnNumber:49},this),t.jsxDEV(Ji,{children:t.jsxDEV(A,{variant:"destructive",onClick:c,disabled:!i,children:"Confirm Rejection"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:374,columnNumber:53},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:373,columnNumber:49},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:360,columnNumber:45},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:354,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:350,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:331,columnNumber:33},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:330,columnNumber:29},this)},d._id,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:329,columnNumber:25},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:327,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:309,columnNumber:9},this)}function Hp(){const[s,e]=m.useState("all"),[a,n]=m.useState("all"),{data:r,isLoading:i}=zp({status:s,priority:a}),o=Wp(),{toast:l}=be(),f=(d,b)=>{o.mutate({ticketId:d,updates:{status:b}},{onSuccess:()=>l({title:"Ticket updated"}),onError:g=>l({title:"Error",description:g.message,variant:"destructive"})})},u={high:"bg-red-500",medium:"bg-amber-500",low:"bg-blue-500"},c={open:"bg-red-500",in_progress:"bg-amber-500",resolved:"bg-emerald-500",closed:"bg-slate-500"};return i?t.jsxDEV("div",{className:"flex justify-center py-12",children:t.jsxDEV(se,{className:"h-8 w-8 animate-spin text-emerald-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:420,columnNumber:59},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:420,columnNumber:16},this):t.jsxDEV("div",{className:"space-y-6",children:[t.jsxDEV("div",{className:"flex flex-wrap gap-4",children:[t.jsxDEV(Os,{value:s,onValueChange:e,children:[t.jsxDEV(As,{className:"w-[150px] bg-slate-800 border-slate-700 text-white",children:t.jsxDEV(Fs,{placeholder:"Status"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:428,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:427,columnNumber:21},this),t.jsxDEV(Es,{children:[t.jsxDEV(te,{value:"all",children:"All Status"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:431,columnNumber:25},this),t.jsxDEV(te,{value:"open",children:"Open"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:432,columnNumber:25},this),t.jsxDEV(te,{value:"in_progress",children:"In Progress"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:433,columnNumber:25},this),t.jsxDEV(te,{value:"resolved",children:"Resolved"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:434,columnNumber:25},this),t.jsxDEV(te,{value:"closed",children:"Closed"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:435,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:430,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:426,columnNumber:17},this),t.jsxDEV(Os,{value:a,onValueChange:n,children:[t.jsxDEV(As,{className:"w-[150px] bg-slate-800 border-slate-700 text-white",children:t.jsxDEV(Fs,{placeholder:"Priority"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:440,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:439,columnNumber:21},this),t.jsxDEV(Es,{children:[t.jsxDEV(te,{value:"all",children:"All Priority"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:443,columnNumber:25},this),t.jsxDEV(te,{value:"high",children:"High"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:444,columnNumber:25},this),t.jsxDEV(te,{value:"medium",children:"Medium"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:445,columnNumber:25},this),t.jsxDEV(te,{value:"low",children:"Low"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:446,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:442,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:438,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:425,columnNumber:13},this),r?.length===0?t.jsxDEV("div",{className:"text-center py-12 text-slate-400",children:[t.jsxDEV(js,{className:"h-12 w-12 mx-auto mb-3"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:453,columnNumber:21},this),t.jsxDEV("p",{children:"No support tickets found"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:454,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:452,columnNumber:17},this):t.jsxDEV("div",{className:"space-y-4",children:r?.map(d=>t.jsxDEV(ee,{className:"bg-slate-800/50 border-slate-700",children:t.jsxDEV(me,{className:"pt-6",children:t.jsxDEV("div",{className:"flex flex-wrap justify-between gap-4",children:[t.jsxDEV("div",{className:"flex-1 space-y-2",children:[t.jsxDEV("div",{className:"flex items-center gap-2",children:[t.jsxDEV("h3",{className:"font-medium text-white",children:d.subject},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:464,columnNumber:45},this),t.jsxDEV(fs,{className:u[d.priority],children:d.priority},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:465,columnNumber:45},this),t.jsxDEV(fs,{className:c[d.status],children:d.status.replace("_"," ")},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:466,columnNumber:45},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:463,columnNumber:41},this),t.jsxDEV("p",{className:"text-sm text-slate-400",children:[d.userName,"  ",d.userEmail]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:468,columnNumber:41},this),t.jsxDEV("p",{className:"text-sm text-slate-400",children:["Category: ",d.category]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:469,columnNumber:41},this),t.jsxDEV("p",{className:"text-slate-300 mt-2",children:d.message},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:470,columnNumber:41},this),t.jsxDEV("p",{className:"text-xs text-slate-500 mt-2",children:["Created: ",new Date(d.createdAt).toLocaleString()]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:471,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:462,columnNumber:37},this),t.jsxDEV("div",{className:"flex flex-col gap-2",children:t.jsxDEV(Os,{defaultValue:d.status,onValueChange:b=>f(d._id,b),children:[t.jsxDEV(As,{className:"w-[140px] bg-slate-700 border-slate-600 text-white",children:t.jsxDEV(Fs,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:478,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:477,columnNumber:45},this),t.jsxDEV(Es,{children:[t.jsxDEV(te,{value:"open",children:"Open"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:481,columnNumber:49},this),t.jsxDEV(te,{value:"in_progress",children:"In Progress"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:482,columnNumber:49},this),t.jsxDEV(te,{value:"resolved",children:"Resolved"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:483,columnNumber:49},this),t.jsxDEV(te,{value:"closed",children:"Closed"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:484,columnNumber:49},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:480,columnNumber:45},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:476,columnNumber:41},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:475,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:461,columnNumber:33},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:460,columnNumber:29},this)},d._id,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:459,columnNumber:25},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:457,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:424,columnNumber:9},this)}function Xp(){const[s,e]=m.useState("all"),[a,n]=m.useState(1),{data:r,isLoading:i}=Qp({status:s,page:a}),o=Gp(),{toast:l}=be(),f=c=>{confirm("Are you sure you want to delete this booking?")&&o.mutate(c,{onSuccess:()=>l({title:"Booking deleted"}),onError:d=>l({title:"Error",description:d.message,variant:"destructive"})})},u={confirmed:"bg-emerald-500",cancelled:"bg-red-500",completed:"bg-blue-500",pending:"bg-amber-500"};return i?t.jsxDEV("div",{className:"flex justify-center py-12",children:t.jsxDEV(se,{className:"h-8 w-8 animate-spin text-emerald-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:523,columnNumber:59},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:523,columnNumber:16},this):t.jsxDEV("div",{className:"space-y-6",children:[t.jsxDEV("div",{className:"flex gap-4",children:t.jsxDEV(Os,{value:s,onValueChange:e,children:[t.jsxDEV(As,{className:"w-[150px] bg-slate-800 border-slate-700 text-white",children:t.jsxDEV(Fs,{placeholder:"Status"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:531,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:530,columnNumber:21},this),t.jsxDEV(Es,{children:[t.jsxDEV(te,{value:"all",children:"All Status"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:534,columnNumber:25},this),t.jsxDEV(te,{value:"confirmed",children:"Confirmed"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:535,columnNumber:25},this),t.jsxDEV(te,{value:"completed",children:"Completed"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:536,columnNumber:25},this),t.jsxDEV(te,{value:"cancelled",children:"Cancelled"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:537,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:533,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:529,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:528,columnNumber:13},this),r?.bookings.length===0?t.jsxDEV("div",{className:"text-center py-12 text-slate-400",children:[t.jsxDEV(ai,{className:"h-12 w-12 mx-auto mb-3"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:544,columnNumber:21},this),t.jsxDEV("p",{children:"No bookings found"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:545,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:543,columnNumber:17},this):t.jsxDEV("div",{className:"space-y-3",children:r?.bookings.map(c=>t.jsxDEV(ee,{className:"bg-slate-800/50 border-slate-700",children:t.jsxDEV(me,{className:"pt-4",children:t.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[t.jsxDEV("div",{className:"flex-1 min-w-[200px]",children:[t.jsxDEV("div",{className:"flex items-center gap-2",children:[t.jsxDEV("h3",{className:"font-medium text-white",children:[c.user?.firstName," ",c.user?.lastName]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:555,columnNumber:45},this),t.jsxDEV(fs,{className:u[c.status]||"bg-slate-500",children:c.status},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:558,columnNumber:45},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:554,columnNumber:41},this),t.jsxDEV("p",{className:"text-sm text-slate-400",children:c.user?.email},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:560,columnNumber:41},this),t.jsxDEV("p",{className:"text-sm text-slate-300 mt-1",children:["Route: ",c.schedule?.route?.startLocation||"N/A","  ",c.schedule?.route?.endLocation||"N/A"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:561,columnNumber:41},this),t.jsxDEV("p",{className:"text-sm text-slate-400",children:["Price: GHS ",c.price||0,"  Seat: #",c.seatNumber||"N/A"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:564,columnNumber:41},this),t.jsxDEV("p",{className:"text-xs text-slate-500",children:new Date(c.createdAt).toLocaleString()},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:567,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:553,columnNumber:37},this),t.jsxDEV(A,{size:"sm",variant:"destructive",onClick:()=>f(c._id),children:t.jsxDEV(Ks,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:572,columnNumber:41},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:571,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:552,columnNumber:33},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:551,columnNumber:29},this)},c._id,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:550,columnNumber:25},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:548,columnNumber:17},this),r&&r.total>20&&t.jsxDEV("div",{className:"flex justify-center gap-2",children:[t.jsxDEV(A,{disabled:a===1,onClick:()=>n(c=>c-1),variant:"outline",children:"Previous"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:583,columnNumber:21},this),t.jsxDEV("span",{className:"text-slate-400 py-2",children:["Page ",a," of ",Math.ceil(r.total/20)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:584,columnNumber:21},this),t.jsxDEV(A,{disabled:a*20>=r.total,onClick:()=>n(c=>c+1),variant:"outline",children:"Next"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:585,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:582,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminConsole.tsx",lineNumber:527,columnNumber:9},this)}function Jp(){const{user:s}=Ce();if(!s||s.role!=="admin")return t.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:t.jsxDEV(ee,{className:"max-w-md w-full bg-slate-800/80 border-slate-700",children:[t.jsxDEV(Fe,{className:"text-center",children:[t.jsxDEV(ol,{className:"h-16 w-16 mx-auto text-red-400 mb-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:25,columnNumber:25},this),t.jsxDEV(Le,{className:"text-white text-2xl",children:"Admin Access Required"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:26,columnNumber:25},this),t.jsxDEV(Ze,{className:"text-slate-400",children:"This area is restricted to administrators only. Please log in with an admin account."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:27,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:24,columnNumber:21},this),t.jsxDEV(me,{className:"space-y-4",children:[t.jsxDEV(Ne,{href:"/login",children:t.jsxDEV(A,{className:"w-full bg-emerald-600 hover:bg-emerald-700",children:"Login as Admin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:33,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:32,columnNumber:25},this),t.jsxDEV("p",{className:"text-center text-slate-500 text-sm",children:"Contact your system administrator if you need access."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:37,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:31,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:23,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:22,columnNumber:13},this);const e=[{title:"Admin Console",description:"Full management dashboard with users, KYC, tickets, and analytics",icon:ti,href:"/admin/console",color:"bg-emerald-500"},{title:"User Management",description:"View, edit, suspend users and manage roles",icon:Is,href:"/admin/console?tab=users",color:"bg-blue-500"},{title:"Driver KYC",description:"Approve or reject driver license applications",icon:ze,href:"/admin/console?tab=kyc",color:"bg-amber-500"},{title:"Support Tickets",description:"Manage customer support tickets",icon:js,href:"/admin/console?tab=tickets",color:"bg-purple-500"},{title:"Register Staff",description:"Add station masters and supervisors",icon:za,href:"/admin/register-staff",color:"bg-pink-500"}];return t.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 pt-20 pb-12 px-4 sm:px-6 lg:px-8",children:t.jsxDEV("div",{className:"max-w-4xl mx-auto",children:[t.jsxDEV("div",{className:"text-center mb-10",children:[t.jsxDEV("div",{className:"inline-flex items-center justify-center p-3 bg-emerald-500/20 rounded-full mb-4",children:t.jsxDEV(ct,{className:"h-10 w-10 text-emerald-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:89,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:88,columnNumber:21},this),t.jsxDEV("h1",{className:"text-3xl font-bold text-white mb-2",children:"Admin Portal"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:91,columnNumber:21},this),t.jsxDEV("p",{className:"text-slate-400",children:["Welcome back, ",s.firstName,". Select an area to manage."]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:92,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:87,columnNumber:17},this),t.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(a=>t.jsxDEV(Ne,{href:a.href,children:t.jsxDEV(ee,{className:"bg-slate-800/50 border-slate-700 hover:border-emerald-500/50 transition-all cursor-pointer group h-full",children:t.jsxDEV(me,{className:"pt-6 flex items-start gap-4",children:[t.jsxDEV("div",{className:`p-3 rounded-lg ${a.color}`,children:t.jsxDEV(a.icon,{className:"h-6 w-6 text-white"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:101,columnNumber:41},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:100,columnNumber:37},this),t.jsxDEV("div",{className:"flex-1",children:[t.jsxDEV("h3",{className:"font-semibold text-white group-hover:text-emerald-400 transition-colors flex items-center",children:[a.title,t.jsxDEV(ll,{className:"h-4 w-4 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:106,columnNumber:45},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:104,columnNumber:41},this),t.jsxDEV("p",{className:"text-sm text-slate-400 mt-1",children:a.description},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:108,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:103,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:99,columnNumber:33},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:98,columnNumber:29},this)},a.href,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:97,columnNumber:25},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:95,columnNumber:17},this),t.jsxDEV("div",{className:"mt-8 text-center",children:t.jsxDEV("p",{className:"text-slate-500 text-sm",children:["Secret access: ",t.jsxDEV("code",{className:"bg-slate-700 px-2 py-1 rounded text-emerald-400",children:"/mwg-ctrl-x9k72"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:118,columnNumber:40},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:117,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:116,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:86,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/AdminLanding.tsx",lineNumber:85,columnNumber:9},this)}function eh(){const{user:s}=Ce(),{toast:e}=be(),[a,n]=m.useState(!1),[r,i]=m.useState({email:"",password:"",firstName:"",lastName:"",role:"admin",staffType:"station_master"});if(!s||s.role!=="admin")return t.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:t.jsxDEV(ee,{className:"max-w-md w-full bg-slate-800/80 border-slate-700",children:t.jsxDEV(Fe,{className:"text-center",children:[t.jsxDEV(ct,{className:"h-16 w-16 mx-auto text-red-400 mb-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:31,columnNumber:25},this),t.jsxDEV(Le,{className:"text-white text-2xl",children:"Access Denied"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:32,columnNumber:25},this),t.jsxDEV(Ze,{className:"text-slate-400",children:"Only administrators can register new staff members."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:33,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:30,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:29,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:28,columnNumber:13},this);const o=async l=>{l.preventDefault(),n(!0);try{const f=localStorage.getItem("token"),u=await fetch("/api/admin/register-staff",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify(r)}),c=await u.json();if(!u.ok)throw new Error(c.message||"Failed to register staff");e({title:"Staff Registered Successfully",description:`${r.firstName} ${r.lastName} has been registered as ${r.staffType.replace("_"," ")}.`}),i({email:"",password:"",firstName:"",lastName:"",role:"admin",staffType:"station_master"})}catch(f){e({title:"Registration Failed",description:f.message,variant:"destructive"})}finally{n(!1)}};return t.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 pt-20 pb-12 px-4 sm:px-6 lg:px-8",children:t.jsxDEV("div",{className:"max-w-lg mx-auto",children:[t.jsxDEV(Ne,{href:"/admin/console",children:t.jsxDEV(A,{variant:"ghost",className:"text-slate-400 hover:text-white mb-4",children:[t.jsxDEV(cl,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:93,columnNumber:25},this)," Back to Admin Console"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:92,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:91,columnNumber:17},this),t.jsxDEV(ee,{className:"bg-slate-800/80 border-slate-700",children:[t.jsxDEV(Fe,{children:t.jsxDEV("div",{className:"flex items-center gap-3",children:[t.jsxDEV("div",{className:"p-2 bg-pink-500/20 rounded-lg",children:t.jsxDEV(za,{className:"h-6 w-6 text-pink-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:101,columnNumber:33},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:100,columnNumber:29},this),t.jsxDEV("div",{children:[t.jsxDEV(Le,{className:"text-white",children:"Register Staff"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:104,columnNumber:33},this),t.jsxDEV(Ze,{className:"text-slate-400",children:"Add station masters and supervisors to the system"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:105,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:103,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:99,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:98,columnNumber:21},this),t.jsxDEV(me,{children:t.jsxDEV("form",{onSubmit:o,className:"space-y-4",children:[t.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{className:"text-slate-300",children:"First Name"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:115,columnNumber:37},this),t.jsxDEV(O,{placeholder:"John",value:r.firstName,onChange:l=>i({...r,firstName:l.target.value}),required:!0,className:"bg-slate-700 border-slate-600 text-white"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:116,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:114,columnNumber:33},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{className:"text-slate-300",children:"Last Name"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:125,columnNumber:37},this),t.jsxDEV(O,{placeholder:"Doe",value:r.lastName,onChange:l=>i({...r,lastName:l.target.value}),required:!0,className:"bg-slate-700 border-slate-600 text-white"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:126,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:124,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:113,columnNumber:29},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{className:"text-slate-300",children:"Email"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:137,columnNumber:33},this),t.jsxDEV(O,{type:"email",placeholder:"staff@company.com",value:r.email,onChange:l=>i({...r,email:l.target.value}),required:!0,className:"bg-slate-700 border-slate-600 text-white"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:138,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:136,columnNumber:29},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{className:"text-slate-300",children:"Password"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:149,columnNumber:33},this),t.jsxDEV(O,{type:"password",placeholder:"Strong password",value:r.password,onChange:l=>i({...r,password:l.target.value}),required:!0,minLength:6,className:"bg-slate-700 border-slate-600 text-white"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:150,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:148,columnNumber:29},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{className:"text-slate-300",children:"Staff Type"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:162,columnNumber:33},this),t.jsxDEV(Os,{value:r.staffType,onValueChange:l=>i({...r,staffType:l}),children:[t.jsxDEV(As,{className:"bg-slate-700 border-slate-600 text-white",children:t.jsxDEV(Fs,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:168,columnNumber:41},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:167,columnNumber:37},this),t.jsxDEV(Es,{children:[t.jsxDEV(te,{value:"station_master",children:"Station Master"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:171,columnNumber:41},this),t.jsxDEV(te,{value:"supervisor",children:"Supervisor"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:172,columnNumber:41},this),t.jsxDEV(te,{value:"super_admin",children:"Super Admin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:173,columnNumber:41},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:170,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:163,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:161,columnNumber:29},this),t.jsxDEV(A,{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700",disabled:a,children:a?t.jsxDEV(t.Fragment,{children:[t.jsxDEV(se,{className:"h-4 w-4 mr-2 animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:185,columnNumber:41},this),"Registering..."]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:184,columnNumber:37},this):t.jsxDEV(t.Fragment,{children:[t.jsxDEV(za,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:190,columnNumber:41},this),"Register Staff Member"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:189,columnNumber:37},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:178,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:112,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:111,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:97,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:90,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/RegisterStaff.tsx",lineNumber:89,columnNumber:9},this)}function sh(){const[,s]=Na(),{register:e}=Ce(),{toast:a}=be(),[n,r]=m.useState(!1),[i,o]=m.useState(!1),[l,f]=m.useState("passenger"),[u,c]=m.useState(!1),[d,b]=m.useState(""),[g,D]=m.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",licenseNumber:"",make:"",model:"",year:"",plateNumber:"",color:"",capacity:""}),h=N=>{D({...g,[N.target.name]:N.target.value})},y=async()=>{if(d){o(!0);try{const R=await(await fetch("/api/auth/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d})})).json();a({title:"Email sent!",description:R.message})}catch(N){a({title:"Failed to resend",description:N.message,variant:"destructive"})}finally{o(!1)}}},x=async N=>{if(N.preventDefault(),g.password!==g.confirmPassword){a({title:"Passwords match error",description:"Passwords do not match",variant:"destructive"});return}if(!g.firstName||!g.lastName||!g.email||!g.password){a({title:"Missing fields",description:"Please fill in all basic information",variant:"destructive"});return}if(l==="driver"&&(!g.licenseNumber||!g.make||!g.model||!g.plateNumber||!g.capacity)){a({title:"Missing vehicle details",description:"All vehicle and driver details are required",variant:"destructive"});return}r(!0);try{(await e({firstName:g.firstName,lastName:g.lastName,email:g.email,password:g.password,role:l,driverDetails:l==="driver"?{licenseNumber:g.licenseNumber,vehicleParams:{make:g.make,model:g.model,year:g.year,plateNumber:g.plateNumber,color:g.color,capacity:parseInt(g.capacity)}}:void 0})).requiresVerification?(c(!0),b(g.email),a({title:"Check your email!",description:"We sent you a verification link"})):(a({title:"Welcome!",description:"Account created successfully"}),s("/dashboard"))}catch(R){a({title:"Registration failed",description:R.message,variant:"destructive"})}finally{r(!1)}};return u?t.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 flex items-center justify-center p-4 py-8 transition-colors",children:t.jsxDEV(ee,{className:"w-full max-w-md shadow-2xl rounded-2xl border-0 overflow-hidden bg-white dark:bg-slate-900 dark:shadow-slate-950/50",children:[t.jsxDEV("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-8 text-center text-white",children:[t.jsxDEV("div",{className:"mx-auto bg-white/20 w-20 h-20 rounded-full flex items-center justify-center mb-4 backdrop-blur-sm",children:t.jsxDEV(vt,{className:"h-10 w-10 text-white"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:127,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:126,columnNumber:13},this),t.jsxDEV("h1",{className:"text-2xl font-bold font-display",children:"Check Your Email"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:129,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:125,columnNumber:11},this),t.jsxDEV(me,{className:"p-8 text-center",children:[t.jsxDEV("div",{className:"mb-6",children:[t.jsxDEV(Ns,{className:"h-16 w-16 text-green-500 mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:134,columnNumber:15},this),t.jsxDEV("h2",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-2",children:"Almost there!"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:135,columnNumber:15},this),t.jsxDEV("p",{className:"text-slate-600 dark:text-slate-300",children:"We've sent a verification link to:"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:136,columnNumber:15},this),t.jsxDEV("p",{className:"font-semibold text-blue-600 mt-2",children:d},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:139,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:133,columnNumber:13},this),t.jsxDEV("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"Click the link in your email to verify your account and start using BusConnect. The link will expire in 24 hours."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:142,columnNumber:13},this),t.jsxDEV("div",{className:"space-y-3",children:[t.jsxDEV(A,{variant:"outline",className:"w-full",onClick:y,disabled:i,children:[i&&t.jsxDEV(se,{className:"mr-2 h-4 w-4 animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:154,columnNumber:33},this),i?"Sending...":"Resend verification email"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:148,columnNumber:15},this),t.jsxDEV("button",{type:"button",onClick:()=>s("/"),className:"text-sm text-blue-600 font-medium hover:underline",children:"Back to login"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:158,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:147,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:132,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:124,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:123,columnNumber:7},this):t.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 flex items-center justify-center p-4 py-8 transition-colors",children:t.jsxDEV(ee,{className:"w-full max-w-xl shadow-2xl rounded-2xl border-0 overflow-hidden bg-white dark:bg-slate-900 dark:shadow-slate-950/50",children:[t.jsxDEV("div",{className:"bg-blue-600 p-6 text-center text-white",children:[t.jsxDEV("div",{className:"mx-auto bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mb-4 backdrop-blur-sm",children:l==="driver"?t.jsxDEV(ze,{className:"h-8 w-8 text-white"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:177,columnNumber:34},this):t.jsxDEV(ws,{className:"h-8 w-8 text-white"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:177,columnNumber:75},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:176,columnNumber:11},this),t.jsxDEV("h1",{className:"text-3xl font-bold font-display",children:"Join BusConnect"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:179,columnNumber:11},this),t.jsxDEV("p",{className:"text-blue-100 mt-2",children:"Create your account to get started"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:180,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:175,columnNumber:9},this),t.jsxDEV(me,{className:"p-8",children:t.jsxDEV("form",{onSubmit:x,className:"space-y-6",children:[t.jsxDEV("div",{className:"space-y-3",children:[t.jsxDEV(L,{className:"text-base font-semibold text-slate-700 dark:text-slate-200",children:"I am a:"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:188,columnNumber:15},this),t.jsxDEV(xn,{value:l,onValueChange:N=>f(N),className:"grid grid-cols-2 gap-4",children:[t.jsxDEV("div",{children:[t.jsxDEV(jt,{value:"passenger",id:"passenger",className:"peer sr-only"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:191,columnNumber:19},this),t.jsxDEV(L,{htmlFor:"passenger",className:"flex flex-col items-center justify-center rounded-xl border-2 border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-slate-200 dark:hover:border-slate-600 peer-data-[state=checked]:border-blue-600 peer-data-[state=checked]:bg-blue-50 dark:peer-data-[state=checked]:bg-blue-900/30 cursor-pointer transition-all",children:[t.jsxDEV(ws,{className:"mb-2 h-6 w-6 text-slate-600 dark:text-slate-300 peer-data-[state=checked]:text-blue-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:196,columnNumber:21},this),t.jsxDEV("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Passenger"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:197,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:192,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:190,columnNumber:17},this),t.jsxDEV("div",{children:[t.jsxDEV(jt,{value:"driver",id:"driver",className:"peer sr-only"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:202,columnNumber:19},this),t.jsxDEV(L,{htmlFor:"driver",className:"flex flex-col items-center justify-center rounded-xl border-2 border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-slate-200 dark:hover:border-slate-600 peer-data-[state=checked]:border-emerald-600 peer-data-[state=checked]:bg-emerald-50 dark:peer-data-[state=checked]:bg-emerald-900/30 cursor-pointer transition-all",children:[t.jsxDEV(ze,{className:"mb-2 h-6 w-6 text-slate-600 dark:text-slate-300 peer-data-[state=checked]:text-emerald-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:207,columnNumber:21},this),t.jsxDEV("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Driver"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:208,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:203,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:201,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:189,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:187,columnNumber:13},this),t.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"firstName",children:"First Name"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:217,columnNumber:17},this),t.jsxDEV(O,{id:"firstName",name:"firstName",placeholder:"John",value:g.firstName,onChange:h,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:218,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:216,columnNumber:15},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"lastName",children:"Last Name"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:221,columnNumber:17},this),t.jsxDEV(O,{id:"lastName",name:"lastName",placeholder:"Doe",value:g.lastName,onChange:h,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:222,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:220,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:215,columnNumber:13},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"email",children:"Email Address"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:227,columnNumber:15},this),t.jsxDEV(O,{id:"email",name:"email",type:"email",placeholder:"john@example.com",value:g.email,onChange:h,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:228,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:226,columnNumber:13},this),t.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"password",children:"Password"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:233,columnNumber:17},this),t.jsxDEV(O,{id:"password",name:"password",type:"password",value:g.password,onChange:h,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:234,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:232,columnNumber:15},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"confirmPassword",children:"Confirm Password"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:237,columnNumber:17},this),t.jsxDEV(O,{id:"confirmPassword",name:"confirmPassword",type:"password",value:g.confirmPassword,onChange:h,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:238,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:236,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:231,columnNumber:13},this),l==="driver"&&t.jsxDEV("div",{className:"space-y-6 pt-4 border-t border-slate-100 dark:border-slate-700 animate-in slide-in-from-top-4 fade-in duration-300",children:[t.jsxDEV("div",{className:"flex items-center gap-2",children:[t.jsxDEV(ze,{className:"text-emerald-600 h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:246,columnNumber:19},this),t.jsxDEV("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:"Vehicle & Driver Details"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:247,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:245,columnNumber:17},this),t.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"licenseNumber",children:"Driver License ID"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:252,columnNumber:21},this),t.jsxDEV(O,{id:"licenseNumber",name:"licenseNumber",placeholder:"DL-12345678",value:g.licenseNumber,onChange:h,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:253,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:251,columnNumber:19},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"plateNumber",children:"Plate Number"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:256,columnNumber:21},this),t.jsxDEV(O,{id:"plateNumber",name:"plateNumber",placeholder:"GT-123-24",value:g.plateNumber,onChange:h,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:257,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:255,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:250,columnNumber:17},this),t.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"make",children:"Car Make"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:263,columnNumber:21},this),t.jsxDEV(O,{id:"make",name:"make",placeholder:"Toyota",value:g.make,onChange:h,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:264,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:262,columnNumber:19},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"model",children:"Car Model"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:267,columnNumber:21},this),t.jsxDEV(O,{id:"model",name:"model",placeholder:"HiAce",value:g.model,onChange:h,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:268,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:266,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:261,columnNumber:17},this),t.jsxDEV("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"year",children:"Year"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:274,columnNumber:21},this),t.jsxDEV(O,{id:"year",name:"year",placeholder:"2020",value:g.year,onChange:h,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:275,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:273,columnNumber:19},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"color",children:"Color"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:278,columnNumber:21},this),t.jsxDEV(O,{id:"color",name:"color",placeholder:"White",value:g.color,onChange:h,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:279,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:277,columnNumber:19},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"capacity",children:"Capacity"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:282,columnNumber:21},this),t.jsxDEV(O,{id:"capacity",name:"capacity",type:"number",placeholder:"15",value:g.capacity,onChange:h,required:!0,className:"h-11 bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:283,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:281,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:272,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:244,columnNumber:15},this),t.jsxDEV(A,{type:"submit",className:`w-full h-12 text-base font-bold shadow-lg transition-all ${l==="driver"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-200":"bg-blue-600 hover:bg-blue-700 shadow-blue-200"}`,disabled:n,children:[n&&t.jsxDEV(se,{className:"mr-2 h-5 w-5 animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:290,columnNumber:29},this),n?"creating Account...":`Sign Up as ${l==="passenger"?"Passenger":"Driver"}`]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:289,columnNumber:13},this),t.jsxDEV("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:["Already have an account?"," ",t.jsxDEV("button",{type:"button",onClick:()=>s("/"),className:"text-blue-600 font-bold hover:underline",children:"Sign in"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:296,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:294,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:184,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:183,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:174,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Signup.tsx",lineNumber:173,columnNumber:5},this)}function th(){const[,s]=Na(),e=ul(),[a,n]=m.useState("loading"),[r,i]=m.useState("");m.useEffect(()=>{const u=new URLSearchParams(e).get("token");if(!u){n("error"),i("No verification token provided");return}o(u)},[e]);const o=async f=>{try{const u=await fetch(`/api/auth/verify-email?token=${f}`),c=await u.json();u.ok?c.alreadyVerified?(n("already-verified"),i("Your email has already been verified")):(n("success"),i("Your email has been verified successfully!")):(n("error"),i(c.message||"Verification failed"))}catch{n("error"),i("An error occurred during verification")}},l=()=>{switch(a){case"loading":return t.jsxDEV(t.Fragment,{children:[t.jsxDEV("div",{className:"mx-auto bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mb-6",children:t.jsxDEV(se,{className:"h-10 w-10 text-blue-600 animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:57,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:56,columnNumber:13},this),t.jsxDEV("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Verifying your email"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:59,columnNumber:13},this),t.jsxDEV("p",{className:"text-slate-600",children:"Please wait while we verify your email address..."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:60,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:55,columnNumber:11},this);case"success":return t.jsxDEV(t.Fragment,{children:[t.jsxDEV("div",{className:"mx-auto bg-green-100 w-20 h-20 rounded-full flex items-center justify-center mb-6",children:t.jsxDEV(Ns,{className:"h-10 w-10 text-green-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:68,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:67,columnNumber:13},this),t.jsxDEV("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Email Verified!"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:70,columnNumber:13},this),t.jsxDEV("p",{className:"text-slate-600 mb-6",children:r},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:71,columnNumber:13},this),t.jsxDEV(A,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>s("/"),children:"Continue to Login"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:72,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:66,columnNumber:11},this);case"already-verified":return t.jsxDEV(t.Fragment,{children:[t.jsxDEV("div",{className:"mx-auto bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mb-6",children:t.jsxDEV(vt,{className:"h-10 w-10 text-blue-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:85,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:84,columnNumber:13},this),t.jsxDEV("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Already Verified"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:87,columnNumber:13},this),t.jsxDEV("p",{className:"text-slate-600 mb-6",children:r},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:88,columnNumber:13},this),t.jsxDEV(A,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>s("/"),children:"Go to Login"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:89,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:83,columnNumber:11},this);case"error":return t.jsxDEV(t.Fragment,{children:[t.jsxDEV("div",{className:"mx-auto bg-red-100 w-20 h-20 rounded-full flex items-center justify-center mb-6",children:t.jsxDEV(Bs,{className:"h-10 w-10 text-red-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:102,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:101,columnNumber:13},this),t.jsxDEV("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Verification Failed"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:104,columnNumber:13},this),t.jsxDEV("p",{className:"text-slate-600 mb-6",children:r},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:105,columnNumber:13},this),t.jsxDEV("div",{className:"space-y-3",children:[t.jsxDEV(A,{variant:"outline",className:"w-full",onClick:()=>s("/signup"),children:"Back to Signup"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:107,columnNumber:15},this),t.jsxDEV("button",{type:"button",onClick:()=>s("/"),className:"text-sm text-blue-600 font-medium hover:underline",children:"Go to Login"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:114,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:106,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:100,columnNumber:11},this)}};return t.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:t.jsxDEV(ee,{className:"w-full max-w-md shadow-2xl rounded-2xl border-0 overflow-hidden",children:t.jsxDEV(me,{className:"p-8 text-center",children:l()},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:130,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:129,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/VerifyEmail.tsx",lineNumber:128,columnNumber:5},this)}function bo(){return Re({queryKey:[je.profile.get.path],queryFn:async()=>{if(!localStorage.getItem("token"))return null;try{const e=await Ie(je.profile.get.path);if(e.status===404)return null;if(!e.ok)throw new Error("Failed to fetch profile");return je.profile.get.responses[200].parse(await e.json())}catch(e){if(e instanceof Us)return null;throw e}}})}function ah(){const s=he();return fe({mutationFn:async e=>{const a=await Ie(je.profile.update.path,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){const n=await a.text();throw console.error("Profile update failed response:",n),new Error(`Update failed (${a.status}): ${n.substring(0,100)}`)}return a.json()},onSuccess:()=>{s.invalidateQueries({queryKey:[je.profile.get.path]})},onError:e=>{e instanceof Us&&s.invalidateQueries({queryKey:["/api/auth/user"]})}})}const go=m.forwardRef(({className:s,orientation:e="horizontal",decorative:a=!0,...n},r)=>t.jsxDEV(ni,{ref:r,decorative:a,orientation:e,className:T("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...n},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ui/separator.tsx",lineNumber:14,columnNumber:5},void 0));go.displayName=ni.displayName;const nh="bus-connect-offline",rh=1;let Ht=null;async function xo(){return Ht||new Promise((s,e)=>{const a=indexedDB.open(nh,rh);a.onerror=()=>e(a.error),a.onsuccess=()=>{Ht=a.result,s(Ht)},a.onupgradeneeded=n=>{const r=n.target.result;if(!r.objectStoreNames.contains("routes")){const i=r.createObjectStore("routes",{keyPath:"_id"});i.createIndex("name","name",{unique:!1}),i.createIndex("startLocation","startLocation",{unique:!1})}if(!r.objectStoreNames.contains("busStops")){const i=r.createObjectStore("busStops",{keyPath:"_id"});i.createIndex("name","name",{unique:!1}),i.createIndex("region","region",{unique:!1})}r.objectStoreNames.contains("favorites")||r.createObjectStore("favorites",{keyPath:"id"}),r.objectStoreNames.contains("preferences")||r.createObjectStore("preferences",{keyPath:"key"}),r.objectStoreNames.contains("schedules")||r.createObjectStore("schedules",{keyPath:"_id"}).createIndex("routeId","routeId",{unique:!1})}})}async function Aa(s,e="readonly"){return(await xo()).transaction(s,e).objectStore(s)}async function Vn(s,e){const a=await Aa(s,"readwrite"),n=Array.isArray(e)?e:[e];return new Promise((r,i)=>{const o=a.transaction;n.forEach(l=>{a.put(l)}),o.oncomplete=()=>r(),o.onerror=()=>i(o.error)})}async function Un(s){const e=await Aa(s);return new Promise((a,n)=>{const r=e.getAll();r.onsuccess=()=>a(r.result),r.onerror=()=>n(r.error)})}async function ih(s,e){const a=await Aa(s);return new Promise((n,r)=>{const i=a.get(e);i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async function Xt(s){const e=await Aa(s,"readwrite");return new Promise((a,n)=>{const r=e.clear();r.onsuccess=()=>a(),r.onerror=()=>n(r.error)})}async function oh(s){await Vn("routes",s),await Tn("lastRoutesSync",new Date().toISOString())}async function Sn(){return Un("routes")}async function lh(s){await Vn("busStops",s),await Tn("lastStopsSync",new Date().toISOString())}async function _n(){return Un("busStops")}async function ch(){return Un("schedules")}async function Tn(s,e){await Vn("preferences",{key:s,value:e})}async function yo(s,e){return(await ih("preferences",s))?.value??e}async function uh(s){await Tn("lowDataMode",s)}async function dh(){return yo("lowDataMode",!1)}async function mh(){try{const s=await fetch("/api/routes");if(s.ok){const r=await s.json();await oh(r)}const e=await fetch("/api/bus-stops");if(e.ok){const r=await e.json();await lh(r)}const a=await Sn(),n=await _n();return{routes:a.length,stops:n.length}}catch(s){throw console.error("Offline sync failed:",s),s}}async function fh(){return yo("lastRoutesSync",null)}async function ph(){const s=await Sn(),e=await _n(),a=await ch();s.length+e.length+a.length;const n=JSON.stringify([...s,...e,...a]).length;return n<1024?`${n} B`:n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/(1024*1024)).toFixed(1)} MB`}async function hh(){if(await Xt("routes"),await Xt("busStops"),await Xt("schedules"),await Xt("favorites"),"caches"in window){const s=await caches.keys();await Promise.all(s.filter(e=>e.startsWith("bus-connect-")).map(e=>caches.delete(e)))}}function Rn(){const[s,e]=m.useState(navigator.onLine);return m.useEffect(()=>{const a=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",a),window.addEventListener("offline",n),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",n)}},[]),s}function Nh(){const[s,e]=m.useState(!1),[a,n]=m.useState(!0);m.useEffect(()=>{dh().then(i=>{e(i),n(!1)})},[]);const r=m.useCallback(async i=>{await uh(i),e(i)},[]);return{lowDataMode:s,toggleLowDataMode:r,isLoading:a}}function ko(){const s=he(),e=Rn();m.useEffect(()=>{xo().catch(console.error)},[]);const{data:a,refetch:n}=Re({queryKey:["offline","stats"],queryFn:async()=>{const[o,l,f,u]=await Promise.all([ph(),fh(),Sn(),_n()]);return{size:o,lastSync:l,routesCount:f.length,stopsCount:u.length}},staleTime:6e4}),r=fe({mutationFn:mh,onSuccess:()=>{n(),s.invalidateQueries({queryKey:["routes"]}),s.invalidateQueries({queryKey:["bus-stops"]})}}),i=fe({mutationFn:hh,onSuccess:()=>{n()}});return{isOnline:e,stats:a||{size:"0 B",lastSync:null,routesCount:0,stopsCount:0},sync:r.mutate,isSyncing:r.isPending,syncError:r.error,clearCache:i.mutate,isClearing:i.isPending}}function bh(){const{toast:s}=be(),e=Rn(),{stats:a,sync:n,isSyncing:r,clearCache:i,isClearing:o}=ko(),{lowDataMode:l,toggleLowDataMode:f,isLoading:u}=Nh(),[c,d]=m.useState(!1),b=async()=>{try{await n(),s({title:"Sync Complete",description:`Cached ${a.routesCount} routes and ${a.stopsCount} stops`})}catch{s({title:"Sync Failed",description:"Could not sync offline data. Please try again.",variant:"destructive"})}},g=async()=>{try{await i(),d(!1),s({title:"Cache Cleared",description:"All offline data has been removed"})}catch{s({title:"Error",description:"Could not clear cache",variant:"destructive"})}},D=h=>{if(!h)return"Never";const y=new Date(h),N=new Date().getTime()-y.getTime(),R=Math.floor(N/(1e3*60)),w=Math.floor(N/(1e3*60*60)),S=Math.floor(N/(1e3*60*60*24));return R<1?"Just now":R<60?`${R} min ago`:w<24?`${w} hours ago`:`${S} days ago`};return t.jsxDEV(ee,{className:"p-6 rounded-2xl border-none shadow-sm",children:[t.jsxDEV("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-4",children:[t.jsxDEV(dl,{className:"h-5 w-5 text-blue-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:78,columnNumber:9},this),"Data & Offline Settings"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:77,columnNumber:7},this),t.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl mb-4",children:[t.jsxDEV("div",{className:"flex items-center gap-3",children:[e?t.jsxDEV(ml,{className:"h-5 w-5 text-emerald-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:86,columnNumber:13},this):t.jsxDEV(ri,{className:"h-5 w-5 text-amber-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:88,columnNumber:13},this),t.jsxDEV("div",{children:[t.jsxDEV("p",{className:"font-medium text-slate-800",children:e?"Connected":"Offline"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:91,columnNumber:13},this),t.jsxDEV("p",{className:"text-xs text-slate-500",children:e?"Using live data":"Using cached data"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:94,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:90,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:84,columnNumber:9},this),t.jsxDEV("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:e?"Online":"Offline"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:99,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:83,columnNumber:7},this),t.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl mb-4",children:[t.jsxDEV("div",{className:"flex items-center gap-3",children:[t.jsxDEV(fl,{className:"h-5 w-5 text-blue-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:111,columnNumber:11},this),t.jsxDEV("div",{children:[t.jsxDEV("p",{className:"font-medium text-slate-800",children:"Low Data Mode"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:113,columnNumber:13},this),t.jsxDEV("p",{className:"text-xs text-slate-500",children:"Reduces map quality and data usage"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:114,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:112,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:110,columnNumber:9},this),t.jsxDEV(Bn,{checked:l,onCheckedChange:f,disabled:u},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:119,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:109,columnNumber:7},this),t.jsxDEV("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[t.jsxDEV("div",{className:"p-3 bg-blue-50 rounded-xl",children:[t.jsxDEV("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[t.jsxDEV(ii,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:130,columnNumber:13},this),t.jsxDEV("span",{className:"text-xs font-medium",children:"Routes"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:131,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:129,columnNumber:11},this),t.jsxDEV("p",{className:"text-xl font-bold text-slate-800",children:a.routesCount},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:133,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:128,columnNumber:9},this),t.jsxDEV("div",{className:"p-3 bg-emerald-50 rounded-xl",children:[t.jsxDEV("div",{className:"flex items-center gap-2 text-emerald-600 mb-1",children:[t.jsxDEV($s,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:137,columnNumber:13},this),t.jsxDEV("span",{className:"text-xs font-medium",children:"Stops"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:138,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:136,columnNumber:11},this),t.jsxDEV("p",{className:"text-xl font-bold text-slate-800",children:a.stopsCount},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:140,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:135,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:127,columnNumber:7},this),t.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl mb-4",children:[t.jsxDEV("div",{className:"flex items-center gap-3",children:[t.jsxDEV(hs,{className:"h-5 w-5 text-slate-400"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:147,columnNumber:11},this),t.jsxDEV("div",{children:[t.jsxDEV("p",{className:"text-sm text-slate-600",children:"Last synced"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:149,columnNumber:13},this),t.jsxDEV("p",{className:"font-medium text-slate-800",children:D(a.lastSync)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:150,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:148,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:146,columnNumber:9},this),t.jsxDEV("span",{className:"text-sm text-slate-500",children:a.size},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:155,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:145,columnNumber:7},this),t.jsxDEV("div",{className:"flex gap-3",children:[t.jsxDEV(A,{onClick:b,disabled:r||!e,className:"flex-1 rounded-xl",children:[t.jsxDEV(oi,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:165,columnNumber:11},this),r?"Syncing...":"Sync Now"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:160,columnNumber:9},this),c?t.jsxDEV("div",{className:"flex gap-2",children:[t.jsxDEV(A,{variant:"destructive",onClick:g,disabled:o,className:"rounded-xl",children:o?"Clearing...":"Confirm"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:171,columnNumber:13},this),t.jsxDEV(A,{variant:"outline",onClick:()=>d(!1),className:"rounded-xl",children:"Cancel"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:179,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:170,columnNumber:11},this):t.jsxDEV(A,{variant:"outline",onClick:()=>d(!0),className:"rounded-xl",children:[t.jsxDEV(Ks,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:193,columnNumber:13},this),"Clear"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:188,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:159,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/DataSettings.tsx",lineNumber:76,columnNumber:5},this)}function vo(s,e){var a=Array.prototype.slice.call(e);return a.push(pl),s.apply(this,a)}function gh(){return vo(hl,arguments)}function xh(){return vo(Nl,arguments)}const Co=m.forwardRef(({value:s,onChange:e,defaultCountry:a="GH",placeholder:n="Enter phone number",className:r,disabled:i,error:o},l)=>t.jsxDEV("div",{className:"space-y-1",children:[t.jsxDEV("div",{className:T("flex items-center rounded-xl border bg-slate-50 dark:bg-slate-800 transition-colors","focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500",o?"border-red-500":"border-slate-200 dark:border-slate-700",i&&"opacity-50 cursor-not-allowed",r),children:t.jsxDEV(bl,{international:!0,countryCallingCodeEditable:!1,defaultCountry:a,value:s,onChange:e,placeholder:n,disabled:i,className:"phone-input-container"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/PhoneInput.tsx",lineNumber:31,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/PhoneInput.tsx",lineNumber:22,columnNumber:9},void 0),o&&t.jsxDEV("p",{className:"text-xs text-red-500 ml-1",children:o},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/PhoneInput.tsx",lineNumber:42,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/PhoneInput.tsx",lineNumber:21,columnNumber:7},void 0));Co.displayName="PhoneInput";function yh(s){return s?xh(s)?{valid:!0}:{valid:!1,error:"Please enter a valid phone number"}:{valid:!1,error:"Phone number is required"}}function kh(s){try{const e=gh(s);return e?e.formatInternational():s}catch{return s}}function vh(){const{user:s,logout:e}=Ce(),{data:a,isLoading:n}=bo(),r=ah(),{toast:i}=be(),o=he(),[l,f]=m.useState(!1),[u,c]=m.useState({firstName:"",lastName:"",vehicleMake:"",vehicleModel:"",plateNumber:"",capacity:""}),[d,b]=m.useState(""),[g,D]=m.useState(),[h,y]=m.useState(!1),[x,N]=m.useState(!1);m.useEffect(()=>{s&&(c({firstName:s.firstName||"",lastName:s.lastName||"",vehicleMake:s.driverDetails?.vehicleParams?.make||"",vehicleModel:s.driverDetails?.vehicleParams?.model||"",plateNumber:s.driverDetails?.vehicleParams?.plateNumber||"",capacity:s.driverDetails?.vehicleParams?.capacity?.toString()||""}),b(s.phone||""))},[s]);const R=async()=>{if(d){const C=yh(d);if(!C.valid){D(C.error),i({title:"Error",description:C.error||"Please enter a valid phone number",variant:"destructive"});return}}D(void 0),N(!0);try{await r.mutateAsync({phone:d||""}),i({title:"Phone Saved",description:"Your phone number has been updated."}),y(!1),await o.refetchQueries({queryKey:["/api/auth/user"]})}catch(C){i({title:"Error",description:C.message,variant:"destructive"})}finally{N(!1)}},w=async()=>{try{const C={firstName:u.firstName,lastName:u.lastName};s?.role==="driver"&&(C.driverDetails={...s.driverDetails,vehicleParams:{...s.driverDetails?.vehicleParams,make:u.vehicleMake,model:u.vehicleModel,plateNumber:u.plateNumber,capacity:parseInt(u.capacity)}}),await r.mutateAsync(C),i({title:"Profile Updated",description:"Your changes have been saved."}),f(!1)}catch(C){console.error("Update failed:",C),i({title:"Update Failed",description:C.message?.includes("Unexpected token")?"Server returned an invalid response. Please check if the backend is running.":C.message,variant:"destructive"})}},S=()=>{e()};return n?t.jsxDEV("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-950 flex items-center justify-center transition-colors",children:t.jsxDEV("div",{className:"text-center",children:[t.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:123,columnNumber:11},this),t.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Loading profile..."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:124,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:122,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:121,columnNumber:7},this):!s||!a?t.jsxDEV("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-950 flex items-center justify-center transition-colors",children:t.jsxDEV(ee,{className:"w-full max-w-md",children:[t.jsxDEV(Fe,{children:[t.jsxDEV(Le,{children:"Profile Not Found"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:135,columnNumber:13},this),t.jsxDEV(Ze,{children:"Please sign in to view your profile."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:136,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:134,columnNumber:11},this),t.jsxDEV(me,{children:t.jsxDEV(Ne,{href:"/",children:t.jsxDEV(A,{className:"w-full",children:"Go to Home"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:140,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:139,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:138,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:133,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:132,columnNumber:7},this):t.jsxDEV("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-950 py-8 transition-colors",children:t.jsxDEV("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxDEV("div",{className:"mb-8",children:[t.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"My Profile"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:154,columnNumber:11},this),t.jsxDEV("p",{className:"mt-2 text-gray-600",children:"Manage your account settings and preferences"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:155,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:153,columnNumber:9},this),t.jsxDEV("div",{className:"space-y-6",children:[t.jsxDEV(ee,{className:"dark:bg-slate-900 dark:border-slate-800",children:[t.jsxDEV(Fe,{className:"flex flex-row items-center justify-between",children:[t.jsxDEV("div",{children:[t.jsxDEV(Le,{className:"flex items-center",children:[t.jsxDEV(ws,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:164,columnNumber:19},this),"Personal Information"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:163,columnNumber:17},this),t.jsxDEV(Ze,{children:"Your account details and role"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:167,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:162,columnNumber:15},this),t.jsxDEV(A,{variant:"outline",size:"sm",onClick:()=>f(!l),children:l?"Cancel":"Edit Profile"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:171,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:161,columnNumber:13},this),t.jsxDEV(me,{className:"space-y-4",children:[l?t.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{children:"First Name"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:179,columnNumber:21},this),t.jsxDEV(O,{value:u.firstName,onChange:C=>c({...u,firstName:C.target.value})},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:180,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:178,columnNumber:19},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{children:"Last Name"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:186,columnNumber:21},this),t.jsxDEV(O,{value:u.lastName,onChange:C=>c({...u,lastName:C.target.value})},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:187,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:185,columnNumber:19},this),t.jsxDEV(A,{className:"col-span-2",onClick:w,disabled:r.isPending,children:r.isPending?"Saving...":"Save Changes"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:192,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:177,columnNumber:17},this):t.jsxDEV(t.Fragment,{children:[t.jsxDEV("div",{className:"flex items-center space-x-3",children:[t.jsxDEV("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center",children:t.jsxDEV(ws,{className:"w-8 h-8 text-primary"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:200,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:199,columnNumber:21},this),t.jsxDEV("div",{children:[t.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[s.firstName," ",s.lastName]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:203,columnNumber:23},this),t.jsxDEV("div",{className:"flex items-center text-gray-600",children:[t.jsxDEV(vt,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:207,columnNumber:25},this),s.email]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:206,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:202,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:198,columnNumber:19},this),t.jsxDEV(go,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:213,columnNumber:19},this),t.jsxDEV("div",{className:"flex items-center justify-between",children:[t.jsxDEV("div",{className:"flex items-center space-x-2",children:[t.jsxDEV(ct,{className:"w-4 h-4 text-gray-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:217,columnNumber:23},this),t.jsxDEV("span",{className:"text-sm font-medium text-gray-700",children:"Role"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:218,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:216,columnNumber:21},this),t.jsxDEV(fs,{variant:a.role==="admin"?"default":"secondary",children:a.role==="admin"?"Administrator":a.role==="driver"?"Driver":"Passenger"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:220,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:215,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:197,columnNumber:17},this),t.jsxDEV("div",{className:"flex items-center justify-between",children:[t.jsxDEV("span",{className:"text-sm font-medium text-gray-700",children:"Member since"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:229,columnNumber:17},this),t.jsxDEV("span",{className:"text-sm text-gray-600",children:a.createdAt?new Date(a.createdAt).toLocaleDateString():"N/A"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:230,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:228,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:175,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:160,columnNumber:11},this),t.jsxDEV(ee,{className:"dark:bg-slate-900 dark:border-slate-800",children:[t.jsxDEV(Fe,{className:"flex flex-row items-center justify-between",children:[t.jsxDEV("div",{children:[t.jsxDEV(Le,{className:"flex items-center",children:[t.jsxDEV(At,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:242,columnNumber:19},this),"Phone Number"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:241,columnNumber:17},this),t.jsxDEV(Ze,{children:"Add your phone number so drivers and passengers can contact you"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:245,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:240,columnNumber:15},this),s.phone&&t.jsxDEV(fs,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400",children:[t.jsxDEV(Ns,{className:"w-3 h-3 mr-1"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:251,columnNumber:19},this),"Saved"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:250,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:239,columnNumber:13},this),t.jsxDEV(me,{className:"space-y-4",children:h||!s.phone?t.jsxDEV("div",{className:"space-y-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{htmlFor:"phone",children:"Phone Number (with country code)"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:260,columnNumber:21},this),t.jsxDEV(Co,{value:d||"",onChange:C=>{b(C),D(void 0)},defaultCountry:"GH",placeholder:"Enter your phone number",error:g,className:"h-12"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:261,columnNumber:21},this),t.jsxDEV("p",{className:"text-xs text-slate-500",children:"Select your country and enter your phone number"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:272,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:259,columnNumber:19},this),t.jsxDEV("div",{className:"flex gap-2",children:[t.jsxDEV(A,{onClick:R,disabled:x||!d,className:"flex-1",children:[x&&t.jsxDEV(se,{className:"w-4 h-4 mr-2 animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:281,columnNumber:41},this),x?"Saving...":"Save Phone Number"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:276,columnNumber:21},this),s.phone&&t.jsxDEV(A,{variant:"outline",onClick:()=>{y(!1),b(s.phone||"")},children:"Cancel"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:285,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:275,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:258,columnNumber:17},this):t.jsxDEV("div",{className:"space-y-3",children:[t.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[t.jsxDEV("div",{className:"flex items-center gap-3",children:[t.jsxDEV(At,{className:"w-5 h-5 text-slate-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:301,columnNumber:23},this),t.jsxDEV("span",{className:"font-medium",children:s.phone?kh(s.phone):s.phone},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:302,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:300,columnNumber:21},this),t.jsxDEV(Ns,{className:"w-5 h-5 text-emerald-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:304,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:299,columnNumber:19},this),t.jsxDEV(A,{variant:"outline",onClick:()=>y(!0),className:"w-full",children:"Change Number"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:307,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:298,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:256,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:238,columnNumber:11},this),s.role==="driver"&&t.jsxDEV(ee,{className:"dark:bg-slate-900 dark:border-slate-800",children:[t.jsxDEV(Fe,{children:[t.jsxDEV(Le,{className:"flex items-center",children:[t.jsxDEV(ze,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:324,columnNumber:19},this),"Vehicle Details"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:323,columnNumber:17},this),t.jsxDEV(Ze,{children:"Manage your vehicle parameters for accurate bookings"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:327,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:322,columnNumber:15},this),t.jsxDEV(me,{className:"space-y-4",children:[t.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{className:"flex items-center gap-2",children:[t.jsxDEV(ze,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:335,columnNumber:23},this)," Make"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:334,columnNumber:21},this),t.jsxDEV(O,{placeholder:"e.g. Toyota",value:u.vehicleMake,onChange:C=>c({...u,vehicleMake:C.target.value}),disabled:!l},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:337,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:333,columnNumber:19},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{className:"flex items-center gap-2",children:[t.jsxDEV(ze,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:346,columnNumber:23},this)," Model"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:345,columnNumber:21},this),t.jsxDEV(O,{placeholder:"e.g. Hiace",value:u.vehicleModel,onChange:C=>c({...u,vehicleModel:C.target.value}),disabled:!l},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:348,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:344,columnNumber:19},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{className:"flex items-center gap-2",children:[t.jsxDEV(gl,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:357,columnNumber:23},this)," Plate Number"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:356,columnNumber:21},this),t.jsxDEV(O,{placeholder:"e.g. GT-1234-22",value:u.plateNumber,onChange:C=>c({...u,plateNumber:C.target.value}),disabled:!l},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:359,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:355,columnNumber:19},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV(L,{className:"flex items-center gap-2",children:[t.jsxDEV(Is,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:368,columnNumber:23},this)," Max Capacity"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:367,columnNumber:21},this),t.jsxDEV(O,{type:"number",placeholder:"e.g. 15",value:u.capacity,onChange:C=>c({...u,capacity:C.target.value}),disabled:!l},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:370,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:366,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:332,columnNumber:17},this),l&&t.jsxDEV(A,{className:"w-full mt-2",onClick:w,disabled:r.isPending,children:r.isPending?"Saving Bus Details...":"Update Vehicle Data"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:380,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:331,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:321,columnNumber:13},this),t.jsxDEV(ee,{className:"dark:bg-slate-900 dark:border-slate-800",children:[t.jsxDEV(Fe,{children:[t.jsxDEV(Le,{children:"Account Actions"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:391,columnNumber:15},this),t.jsxDEV(Ze,{children:"Manage your account settings"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:392,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:390,columnNumber:13},this),t.jsxDEV(me,{className:"space-y-3",children:t.jsxDEV(A,{variant:"outline",onClick:S,className:"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50",children:[t.jsxDEV(li,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:402,columnNumber:17},this),"Sign Out"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:397,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:396,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:389,columnNumber:11},this),t.jsxDEV(bh,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:409,columnNumber:11},this),t.jsxDEV(ee,{className:"dark:bg-slate-900 dark:border-slate-800",children:[t.jsxDEV(Fe,{children:t.jsxDEV(Le,{children:"Quick Stats"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:414,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:413,columnNumber:13},this),t.jsxDEV(me,{children:t.jsxDEV("div",{className:"grid grid-cols-2 gap-4 text-center",children:[t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"text-2xl font-bold text-primary",children:"0"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:419,columnNumber:19},this),t.jsxDEV("div",{className:"text-sm text-gray-600",children:"Total Rides"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:420,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:418,columnNumber:17},this),t.jsxDEV("div",{children:[t.jsxDEV("div",{className:"text-2xl font-bold text-primary",children:"0"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:423,columnNumber:19},this),t.jsxDEV("div",{className:"text-sm text-gray-600",children:"Active Bookings"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:424,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:422,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:417,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:416,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:412,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:158,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:152,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/Profile.tsx",lineNumber:151,columnNumber:5},this)}function Ch({editData:s,onSuccess:e}){const{user:a}=Ce(),{toast:n}=be(),[r,i]=m.useState(!1),[o,l]=m.useState({startLocation:"",endLocation:"",departureTime:""}),[f,u]=m.useState(!1),[c,d]=m.useState(null),[b,g]=m.useState(!1);m.useEffect(()=>{r&&!s&&(l({startLocation:"",endLocation:"",departureTime:""}),d(null))},[r,s]),m.useEffect(()=>{s&&r&&(l({startLocation:s.startLocation||s.route?.startLocation||"",endLocation:s.endLocation||s.route?.endLocation||"",departureTime:s.departureTime?new Date(s.departureTime).toISOString().slice(0,16):""}),s.price&&d({price:s.price,distance:s.distance||0}))},[s,r]),m.useEffect(()=>{const y=setTimeout(async()=>{if(!o.startLocation||!o.endLocation){d(null);return}g(!0);try{const x=localStorage.getItem("token"),N=await fetch("/api/fare/estimate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({startLocation:o.startLocation,endLocation:o.endLocation})});if(N.ok){const R=await N.json();d({price:R.pricePerSeat,distance:R.distance})}}catch(x){console.error("Failed to fetch fare estimate:",x)}finally{g(!1)}},500);return()=>clearTimeout(y)},[o.startLocation,o.endLocation]);const D=async()=>{if(!o.startLocation||!o.endLocation||!o.departureTime){n({title:"Error",description:"Please fill all fields",variant:"destructive"});return}u(!0);try{const h=localStorage.getItem("token"),y=!!s,x=y?`/api/schedules/${s._id||s.id}`:"/api/schedules",N=await fetch(x,{method:y?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({startLocation:o.startLocation,endLocation:o.endLocation,departureTime:o.departureTime,driverId:a?._id})});if(!N.ok){const w=await N.json().catch(()=>({}));throw new Error(w.message||"Failed to save")}const R=await N.json();n({title:y?"Route Updated":"Route Created",description:`Fare: GHS ${R.price?.toFixed(2)||c?.price?.toFixed(2)||"calculated"} per seat`}),i(!1),y||(l({startLocation:"",endLocation:"",departureTime:""}),d(null)),e?.()}catch(h){n({title:"Error",description:h.message,variant:"destructive"})}finally{u(!1)}};return t.jsxDEV(An,{open:r,onOpenChange:i,children:[t.jsxDEV(En,{asChild:!0,children:s?t.jsxDEV(A,{size:"icon",variant:"ghost",className:"h-10 w-10 rounded-full hover:bg-blue-50 text-blue-600",children:t.jsxDEV(Tr,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:146,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:145,columnNumber:11},this):t.jsxDEV(A,{className:"bg-emerald-600 hover:bg-emerald-700 rounded-full px-6 font-bold text-white shadow-md",children:[t.jsxDEV(Rr,{className:"mr-2 h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:150,columnNumber:13},this)," Add New Route"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:149,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:143,columnNumber:7},this),t.jsxDEV(ka,{className:"rounded-[2.5rem] bg-white p-8",children:[t.jsxDEV(va,{children:t.jsxDEV(Ca,{className:"text-2xl font-black",children:s?"Update Route":"Add Route"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:155,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:155,columnNumber:9},this),t.jsxDEV("div",{className:"space-y-4 mt-4",children:[t.jsxDEV("div",{className:"space-y-1",children:[t.jsxDEV(L,{className:"font-bold",children:"From"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:157,columnNumber:38},this),t.jsxDEV(O,{value:o.startLocation,onChange:h=>l({...o,startLocation:h.target.value}),className:"rounded-xl h-12 bg-slate-50 border-none"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:157,columnNumber:79},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:157,columnNumber:11},this),t.jsxDEV("div",{className:"space-y-1",children:[t.jsxDEV(L,{className:"font-bold",children:"To"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:158,columnNumber:38},this),t.jsxDEV(O,{value:o.endLocation,onChange:h=>l({...o,endLocation:h.target.value}),className:"rounded-xl h-12 bg-slate-50 border-none"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:158,columnNumber:77},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:158,columnNumber:11},this),t.jsxDEV("div",{className:"space-y-1",children:[t.jsxDEV(L,{className:"font-bold",children:"Time"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:159,columnNumber:38},this),t.jsxDEV(O,{type:"datetime-local",value:o.departureTime,onChange:h=>l({...o,departureTime:h.target.value}),className:"rounded-xl h-12 bg-slate-50 border-none"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:159,columnNumber:79},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:159,columnNumber:11},this),o.startLocation&&o.endLocation&&t.jsxDEV("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-100",children:[t.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[t.jsxDEV(Mr,{className:"h-5 w-5 text-blue-600"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:165,columnNumber:17},this),t.jsxDEV("span",{className:"font-bold text-slate-700",children:"Auto-calculated Fare"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:166,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:164,columnNumber:15},this),b?t.jsxDEV("div",{className:"flex items-center gap-2 text-slate-500",children:[t.jsxDEV("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:170,columnNumber:19},this),t.jsxDEV("span",{children:"Calculating..."},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:171,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:169,columnNumber:17},this):c?t.jsxDEV("div",{className:"flex items-baseline gap-2",children:[t.jsxDEV("span",{className:"text-2xl font-black text-blue-700",children:["GHS ",c.price.toFixed(2)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:175,columnNumber:19},this),t.jsxDEV("span",{className:"text-slate-500",children:["per seat | ",c.distance," km"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:176,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:174,columnNumber:17},this):t.jsxDEV("span",{className:"text-slate-500",children:"Enter locations to see fare"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:179,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:163,columnNumber:13},this),t.jsxDEV(A,{onClick:D,disabled:f,className:"w-full h-14 bg-blue-600 rounded-2xl font-bold text-lg mt-4 shadow-lg shadow-blue-100 disabled:opacity-50",children:[t.jsxDEV(Pr,{className:"mr-2 h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:185,columnNumber:13},this)," ",f?"Saving...":s?"Update Schedule":"Save Schedule"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:184,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:156,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:154,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/pages/DriverRoutes.tsx",lineNumber:142,columnNumber:5},this)}let qa=null,mr=!1;function Mn(){return qa||(qa=new(window.AudioContext||window.webkitAudioContext)),qa}function Dh(){if(!mr)try{const s=Mn();s.state==="suspended"&&s.resume().catch(()=>{});const e=s.createBuffer(1,1,22050),a=s.createBufferSource();a.buffer=e,a.connect(s.destination),a.start(0),mr=!0}catch{}}if(typeof window<"u"){const s=["touchstart","touchend","mousedown","keydown","click"],e=()=>{Dh(),s.forEach(a=>document.removeEventListener(a,e,!0))};s.forEach(a=>document.addEventListener(a,e,!0))}function _e(s,e,a,n,r){const i=s.createOscillator(),o=s.createGain();i.connect(o),o.connect(s.destination),i.type="triangle",i.frequency.setValueAtTime(e,a),o.gain.setValueAtTime(0,a),o.gain.linearRampToValueAtTime(r,a+.02),o.gain.setValueAtTime(r,a+.02),o.gain.exponentialRampToValueAtTime(.01,a+n),i.start(a),i.stop(a+n);const l=s.createOscillator(),f=s.createGain();l.connect(f),f.connect(s.destination),l.type="sine",l.frequency.setValueAtTime(e*2,a),f.gain.setValueAtTime(0,a),f.gain.linearRampToValueAtTime(r*.25,a+.02),f.gain.exponentialRampToValueAtTime(.01,a+n*.6),l.start(a),l.stop(a+n)}async function Ah(){try{const s=Mn();s.state==="suspended"&&await s.resume();const e=s.currentTime,a=523.25,n=659.25,r=783.99,i=1046.5;_e(s,a,e,.3,.25),_e(s,n,e+.15,.3,.25),_e(s,r,e+.3,.4,.28),_e(s,a,e+1,.3,.3),_e(s,n,e+1.15,.3,.3),_e(s,r,e+1.3,.4,.33),_e(s,a,e+2,.3,.28),_e(s,n,e+2.15,.3,.28),_e(s,r,e+2.3,.35,.3),_e(s,i,e+2.5,.5,.22)}catch(s){console.warn("Could not play driver notification sound:",s)}}async function Eh(){try{const s=Mn();s.state==="suspended"&&await s.resume();const e=s.currentTime,a=783.99,n=1174.66;_e(s,a,e,.4,.2),_e(s,n,e+.2,.5,.15),_e(s,a,e+1,.4,.18),_e(s,n,e+1.2,.5,.13)}catch(s){console.warn("Could not play passenger notification sound:",s)}}function Do(){return localStorage.getItem("notificationSoundEnabled")!=="false"}function wh(s){localStorage.setItem("notificationSoundEnabled",s?"true":"false")}function jh(s){Do()&&(s==="driver"?Ah():Eh())}let Oa=new Set,fr=!0;const Ys=()=>{const s=localStorage.getItem("token");return s?{Authorization:`Bearer ${s}`}:{}};async function Bh(s=50,e=!1){const a=new URLSearchParams({limit:String(s)});e&&a.append("unreadOnly","true");const n=await fetch(`/api/notifications?${a}`,{headers:Ys()});if(!n.ok)throw new Error("Failed to fetch notifications");return n.json()}async function Vh(){const s=await fetch("/api/notifications/unread-count",{headers:Ys()});if(!s.ok)throw new Error("Failed to fetch unread count");return(await s.json()).count}function Uh(s=50,e=!1,a){const n=m.useRef(new Set),r=Re({queryKey:["notifications",{limit:s,unreadOnly:e}],queryFn:()=>Bh(s,e),staleTime:1e4,refetchInterval:15e3,refetchIntervalInBackground:!0});return m.useEffect(()=>{if(r.data&&r.data.length>0){const i=new Set(r.data.map(l=>l._id));if(fr){fr=!1,n.current=i,r.data.forEach(l=>Oa.add(l._id));return}const o=r.data.filter(l=>!(l.read??l.isRead)&&!Oa.has(l._id));o.length>0&&(jh(a),o.forEach(l=>Oa.add(l._id))),n.current=i}},[r.data,a]),r}function Sh(){return Re({queryKey:["notifications","unread-count"],queryFn:Vh,staleTime:5e3,refetchInterval:15e3,refetchIntervalInBackground:!0})}function _h(){const s=he();return fe({mutationFn:async e=>{const a=await fetch(`/api/notifications/${e}/read`,{method:"PUT",headers:Ys()});if(!a.ok)throw new Error("Failed to mark as read");return a.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["notifications"]})}})}function Th(){const s=he();return fe({mutationFn:async()=>{const e=await fetch("/api/notifications/read-all",{method:"POST",headers:Ys()});if(!e.ok)throw new Error("Failed to mark all as read");return e.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["notifications"]})}})}function Rh(){const s=he();return fe({mutationFn:async e=>{const a=await fetch(`/api/notifications/${e}`,{method:"DELETE",headers:Ys()});if(!a.ok)throw new Error("Failed to delete notification");return a.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["notifications"]})}})}function Mh(){const s=he();return fe({mutationFn:async({requestId:e,scheduleId:a})=>{const n=await fetch(`/api/ride-requests/${e}/accept`,{method:"POST",headers:{...Ys(),"Content-Type":"application/json"},body:JSON.stringify({scheduleId:a})});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to accept ride request")}return n.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["notifications"]}),s.invalidateQueries({queryKey:["ride-requests"]}),s.invalidateQueries({queryKey:["schedules"]})}})}function Ph(){const s=he();return fe({mutationFn:async e=>{const a=await fetch(`/api/ride-requests/${e}/decline`,{method:"POST",headers:Ys()});if(!a.ok)throw new Error("Failed to decline ride request");return a.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["notifications"]})}})}const Lh={arrival:t.jsxDEV($s,{className:"h-5 w-5 text-emerald-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:29,columnNumber:12},void 0),delay:t.jsxDEV(hs,{className:"h-5 w-5 text-amber-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:30,columnNumber:10},void 0),congestion:t.jsxDEV(Cl,{className:"h-5 w-5 text-red-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:31,columnNumber:15},void 0),route_change:t.jsxDEV($s,{className:"h-5 w-5 text-blue-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:32,columnNumber:17},void 0),booking:t.jsxDEV(Ns,{className:"h-5 w-5 text-blue-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:33,columnNumber:12},void 0),general:t.jsxDEV(hn,{className:"h-5 w-5 text-slate-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:34,columnNumber:12},void 0),ride_request:t.jsxDEV(ze,{className:"h-5 w-5 text-orange-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:35,columnNumber:17},void 0),ride_request_accepted:t.jsxDEV(vl,{className:"h-5 w-5 text-green-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:36,columnNumber:26},void 0)},Ih={arrival:"bg-emerald-50 border-emerald-200 dark:bg-emerald-900/20 dark:border-emerald-800",delay:"bg-amber-50 border-amber-200 dark:bg-amber-900/20 dark:border-amber-800",congestion:"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800",route_change:"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800",booking:"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800",general:"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700",ride_request:"bg-orange-50 border-orange-200 dark:bg-orange-900/20 dark:border-orange-800",ride_request_accepted:"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800"};function qh({isOpen:s,onClose:e}){const{user:a}=Ce(),{data:n=[],isLoading:r}=Uh(50,!1,a?.role),{toast:i}=be(),o=_h(),l=Th(),f=Rh(),u=Mh(),c=Ph(),[d,b]=m.useState(new Set),[g,D]=m.useState(!0);m.useEffect(()=>{D(Do())},[]);const h=()=>{const k=!g;D(k),wh(k),i({title:k?"Sound enabled":"Sound muted",description:k?"You'll hear a chime for new notifications":"Notification sounds are now muted"})},y=k=>k.read??k.isRead??!1,x=n.filter(k=>!y(k)),N=a?.role==="driver",R=k=>{y(k)||o.mutate(k._id)},w=()=>{l.mutate()},S=(k,G)=>{G.stopPropagation(),f.mutate(k)},C=async(k,G)=>{G.stopPropagation();const ae=k.data?.requestId;if(ae){b($=>new Set($).add(ae));try{const $=await u.mutateAsync({requestId:ae,scheduleId:k.data?.scheduleId});i({title:"Booking Confirmed!",description:`Seat reserved for ${k.data?.passengerName||"passenger"}. They have been notified.`}),f.mutate(k._id)}catch($){i({title:"Failed to confirm",description:$.message||"Could not confirm the booking. Please try again.",variant:"destructive"})}finally{b($=>{const Ve=new Set($);return Ve.delete(ae),Ve})}}},Z=async(k,G)=>{G.stopPropagation();const ae=k.data?.requestId;if(ae){b($=>new Set($).add(ae));try{await c.mutateAsync(ae),i({title:"Request declined",description:"The ride request has been dismissed."})}catch($){i({title:"Error",description:$.message||"Could not decline the request.",variant:"destructive"})}finally{b($=>{const Ve=new Set($);return Ve.delete(ae),Ve})}}},H=k=>{try{return ju(new Date(k),{addSuffix:!0})}catch{return"recently"}};return t.jsxDEV(Ea,{show:s,as:m.Fragment,children:t.jsxDEV(wa,{onClose:e,className:"relative z-50",children:[t.jsxDEV(Ea.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t.jsxDEV("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:178,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:169,columnNumber:9},this),t.jsxDEV(Ea.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"ease-in duration-200",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:t.jsxDEV(wa.Panel,{className:"fixed inset-y-0 right-0 w-full max-w-md bg-white dark:bg-slate-900 shadow-xl flex flex-col",children:[t.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[t.jsxDEV(wa.Title,{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsxDEV(hn,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:195,columnNumber:17},this),"Notifications"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:194,columnNumber:15},this),t.jsxDEV("div",{className:"flex items-center gap-1",children:[x.length>0&&t.jsxDEV(A,{variant:"ghost",size:"sm",onClick:w,className:"text-blue-600 hover:text-blue-700",children:[t.jsxDEV(ei,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:206,columnNumber:21},this),"Mark all read"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:200,columnNumber:19},this),t.jsxDEV(A,{variant:"ghost",size:"icon",onClick:h,title:g?"Mute notifications":"Enable notification sound",className:g?"text-blue-600":"text-slate-400",children:g?t.jsxDEV(xl,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:217,columnNumber:35},this):t.jsxDEV(yl,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:217,columnNumber:69},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:210,columnNumber:17},this),t.jsxDEV(A,{variant:"ghost",size:"icon",onClick:e,children:t.jsxDEV(dn,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:220,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:219,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:198,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:193,columnNumber:13},this),t.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:r?t.jsxDEV("div",{className:"flex items-center justify-center py-12",children:t.jsxDEV("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:229,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:228,columnNumber:17},this):n.length===0?t.jsxDEV("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[t.jsxDEV(kl,{className:"h-12 w-12 text-slate-300 dark:text-slate-600 mb-3"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:233,columnNumber:19},this),t.jsxDEV("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"No notifications yet"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:234,columnNumber:19},this),t.jsxDEV("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-1",children:"You'll see bus alerts and updates here"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:235,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:232,columnNumber:17},this):n.map(k=>t.jsxDEV(ee,{onClick:()=>R(k),className:`p-4 rounded-xl cursor-pointer transition-all border-2 ${y(k)?"bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 opacity-70":Ih[k.type]}`,children:t.jsxDEV("div",{className:"flex gap-3",children:[t.jsxDEV("div",{className:"flex-shrink-0 mt-0.5",children:Lh[k.type]},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:252,columnNumber:23},this),t.jsxDEV("div",{className:"flex-1 min-w-0",children:[t.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[t.jsxDEV("h4",{className:`font-semibold text-slate-800 dark:text-white ${y(k)?"":"font-bold"}`,children:k.title},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:259,columnNumber:27},this),t.jsxDEV(A,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0 text-slate-400 hover:text-red-500",onClick:G=>S(k._id,G),children:t.jsxDEV(Ks,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:268,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:262,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:258,columnNumber:25},this),t.jsxDEV("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:k.body},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:272,columnNumber:25},this),k.data?.delayMinutes&&t.jsxDEV("span",{className:"inline-block mt-2 px-2 py-0.5 bg-amber-100 text-amber-700 text-xs font-medium rounded-full",children:[k.data.delayMinutes," min delay"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:276,columnNumber:27},this),k.data?.severity&&k.data.severity!=="low"&&t.jsxDEV("span",{className:`inline-block mt-2 ml-2 px-2 py-0.5 text-xs font-medium rounded-full ${k.data.severity==="high"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:[k.data.severity," priority"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:282,columnNumber:27},this),k.type==="ride_request"&&t.jsxDEV("div",{className:"mt-3 space-y-3",children:[(k.data?.from||k.data?.to)&&t.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[t.jsxDEV($s,{className:"h-4 w-4 text-orange-500"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:299,columnNumber:33},this),t.jsxDEV("span",{className:"font-medium",children:k.data?.from},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:300,columnNumber:33},this),t.jsxDEV("span",{className:"text-slate-400 dark:text-slate-500",children:""},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:301,columnNumber:33},this),t.jsxDEV("span",{className:"font-medium",children:k.data?.to},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:302,columnNumber:33},this),k.data?.seats&&k.data.seats>1&&t.jsxDEV("span",{className:"ml-2 px-2 py-0.5 bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 text-xs font-bold rounded-full",children:[k.data.seats," seats"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:304,columnNumber:35},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:298,columnNumber:31},this),k.data?.estimatedFare&&t.jsxDEV("div",{className:"flex items-center gap-3 p-2 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[t.jsxDEV("div",{className:"flex-1",children:[t.jsxDEV("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-medium",children:"Estimated Fare"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:315,columnNumber:35},this),t.jsxDEV("div",{className:"flex items-baseline gap-2",children:[t.jsxDEV("span",{className:"text-lg font-black text-emerald-700 dark:text-emerald-300",children:["GHS ",Number(k.data.estimatedFare).toFixed(2)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:317,columnNumber:37},this),t.jsxDEV("span",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:"per seat"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:320,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:316,columnNumber:35},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:314,columnNumber:33},this),k.data.estimatedDistance&&t.jsxDEV("div",{className:"text-right",children:[t.jsxDEV("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Distance"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:325,columnNumber:37},this),t.jsxDEV("div",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:[k.data.estimatedDistance," km"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:326,columnNumber:37},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:324,columnNumber:35},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:313,columnNumber:31},this),k.data?.passengerPhone?t.jsxDEV("a",{href:`tel:${k.data.passengerPhone}`,onClick:G=>G.stopPropagation(),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-xl transition-colors shadow-sm",children:[t.jsxDEV(At,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:341,columnNumber:33},this),t.jsxDEV("span",{children:["Call Passenger: ",k.data.passengerPhone]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:342,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:336,columnNumber:31},this):t.jsxDEV("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 text-sm rounded-xl",children:[t.jsxDEV(At,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:346,columnNumber:33},this),t.jsxDEV("span",{children:"No phone number provided"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:347,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:345,columnNumber:31},this),N&&k.data?.requestId&&t.jsxDEV("div",{className:"flex items-center gap-2",children:[t.jsxDEV(A,{size:"sm",onClick:G=>C(k,G),disabled:d.has(k.data.requestId),className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-xl h-10",children:[d.has(k.data.requestId)?t.jsxDEV(se,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:361,columnNumber:37},this):t.jsxDEV(Ns,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:363,columnNumber:37},this),"Confirm Seat"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:354,columnNumber:33},this),t.jsxDEV(A,{size:"sm",variant:"outline",onClick:G=>Z(k,G),disabled:d.has(k.data.requestId),className:"px-4 border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-xl h-10",children:d.has(k.data.requestId)?t.jsxDEV(se,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:375,columnNumber:37},this):t.jsxDEV(Bs,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:377,columnNumber:37},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:367,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:353,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:295,columnNumber:27},this),t.jsxDEV("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:H(k.createdAt)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:386,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:257,columnNumber:23},this),!y(k)&&t.jsxDEV("div",{className:"flex-shrink-0",children:t.jsxDEV("div",{className:"h-2 w-2 bg-blue-500 rounded-full"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:394,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:393,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:250,columnNumber:21},this)},k._id,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:241,columnNumber:19},this))},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:226,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:191,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:182,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:167,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationCenter.tsx",lineNumber:166,columnNumber:5},this)}function Oh(){const[s,e]=m.useState(!1),{data:a=0}=Sh();return t.jsxDEV(t.Fragment,{children:[t.jsxDEV(A,{variant:"ghost",size:"icon",className:"relative",onClick:()=>e(!0),children:[t.jsxDEV(hn,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationBell.tsx",lineNumber:20,columnNumber:9},this),a>0&&t.jsxDEV("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white text-xs font-bold flex items-center justify-center",children:a>9?"9+":a},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationBell.tsx",lineNumber:22,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationBell.tsx",lineNumber:14,columnNumber:7},this),t.jsxDEV(qh,{isOpen:s,onClose:()=>e(!1)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationBell.tsx",lineNumber:28,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/NotificationBell.tsx",lineNumber:13,columnNumber:5},this)}var Fh=(s,e,a,n,r,i,o,l)=>{let f=document.documentElement,u=["light","dark"];function c(g){(Array.isArray(s)?s:[s]).forEach(D=>{let h=D==="class",y=h&&i?r.map(x=>i[x]||x):r;h?(f.classList.remove(...y),f.classList.add(i&&i[g]?i[g]:g)):f.setAttribute(D,g)}),d(g)}function d(g){l&&u.includes(g)&&(f.style.colorScheme=g)}function b(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)c(n);else try{let g=localStorage.getItem(e)||a,D=o&&g==="system"?b():g;c(D)}catch{}},pr=["light","dark"],Ao="(prefers-color-scheme: dark)",$h=typeof window>"u",Pn=m.createContext(void 0),zh={setTheme:s=>{},themes:[]},Wh=()=>{var s;return(s=m.useContext(Pn))!=null?s:zh},Qh=s=>m.useContext(Pn)?m.createElement(m.Fragment,null,s.children):m.createElement(Kh,{...s}),Gh=["light","dark"],Kh=({forcedTheme:s,disableTransitionOnChange:e=!1,enableSystem:a=!0,enableColorScheme:n=!0,storageKey:r="theme",themes:i=Gh,defaultTheme:o=a?"system":"light",attribute:l="data-theme",value:f,children:u,nonce:c,scriptProps:d})=>{let[b,g]=m.useState(()=>Zh(r,o)),[D,h]=m.useState(()=>b==="system"?Fa():b),y=f?Object.values(f):i,x=m.useCallback(S=>{let C=S;if(!C)return;S==="system"&&a&&(C=Fa());let Z=f?f[C]:C,H=e?Hh(c):null,k=document.documentElement,G=ae=>{ae==="class"?(k.classList.remove(...y),Z&&k.classList.add(Z)):ae.startsWith("data-")&&(Z?k.setAttribute(ae,Z):k.removeAttribute(ae))};if(Array.isArray(l)?l.forEach(G):G(l),n){let ae=pr.includes(o)?o:null,$=pr.includes(C)?C:ae;k.style.colorScheme=$}H?.()},[c]),N=m.useCallback(S=>{let C=typeof S=="function"?S(b):S;g(C);try{localStorage.setItem(r,C)}catch{}},[b]),R=m.useCallback(S=>{let C=Fa(S);h(C),b==="system"&&a&&!s&&x("system")},[b,s]);m.useEffect(()=>{let S=window.matchMedia(Ao);return S.addListener(R),R(S),()=>S.removeListener(R)},[R]),m.useEffect(()=>{let S=C=>{C.key===r&&(C.newValue?g(C.newValue):N(o))};return window.addEventListener("storage",S),()=>window.removeEventListener("storage",S)},[N]),m.useEffect(()=>{x(s??b)},[s,b]);let w=m.useMemo(()=>({theme:b,setTheme:N,forcedTheme:s,resolvedTheme:b==="system"?D:b,themes:a?[...i,"system"]:i,systemTheme:a?D:void 0}),[b,N,s,D,a,i]);return m.createElement(Pn.Provider,{value:w},m.createElement(Yh,{forcedTheme:s,storageKey:r,attribute:l,enableSystem:a,enableColorScheme:n,defaultTheme:o,value:f,themes:i,nonce:c,scriptProps:d}),u)},Yh=m.memo(({forcedTheme:s,storageKey:e,attribute:a,enableSystem:n,enableColorScheme:r,defaultTheme:i,value:o,themes:l,nonce:f,scriptProps:u})=>{let c=JSON.stringify([a,e,i,s,l,o,n,r]).slice(1,-1);return m.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?f:"",dangerouslySetInnerHTML:{__html:`(${Fh.toString()})(${c})`}})}),Zh=(s,e)=>{if($h)return;let a;try{a=localStorage.getItem(s)||void 0}catch{}return a||e},Hh=s=>{let e=document.createElement("style");return s&&e.setAttribute("nonce",s),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},Fa=s=>(s||(s=window.matchMedia(Ao)),s.matches?"dark":"light");function Xh(){const{theme:s,setTheme:e}=Wh(),[a,n]=m.useState(!1);return m.useEffect(()=>{n(!0)},[]),a?t.jsxDEV(A,{variant:"ghost",size:"icon",className:"rounded-full w-10 h-10 bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-slate-100 transition-all",onClick:()=>e(s==="dark"?"light":"dark"),children:[t.jsxDEV(Dl,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ThemeToggle.tsx",lineNumber:24,columnNumber:13},this),t.jsxDEV(Al,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ThemeToggle.tsx",lineNumber:25,columnNumber:13},this),t.jsxDEV("span",{className:"sr-only",children:"Toggle theme"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ThemeToggle.tsx",lineNumber:26,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/ThemeToggle.tsx",lineNumber:18,columnNumber:9},this):null}function Jh(){const[s]=Na(),{user:e,logout:a}=Ce(),{data:n}=bo(),r=n?.role==="admin",i=e?.role==="driver";return t.jsxDEV("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-slate-950 shadow-sm border-b border-gray-200 dark:border-slate-800 transition-colors",children:[t.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxDEV("div",{className:"flex justify-between items-center h-14 md:h-16",children:[t.jsxDEV("div",{className:"flex items-center gap-4 md:gap-8",children:[t.jsxDEV(Ne,{href:"/",className:"flex items-center gap-1.5 group",children:[t.jsxDEV("div",{className:"p-0.5 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-100 dark:border-slate-700 group-hover:border-blue-200 dark:group-hover:border-blue-500 transition-all overflow-hidden",children:t.jsxDEV("img",{src:"/favicon.png",alt:"Make We Go Logo",className:"h-7 w-7 object-contain"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:33,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:32,columnNumber:15},this),t.jsxDEV("span",{className:"text-base md:text-xl font-black text-gray-900 dark:text-white",children:"Make We Go"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:35,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:31,columnNumber:13},this),t.jsxDEV("div",{className:"hidden md:flex items-center gap-1",children:e&&t.jsxDEV(t.Fragment,{children:[t.jsxDEV(Ne,{href:"/dashboard",children:t.jsxDEV(A,{variant:s==="/dashboard"?"default":"ghost",size:"sm",className:"rounded-full font-semibold",children:i?"Dashboard":"Find Ride"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:44,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:43,columnNumber:19},this),i?t.jsxDEV(Ne,{href:"/driver/my-routes",children:t.jsxDEV(A,{variant:s==="/driver/my-routes"?"default":"ghost",size:"sm",className:"rounded-full font-semibold",children:"My Routes"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:54,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:53,columnNumber:21},this):t.jsxDEV(Ne,{href:"/my-rides",children:t.jsxDEV(A,{variant:s==="/my-rides"?"default":"ghost",size:"sm",className:"rounded-full font-semibold",children:"My Tickets"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:64,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:63,columnNumber:21},this),r&&t.jsxDEV(Ne,{href:"/admin/console",children:t.jsxDEV(A,{variant:s==="/admin/console"||s==="/admin"?"default":"ghost",size:"sm",className:"rounded-full font-semibold",children:[t.jsxDEV(ct,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:80,columnNumber:25},this),"Admin"]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:75,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:74,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:42,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:40,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:30,columnNumber:11},this),t.jsxDEV("div",{className:"flex items-center gap-3",children:e?t.jsxDEV(t.Fragment,{children:[t.jsxDEV(Xh,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:93,columnNumber:17},this),t.jsxDEV(Oh,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:94,columnNumber:17},this),t.jsxDEV(Ne,{href:"/profile",children:t.jsxDEV(A,{variant:"ghost",size:"sm",className:"hidden md:flex items-center gap-2 rounded-full",children:[t.jsxDEV(ws,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:101,columnNumber:21},this),t.jsxDEV("span",{className:"font-semibold",children:e.firstName||e.email},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:102,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:96,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:95,columnNumber:17},this),t.jsxDEV(A,{variant:"ghost",size:"sm",onClick:()=>a(),className:"text-red-600 hover:text-red-700 hover:bg-red-50 rounded-full font-semibold",children:[t.jsxDEV(li,{className:"w-4 h-4 md:mr-2"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:111,columnNumber:19},this),t.jsxDEV("span",{className:"hidden md:inline",children:"Sign Out"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:112,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:105,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:92,columnNumber:15},this):t.jsxDEV(Ne,{href:"/",children:t.jsxDEV(A,{className:"rounded-full bg-blue-600 hover:bg-blue-700 font-bold",children:"Sign In"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:117,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:116,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:90,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:29,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:28,columnNumber:7},this),e&&t.jsxDEV("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-950 border-t border-gray-200 dark:border-slate-800 z-50 safe-area-pb transition-colors",children:t.jsxDEV("div",{className:`grid ${r?"grid-cols-4":"grid-cols-3"} h-14`,children:[t.jsxDEV(Ne,{href:"/dashboard",className:`flex flex-col items-center justify-center gap-1 transition-colors ${s==="/dashboard"?"text-blue-600 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400"}`,children:[t.jsxDEV(ba,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:135,columnNumber:15},this),t.jsxDEV("span",{className:"text-[10px] font-bold",children:i?"Dashboard":"Find Ride"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:136,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:130,columnNumber:13},this),i?t.jsxDEV(Ne,{href:"/driver/my-routes",className:`flex flex-col items-center justify-center gap-1 transition-colors ${s==="/driver/my-routes"?"text-blue-600 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400"}`,children:[t.jsxDEV(ii,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:144,columnNumber:17},this),t.jsxDEV("span",{className:"text-[10px] font-bold",children:"My Routes"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:145,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:139,columnNumber:15},this):t.jsxDEV(Ne,{href:"/my-rides",className:`flex flex-col items-center justify-center gap-1 transition-colors ${s==="/my-rides"?"text-blue-600 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400"}`,children:[t.jsxDEV(js,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:153,columnNumber:17},this),t.jsxDEV("span",{className:"text-[10px] font-bold",children:"My Tickets"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:154,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:148,columnNumber:15},this),r&&t.jsxDEV(Ne,{href:"/admin/console",className:`flex flex-col items-center justify-center gap-1 transition-colors ${s==="/admin/console"||s==="/admin"?"text-blue-600 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400"}`,children:[t.jsxDEV(ct,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:163,columnNumber:17},this),t.jsxDEV("span",{className:"text-[10px] font-bold",children:"Admin"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:164,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:158,columnNumber:15},this),t.jsxDEV(Ne,{href:"/profile",className:`flex flex-col items-center justify-center gap-1 transition-colors ${s==="/profile"?"text-blue-600 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400"}`,children:[t.jsxDEV(ws,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:172,columnNumber:15},this),t.jsxDEV("span",{className:"text-[10px] font-bold",children:"Profile"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:173,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:167,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:129,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:128,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/Navigation.tsx",lineNumber:27,columnNumber:5},this)}function eN(){const s=Rn(),{sync:e,isSyncing:a}=ko();return s?null:t.jsxDEV("div",{className:"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-80 z-50",children:t.jsxDEV("div",{className:"bg-amber-500 text-white rounded-xl shadow-lg p-4 flex items-center gap-3",children:[t.jsxDEV(ri,{className:"h-5 w-5 flex-shrink-0"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/OfflineIndicator.tsx",lineNumber:14,columnNumber:9},this),t.jsxDEV("div",{className:"flex-1",children:[t.jsxDEV("p",{className:"font-semibold text-sm",children:"You're offline"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/OfflineIndicator.tsx",lineNumber:16,columnNumber:11},this),t.jsxDEV("p",{className:"text-xs text-amber-100",children:"Showing cached data"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/OfflineIndicator.tsx",lineNumber:17,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/OfflineIndicator.tsx",lineNumber:15,columnNumber:9},this),t.jsxDEV("button",{onClick:()=>e(),disabled:a,className:"p-2 bg-amber-600 rounded-lg hover:bg-amber-700 transition-colors disabled:opacity-50",children:t.jsxDEV(oi,{className:`h-4 w-4 ${a?"animate-spin":""}`},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/OfflineIndicator.tsx",lineNumber:24,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/OfflineIndicator.tsx",lineNumber:19,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/OfflineIndicator.tsx",lineNumber:13,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/components/OfflineIndicator.tsx",lineNumber:12,columnNumber:5},this)}function sN(){const s=he(),e=m.useRef(Date.now());m.useEffect(()=>{const a=()=>{document.visibilityState==="visible"?Date.now()-e.current>1e4&&(s.invalidateQueries({queryKey:["/api/schedules"]}),s.invalidateQueries({queryKey:["/api/bookings"]}),s.invalidateQueries({queryKey:["notifications"]}),s.invalidateQueries({queryKey:["/api/auth/user"]})):e.current=Date.now()},n=()=>{s.invalidateQueries({queryKey:["/api/schedules"]}),s.invalidateQueries({queryKey:["/api/bookings"]}),s.invalidateQueries({queryKey:["notifications"]})};return document.addEventListener("visibilitychange",a),window.addEventListener("online",n),()=>{document.removeEventListener("visibilitychange",a),window.removeEventListener("online",n)}},[s])}function $a({children:s}){const{user:e,isLoading:a}=Ce();return a?t.jsxDEV("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:t.jsxDEV(se,{className:"h-8 w-8 animate-spin text-primary"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:35,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:34,columnNumber:7},this):e?t.jsxDEV(t.Fragment,{children:s},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:44,columnNumber:10},this):t.jsxDEV(at,{to:"/login"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:41,columnNumber:12},this)}function yt({children:s,allowedRoles:e}){const{user:a,isLoading:n}=Ce();return n?t.jsxDEV("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:t.jsxDEV(se,{className:"h-8 w-8 animate-spin text-primary"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:54,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:53,columnNumber:7},this):a?e.includes(a.role)?t.jsxDEV(t.Fragment,{children:s},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:67,columnNumber:10},this):t.jsxDEV(at,{to:"/dashboard"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:64,columnNumber:12},this):t.jsxDEV(at,{to:"/login"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:60,columnNumber:12},this)}function tN(){const{user:s,isLoading:e}=Ce();return sN(),e?t.jsxDEV("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsxDEV(se,{className:"h-8 w-8 animate-spin text-primary"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:77,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:76,columnNumber:7},this):t.jsxDEV(t.Fragment,{children:[s&&t.jsxDEV(Jh,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:84,columnNumber:16},this),t.jsxDEV(wl,{children:[t.jsxDEV(Ue,{path:"/login",children:s?t.jsxDEV(at,{to:"/dashboard"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:88,columnNumber:19},this):t.jsxDEV(Hn,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:88,columnNumber:50},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:87,columnNumber:9},this),t.jsxDEV(Ue,{path:"/signup",children:s?t.jsxDEV(at,{to:"/dashboard"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:91,columnNumber:19},this):t.jsxDEV(sh,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:91,columnNumber:50},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:90,columnNumber:9},this),t.jsxDEV(Ue,{path:"/verify-email",children:t.jsxDEV(th,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:96,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:95,columnNumber:9},this),t.jsxDEV(Ue,{path:"/",children:s?t.jsxDEV(at,{to:"/dashboard"},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:101,columnNumber:19},this):t.jsxDEV(Hn,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:101,columnNumber:50},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:100,columnNumber:9},this),t.jsxDEV(Ue,{path:"/dashboard",children:t.jsxDEV($a,{children:t.jsxDEV(Ap,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:107,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:106,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:105,columnNumber:9},this),t.jsxDEV(Ue,{path:"/my-rides",children:t.jsxDEV($a,{children:t.jsxDEV(Up,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:113,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:112,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:111,columnNumber:9},this),t.jsxDEV(Ue,{path:"/profile",children:t.jsxDEV($a,{children:t.jsxDEV(vh,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:119,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:118,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:117,columnNumber:9},this),t.jsxDEV(Ue,{path:"/driver/routes",children:t.jsxDEV(yt,{allowedRoles:["driver"],children:t.jsxDEV(Ch,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:126,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:125,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:124,columnNumber:9},this),t.jsxDEV(Ue,{path:"/driver/my-routes",children:t.jsxDEV(yt,{allowedRoles:["driver"],children:t.jsxDEV(Sp,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:132,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:131,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:130,columnNumber:9},this),t.jsxDEV(Ue,{path:"/admin",children:t.jsxDEV(Jp,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:138,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:137,columnNumber:9},this),t.jsxDEV(Ue,{path:"/admin/console",children:t.jsxDEV(yt,{allowedRoles:["admin"],children:t.jsxDEV(dr,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:144,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:143,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:142,columnNumber:9},this),t.jsxDEV(Ue,{path:"/admin/register-staff",children:t.jsxDEV(yt,{allowedRoles:["admin"],children:t.jsxDEV(eh,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:151,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:150,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:149,columnNumber:9},this),t.jsxDEV(Ue,{path:"/mwg-ctrl-x9k72",children:t.jsxDEV(yt,{allowedRoles:["admin"],children:t.jsxDEV(dr,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:158,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:157,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:156,columnNumber:9},this),t.jsxDEV(Ue,{component:Iu},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:163,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:85,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:83,columnNumber:5},this)}function aN(){return t.jsxDEV(El,{client:Ul,children:t.jsxDEV(Qh,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!0,storageKey:"bus-connect-theme",children:t.jsxDEV(_u,{children:[t.jsxDEV(tN,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:180,columnNumber:11},this),t.jsxDEV(Su,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:181,columnNumber:11},this),t.jsxDEV(eN,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:182,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:179,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:172,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/App.tsx",lineNumber:171,columnNumber:5},this)}"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{const s=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",s.scope)}catch(s){console.error("Service Worker registration failed:",s)}});jl.createRoot(document.getElementById("root")).render(t.jsxDEV(aN,{},void 0,!1,{fileName:"C:/Users/sarkc/Desktop/Ayanda/Bus-Connect/client/src/main.tsx",lineNumber:18,columnNumber:53},void 0));export{Wh as z};
